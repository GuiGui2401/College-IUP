{"ast":null,"code":"import React,{useState,useRef}from'react';import{Modal,Button,Row,Col,Alert}from'react-bootstrap';import{Camera,Upload,X}from'react-bootstrap-icons';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const PhotoCapture=_ref=>{let{show,onHide,onPhotoSelected}=_ref;const[mode,setMode]=useState('select');// 'select', 'camera', 'preview'\nconst[photoPreview,setPhotoPreview]=useState(null);const[photoFile,setPhotoFile]=useState(null);const[isStreaming,setIsStreaming]=useState(false);const[error,setError]=useState('');const[uploading,setUploading]=useState(false);const[startingCamera,setStartingCamera]=useState(false);const videoRef=useRef(null);const canvasRef=useRef(null);const fileInputRef=useRef(null);const streamRef=useRef(null);// Démarrer la caméra - DOIT être appelé directement depuis un événement utilisateur pour iOS\nconst startCamera=async event=>{// Empêcher la propagation pour éviter les interférences\nif(event){event.preventDefault();event.stopPropagation();}try{setError('');setStartingCamera(true);// Configuration spécifique pour iOS Safari\nconst constraints={video:{width:{ideal:640,max:1280},height:{ideal:480,max:720},facingMode:'environment'// Caméra arrière par défaut\n}};// Vérification de compatibilité\nif(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){throw new Error('getUserMedia n\\'est pas supporté sur ce navigateur');}// IMPORTANT: Appel direct sans await intermédiaire pour iOS\nconst stream=await navigator.mediaDevices.getUserMedia(constraints);if(videoRef.current){videoRef.current.srcObject=stream;streamRef.current=stream;setIsStreaming(true);setMode('camera');}}catch(err){console.error('Camera error:',err);let errorMessage='Impossible d\\'accéder à la caméra.';if(err.name==='NotAllowedError'){errorMessage='Accès à la caméra refusé. Sur iPhone: Réglages > Safari > Caméra > Autoriser, puis rechargez la page.';}else if(err.name==='NotFoundError'){errorMessage='Aucune caméra trouvée sur cet appareil.';}else if(err.name==='NotSupportedError'){errorMessage='La caméra n\\'est pas supportée sur ce navigateur. Utilisez Safari sur iOS.';}else if(err.name==='NotReadableError'){errorMessage='La caméra est utilisée par une autre application.';}setError(errorMessage);}finally{setStartingCamera(false);}};// Arrêter la caméra\nconst stopCamera=()=>{if(streamRef.current){streamRef.current.getTracks().forEach(track=>track.stop());streamRef.current=null;}setIsStreaming(false);};// Prendre une photo avec la caméra\nconst capturePhoto=()=>{if(videoRef.current&&canvasRef.current){const canvas=canvasRef.current;const video=videoRef.current;canvas.width=video.videoWidth;canvas.height=video.videoHeight;const ctx=canvas.getContext('2d');ctx.drawImage(video,0,0);canvas.toBlob(blob=>{const file=new File([blob],'camera-photo.jpg',{type:'image/jpeg'});setPhotoFile(file);setPhotoPreview(URL.createObjectURL(blob));setMode('preview');stopCamera();},'image/jpeg',0.8);}};// Sélectionner un fichier\nconst handleFileSelect=event=>{const file=event.target.files[0];if(file){if(file.type.startsWith('image/')){setPhotoFile(file);setPhotoPreview(URL.createObjectURL(file));setMode('preview');setError('');}else{setError('Veuillez sélectionner un fichier image (JPG, PNG).');}}};// Upload de la photo\nconst uploadPhoto=async()=>{if(!photoFile)return;setUploading(true);setError('');try{const formData=new FormData();formData.append('photo',photoFile);// Utiliser le service d'API sécurisé depuis apiMigration\nconst{secureApiEndpoints}=await import('../utils/apiMigration');const result=await secureApiEndpoints.userManagement.uploadPhoto(formData);if(result.success){onPhotoSelected(result.data.url);handleClose();}else{setError(result.message||'Erreur lors de l\\'upload');}}catch(err){setError('Erreur lors de l\\'upload de la photo');console.error('Upload error:',err);}finally{setUploading(false);}};// Fermer et nettoyer\nconst handleClose=()=>{stopCamera();setMode('select');setPhotoPreview(null);setPhotoFile(null);setError('');setUploading(false);setStartingCamera(false);onHide();};// Retour au mode sélection\nconst backToSelection=()=>{setMode('select');setPhotoPreview(null);setPhotoFile(null);setError('');};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,size:\"lg\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[mode==='select'&&'Ajouter une photo',mode==='camera'&&'Prendre une photo',mode==='preview'&&'Aperçu de la photo']})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[error&&/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",children:[/*#__PURE__*/_jsx(\"div\",{children:error}),error.includes('autorisez')&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Sur iPhone:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"1. Ouvrez R\\xE9glages \\u2192 Safari \\u2192 Cam\\xE9ra\",/*#__PURE__*/_jsx(\"br\",{}),\"2. S\\xE9lectionnez \\\"Autoriser\\\"\",/*#__PURE__*/_jsx(\"br\",{}),\"3. Rechargez cette page\"]})})]}),mode==='select'&&/*#__PURE__*/_jsxs(Row,{className:\"text-center\",children:[/*#__PURE__*/_jsx(Col,{md:6,className:\"mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"lg\",onClick:startCamera,className:\"py-4\",style:{minHeight:'120px'},disabled:startingCamera,children:startingCamera?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border spinner-border-sm mb-2 d-block mx-auto\"}),\"D\\xE9marrage cam\\xE9ra...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Camera,{size:32,className:\"mb-2 d-block mx-auto\"}),\"Prendre une photo\",/*#__PURE__*/_jsx(\"small\",{className:\"d-block mt-1\",style:{fontSize:'0.8em',opacity:0.8},children:\"(Toucher pour activer)\"})]})})})}),/*#__PURE__*/_jsx(Col,{md:6,className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",size:\"lg\",onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},className:\"py-4\",children:[/*#__PURE__*/_jsx(Upload,{size:32,className:\"mb-2 d-block mx-auto\"}),\"S\\xE9lectionner un fichier\"]}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"image/*\",onChange:handleFileSelect,style:{display:'none'}})]})})]}),mode==='camera'&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,playsInline:true,muted:true,style:{width:'100%',maxWidth:'500px',borderRadius:'8px',marginBottom:'20px',backgroundColor:'#f0f0f0'}}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{display:'none'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Button,{variant:\"success\",size:\"lg\",onClick:capturePhoto,className:\"me-3\",children:[/*#__PURE__*/_jsx(Camera,{className:\"me-2\"}),\"Capturer\"]}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:backToSelection,children:\"Annuler\"})]})]}),mode==='preview'&&photoPreview&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:photoPreview,alt:\"Aper\\xE7u\",style:{width:'100%',maxWidth:'400px',borderRadius:'8px',marginBottom:'20px'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"success\",size:\"lg\",onClick:uploadPhoto,disabled:uploading,className:\"me-3\",children:uploading?'Upload...':'Utiliser cette photo'}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:backToSelection,disabled:uploading,children:\"Retour\"})]})]})]})]});};export default PhotoCapture;","map":{"version":3,"names":["React","useState","useRef","Modal","Button","Row","Col","Alert","Camera","Upload","X","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","PhotoCapture","_ref","show","onHide","onPhotoSelected","mode","setMode","photoPreview","setPhotoPreview","photoFile","setPhotoFile","isStreaming","setIsStreaming","error","setError","uploading","setUploading","startingCamera","setStartingCamera","videoRef","canvasRef","fileInputRef","streamRef","startCamera","event","preventDefault","stopPropagation","constraints","video","width","ideal","max","height","facingMode","navigator","mediaDevices","getUserMedia","Error","stream","current","srcObject","err","console","errorMessage","name","stopCamera","getTracks","forEach","track","stop","capturePhoto","canvas","videoWidth","videoHeight","ctx","getContext","drawImage","toBlob","blob","file","File","type","URL","createObjectURL","handleFileSelect","target","files","startsWith","uploadPhoto","formData","FormData","append","secureApiEndpoints","result","userManagement","success","data","url","handleClose","message","backToSelection","size","centered","children","Header","closeButton","Title","Body","variant","includes","className","md","onClick","style","minHeight","disabled","fontSize","opacity","_fileInputRef$current","click","ref","accept","onChange","display","autoPlay","playsInline","muted","maxWidth","borderRadius","marginBottom","backgroundColor","src","alt"],"sources":["/var/www/College-IUP/front/src/components/PhotoCapture.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Modal, Button, Row, Col, Alert } from 'react-bootstrap';\nimport { Camera, Upload, X } from 'react-bootstrap-icons';\n\nconst PhotoCapture = ({ show, onHide, onPhotoSelected }) => {\n    const [mode, setMode] = useState('select'); // 'select', 'camera', 'preview'\n    const [photoPreview, setPhotoPreview] = useState(null);\n    const [photoFile, setPhotoFile] = useState(null);\n    const [isStreaming, setIsStreaming] = useState(false);\n    const [error, setError] = useState('');\n    const [uploading, setUploading] = useState(false);\n    const [startingCamera, setStartingCamera] = useState(false);\n    \n    const videoRef = useRef(null);\n    const canvasRef = useRef(null);\n    const fileInputRef = useRef(null);\n    const streamRef = useRef(null);\n\n    // Démarrer la caméra - DOIT être appelé directement depuis un événement utilisateur pour iOS\n    const startCamera = async (event) => {\n        // Empêcher la propagation pour éviter les interférences\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        \n        try {\n            setError('');\n            setStartingCamera(true);\n            \n            // Configuration spécifique pour iOS Safari\n            const constraints = {\n                video: {\n                    width: { ideal: 640, max: 1280 },\n                    height: { ideal: 480, max: 720 },\n                    facingMode: 'environment' // Caméra arrière par défaut\n                }\n            };\n            \n            // Vérification de compatibilité\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n                throw new Error('getUserMedia n\\'est pas supporté sur ce navigateur');\n            }\n            \n            // IMPORTANT: Appel direct sans await intermédiaire pour iOS\n            const stream = await navigator.mediaDevices.getUserMedia(constraints);\n            \n            if (videoRef.current) {\n                videoRef.current.srcObject = stream;\n                streamRef.current = stream;\n                setIsStreaming(true);\n                setMode('camera');\n            }\n        } catch (err) {\n            console.error('Camera error:', err);\n            let errorMessage = 'Impossible d\\'accéder à la caméra.';\n            \n            if (err.name === 'NotAllowedError') {\n                errorMessage = 'Accès à la caméra refusé. Sur iPhone: Réglages > Safari > Caméra > Autoriser, puis rechargez la page.';\n            } else if (err.name === 'NotFoundError') {\n                errorMessage = 'Aucune caméra trouvée sur cet appareil.';\n            } else if (err.name === 'NotSupportedError') {\n                errorMessage = 'La caméra n\\'est pas supportée sur ce navigateur. Utilisez Safari sur iOS.';\n            } else if (err.name === 'NotReadableError') {\n                errorMessage = 'La caméra est utilisée par une autre application.';\n            }\n            \n            setError(errorMessage);\n        } finally {\n            setStartingCamera(false);\n        }\n    };\n\n    // Arrêter la caméra\n    const stopCamera = () => {\n        if (streamRef.current) {\n            streamRef.current.getTracks().forEach(track => track.stop());\n            streamRef.current = null;\n        }\n        setIsStreaming(false);\n    };\n\n    // Prendre une photo avec la caméra\n    const capturePhoto = () => {\n        if (videoRef.current && canvasRef.current) {\n            const canvas = canvasRef.current;\n            const video = videoRef.current;\n            \n            canvas.width = video.videoWidth;\n            canvas.height = video.videoHeight;\n            \n            const ctx = canvas.getContext('2d');\n            ctx.drawImage(video, 0, 0);\n            \n            canvas.toBlob((blob) => {\n                const file = new File([blob], 'camera-photo.jpg', { type: 'image/jpeg' });\n                setPhotoFile(file);\n                setPhotoPreview(URL.createObjectURL(blob));\n                setMode('preview');\n                stopCamera();\n            }, 'image/jpeg', 0.8);\n        }\n    };\n\n    // Sélectionner un fichier\n    const handleFileSelect = (event) => {\n        const file = event.target.files[0];\n        if (file) {\n            if (file.type.startsWith('image/')) {\n                setPhotoFile(file);\n                setPhotoPreview(URL.createObjectURL(file));\n                setMode('preview');\n                setError('');\n            } else {\n                setError('Veuillez sélectionner un fichier image (JPG, PNG).');\n            }\n        }\n    };\n\n    // Upload de la photo\n    const uploadPhoto = async () => {\n        if (!photoFile) return;\n        \n        setUploading(true);\n        setError('');\n        \n        try {\n            const formData = new FormData();\n            formData.append('photo', photoFile);\n            \n            // Utiliser le service d'API sécurisé depuis apiMigration\n            const { secureApiEndpoints } = await import('../utils/apiMigration');\n            const result = await secureApiEndpoints.userManagement.uploadPhoto(formData);\n            \n            if (result.success) {\n                onPhotoSelected(result.data.url);\n                handleClose();\n            } else {\n                setError(result.message || 'Erreur lors de l\\'upload');\n            }\n        } catch (err) {\n            setError('Erreur lors de l\\'upload de la photo');\n            console.error('Upload error:', err);\n        } finally {\n            setUploading(false);\n        }\n    };\n\n    // Fermer et nettoyer\n    const handleClose = () => {\n        stopCamera();\n        setMode('select');\n        setPhotoPreview(null);\n        setPhotoFile(null);\n        setError('');\n        setUploading(false);\n        setStartingCamera(false);\n        onHide();\n    };\n\n    // Retour au mode sélection\n    const backToSelection = () => {\n        setMode('select');\n        setPhotoPreview(null);\n        setPhotoFile(null);\n        setError('');\n    };\n\n    return (\n        <Modal show={show} onHide={handleClose} size=\"lg\" centered>\n            <Modal.Header closeButton>\n                <Modal.Title>\n                    {mode === 'select' && 'Ajouter une photo'}\n                    {mode === 'camera' && 'Prendre une photo'}\n                    {mode === 'preview' && 'Aperçu de la photo'}\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                {error && (\n                    <Alert variant=\"danger\">\n                        <div>{error}</div>\n                        {error.includes('autorisez') && (\n                            <div className=\"mt-2\">\n                                <small>\n                                    <strong>Sur iPhone:</strong><br/>\n                                    1. Ouvrez Réglages → Safari → Caméra<br/>\n                                    2. Sélectionnez \"Autoriser\"<br/>\n                                    3. Rechargez cette page\n                                </small>\n                            </div>\n                        )}\n                    </Alert>\n                )}\n                \n                {mode === 'select' && (\n                    <Row className=\"text-center\">\n                        <Col md={6} className=\"mb-3\">\n                            <div className=\"d-grid\">\n                                <Button\n                                    variant=\"primary\"\n                                    size=\"lg\"\n                                    onClick={startCamera}\n                                    className=\"py-4\"\n                                    style={{ minHeight: '120px' }}\n                                    disabled={startingCamera}\n                                >\n                                    {startingCamera ? (\n                                        <>\n                                            <div className=\"spinner-border spinner-border-sm mb-2 d-block mx-auto\" />\n                                            Démarrage caméra...\n                                        </>\n                                    ) : (\n                                        <>\n                                            <Camera size={32} className=\"mb-2 d-block mx-auto\" />\n                                            Prendre une photo\n                                            <small className=\"d-block mt-1\" style={{ fontSize: '0.8em', opacity: 0.8 }}>\n                                                (Toucher pour activer)\n                                            </small>\n                                        </>\n                                    )}\n                                </Button>\n                            </div>\n                        </Col>\n                        <Col md={6} className=\"mb-3\">\n                            <div className=\"d-grid\">\n                                <Button\n                                    variant=\"outline-primary\"\n                                    size=\"lg\"\n                                    onClick={() => fileInputRef.current?.click()}\n                                    className=\"py-4\"\n                                >\n                                    <Upload size={32} className=\"mb-2 d-block mx-auto\" />\n                                    Sélectionner un fichier\n                                </Button>\n                                <input\n                                    ref={fileInputRef}\n                                    type=\"file\"\n                                    accept=\"image/*\"\n                                    onChange={handleFileSelect}\n                                    style={{ display: 'none' }}\n                                />\n                            </div>\n                        </Col>\n                    </Row>\n                )}\n\n                {mode === 'camera' && (\n                    <div className=\"text-center\">\n                        <video\n                            ref={videoRef}\n                            autoPlay\n                            playsInline\n                            muted\n                            style={{\n                                width: '100%',\n                                maxWidth: '500px',\n                                borderRadius: '8px',\n                                marginBottom: '20px',\n                                backgroundColor: '#f0f0f0'\n                            }}\n                        />\n                        <canvas ref={canvasRef} style={{ display: 'none' }} />\n                        <div>\n                            <Button\n                                variant=\"success\"\n                                size=\"lg\"\n                                onClick={capturePhoto}\n                                className=\"me-3\"\n                            >\n                                <Camera className=\"me-2\" />\n                                Capturer\n                            </Button>\n                            <Button\n                                variant=\"secondary\"\n                                onClick={backToSelection}\n                            >\n                                Annuler\n                            </Button>\n                        </div>\n                    </div>\n                )}\n\n                {mode === 'preview' && photoPreview && (\n                    <div className=\"text-center\">\n                        <img\n                            src={photoPreview}\n                            alt=\"Aperçu\"\n                            style={{\n                                width: '100%',\n                                maxWidth: '400px',\n                                borderRadius: '8px',\n                                marginBottom: '20px'\n                            }}\n                        />\n                        <div>\n                            <Button\n                                variant=\"success\"\n                                size=\"lg\"\n                                onClick={uploadPhoto}\n                                disabled={uploading}\n                                className=\"me-3\"\n                            >\n                                {uploading ? 'Upload...' : 'Utiliser cette photo'}\n                            </Button>\n                            <Button\n                                variant=\"secondary\"\n                                onClick={backToSelection}\n                                disabled={uploading}\n                            >\n                                Retour\n                            </Button>\n                        </div>\n                    </div>\n                )}\n            </Modal.Body>\n        </Modal>\n    );\n};\n\nexport default PhotoCapture;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}