{"ast":null,"code":"import{useState,useEffect}from'react';import{Container,Row,Col,Card,Button,Table,Badge,Modal,Form,Alert,Spinner,Pagination,ButtonGroup,OverlayTrigger,Tooltip}from'react-bootstrap';import{Eye,Check2Circle,XCircle,Clock,Calendar,CurrencyDollar,Person,FileText,BarChart,Search,Whatsapp,Download,FiletypePdf,FiletypeDocx,FileEarmarkExcel}from'react-bootstrap-icons';import{secureApiEndpoints}from'../../utils/apiMigration';import{extractErrorMessage}from'../../utils/errorHandler';import Swal from'sweetalert2';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const NeedsManagement=()=>{var _statistics$summary;const[needs,setNeeds]=useState([]);const[statistics,setStatistics]=useState({});const[loading,setLoading]=useState(true);const[processing,setProcessing]=useState(false);const[showModal,setShowModal]=useState(false);const[selectedNeed,setSelectedNeed]=useState(null);const[showRejectModal,setShowRejectModal]=useState(false);const[rejectionReason,setRejectionReason]=useState('');const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[filters,setFilters]=useState({status:'',search:'',from_date:'',to_date:''});const[error,setError]=useState('');const[success,setSuccess]=useState('');useEffect(()=>{loadNeeds();loadStatistics();},[currentPage,filters]);const loadNeeds=async()=>{try{setLoading(true);const params={page:currentPage,per_page:15,...filters};// Nettoyer les paramètres vides\nObject.keys(params).forEach(key=>{if(params[key]===''){delete params[key];}});const response=await secureApiEndpoints.needs.getAll(params);if(response.success){setNeeds(response.data.data);setCurrentPage(response.data.current_page);setTotalPages(response.data.last_page);}else{setError(response.message);}}catch(error){setError(extractErrorMessage(error));}finally{setLoading(false);}};const loadStatistics=async()=>{try{const response=await secureApiEndpoints.needs.getStatistics();if(response.success){setStatistics(response.data);}}catch(error){console.error('Erreur lors du chargement des statistiques:',error);}};const showNeedDetails=async need=>{try{const response=await secureApiEndpoints.needs.getById(need.id);if(response.success){setSelectedNeed(response.data);setShowModal(true);}}catch(error){setError(extractErrorMessage(error));}};const approveNeed=async needId=>{const result=await Swal.fire({title:'Approuver ce besoin ?',text:'Cette action enverra une notification au demandeur.',icon:'question',showCancelButton:true,confirmButtonText:'Oui, approuver',cancelButtonText:'Annuler',confirmButtonColor:'#28a745'});if(result.isConfirmed){try{setProcessing(true);const response=await secureApiEndpoints.needs.approve(needId);if(response.success){setSuccess('Besoin approuvé avec succès');loadNeeds();loadStatistics();setShowModal(false);}else{setError(response.message);}}catch(error){setError(extractErrorMessage(error));}finally{setProcessing(false);}}};const handleReject=need=>{setSelectedNeed(need);setRejectionReason('');setShowRejectModal(true);};const rejectNeed=async()=>{if(!rejectionReason.trim()){setError('Le motif du rejet est obligatoire');return;}try{setProcessing(true);const response=await secureApiEndpoints.needs.reject(selectedNeed.id,{rejection_reason:rejectionReason});if(response.success){setSuccess('Besoin rejeté avec succès');loadNeeds();loadStatistics();setShowRejectModal(false);setShowModal(false);}else{setError(response.message);}}catch(error){setError(extractErrorMessage(error));}finally{setProcessing(false);}};const testWhatsApp=async()=>{try{setProcessing(true);const response=await secureApiEndpoints.needs.testWhatsApp();if(response.success){Swal.fire({title:'Test réussi !',text:response.message,icon:'success',confirmButtonText:'OK'});}else{Swal.fire({title:'Test échoué',text:response.message,icon:'error',confirmButtonText:'OK'});}}catch(error){Swal.fire({title:'Erreur',text:extractErrorMessage(error),icon:'error',confirmButtonText:'OK'});}finally{setProcessing(false);}};const getStatusBadge=status=>{const statusConfig={pending:{variant:'warning',icon:Clock,text:'En attente'},approved:{variant:'success',icon:Check2Circle,text:'Approuvé'},rejected:{variant:'danger',icon:XCircle,text:'Rejeté'}};const config=statusConfig[status]||statusConfig.pending;const IconComponent=config.icon;return/*#__PURE__*/_jsxs(Badge,{bg:config.variant,className:\"d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(IconComponent,{size:12}),config.text]});};const formatAmount=amount=>{return new Intl.NumberFormat('fr-FR',{style:'currency',currency:'XAF',minimumFractionDigits:0,maximumFractionDigits:0}).format(amount).replace('XAF','FCFA');};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('fr-FR',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'});};const exportNeeds=async format=>{try{setProcessing(true);// Préparer les paramètres d'export avec les filtres actuels\nconst exportParams={...filters};// Nettoyer les paramètres vides\nObject.keys(exportParams).forEach(key=>{if(exportParams[key]===''){delete exportParams[key];}});let url='';let filename='';const statusSuffix=filters.status?`_${filters.status}`:'_tous';const dateSuffix=new Date().toISOString().split('T')[0];switch(format){case'pdf':url=secureApiEndpoints.needs.exportPdf(exportParams);filename=`besoins${statusSuffix}_${dateSuffix}.pdf`;break;case'excel':url=secureApiEndpoints.needs.exportExcel(exportParams);filename=`besoins${statusSuffix}_${dateSuffix}.xlsx`;break;case'word':url=secureApiEndpoints.needs.exportWord(exportParams);filename=`besoins${statusSuffix}_${dateSuffix}.docx`;break;default:throw new Error('Format d\\'export non supporté');}// Créer un lien temporaire pour télécharger le fichier\nconst link=document.createElement('a');link.href=url;link.download=filename;document.body.appendChild(link);link.click();document.body.removeChild(link);setSuccess(`Export ${format.toUpperCase()} lancé avec succès`);}catch(error){setError(extractErrorMessage(error));}finally{setProcessing(false);}};return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"py-4\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gestion des Besoins\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"G\\xE9rez les demandes de besoins des utilisateurs\"})]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-success\",onClick:testWhatsApp,disabled:processing,children:[/*#__PURE__*/_jsx(Whatsapp,{className:\"me-2\"}),\"Tester WhatsApp\"]})]})})}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",dismissible:true,onClose:()=>setError(''),children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",dismissible:true,onClose:()=>setSuccess(''),children:success}),statistics.summary&&/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"bg-primary text-white\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"h3\",{children:statistics.summary.total})]}),/*#__PURE__*/_jsx(BarChart,{size:40})]})})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"bg-warning text-white\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"En attente\"}),/*#__PURE__*/_jsx(\"h3\",{children:statistics.summary.pending}),/*#__PURE__*/_jsx(\"small\",{children:formatAmount(statistics.summary.total_amount_pending)})]}),/*#__PURE__*/_jsx(Clock,{size:40})]})})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"bg-success text-white\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Approuv\\xE9s\"}),/*#__PURE__*/_jsx(\"h3\",{children:statistics.summary.approved}),/*#__PURE__*/_jsx(\"small\",{children:formatAmount(statistics.summary.total_amount_approved)})]}),/*#__PURE__*/_jsx(Check2Circle,{size:40})]})})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"bg-danger text-white\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Rejet\\xE9s\"}),/*#__PURE__*/_jsx(\"h3\",{children:statistics.summary.rejected}),/*#__PURE__*/_jsx(\"small\",{children:formatAmount(statistics.summary.total_amount_rejected)})]}),/*#__PURE__*/_jsx(XCircle,{size:40})]})})})})]}),/*#__PURE__*/_jsx(Card,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Statut\"}),/*#__PURE__*/_jsxs(Form.Select,{value:filters.status,onChange:e=>{setFilters({...filters,status:e.target.value});setCurrentPage(1);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Tous les statuts\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"En attente\"}),/*#__PURE__*/_jsx(\"option\",{value:\"approved\",children:\"Approuv\\xE9\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rejected\",children:\"Rejet\\xE9\"})]})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Recherche\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Nom ou description...\",value:filters.search,onChange:e=>{setFilters({...filters,search:e.target.value});setCurrentPage(1);}})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date de d\\xE9but\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",value:filters.from_date,onChange:e=>{setFilters({...filters,from_date:e.target.value});setCurrentPage(1);}})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date de fin\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",value:filters.to_date,onChange:e=>{setFilters({...filters,to_date:e.target.value});setCurrentPage(1);}})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{className:\"fw-bold\",children:\"Actions d'Export\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2\",children:[/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"top\",overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"Exporter la liste en PDF\"}),children:/*#__PURE__*/_jsxs(Button,{variant:\"danger\",size:\"md\",onClick:()=>exportNeeds('pdf'),disabled:processing,className:\"d-flex align-items-center justify-content-center py-2\",children:[/*#__PURE__*/_jsx(FiletypePdf,{size:18,className:\"me-2\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"PDF\"})]})}),/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"top\",overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"Exporter la liste en Excel\"}),children:/*#__PURE__*/_jsxs(Button,{variant:\"success\",size:\"md\",onClick:()=>exportNeeds('excel'),disabled:processing,className:\"d-flex align-items-center justify-content-center py-2\",children:[/*#__PURE__*/_jsx(FileEarmarkExcel,{size:18,className:\"me-2\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Excel\"})]})}),/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"top\",overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"Exporter la liste en Word\"}),children:/*#__PURE__*/_jsxs(Button,{variant:\"primary\",size:\"md\",onClick:()=>exportNeeds('word'),disabled:processing,className:\"d-flex align-items-center justify-content-center py-2\",children:[/*#__PURE__*/_jsx(FiletypeDocx,{size:18,className:\"me-2\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Word\"})]})})]})]})})]})})}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[\"Liste des besoins (\",((_statistics$summary=statistics.summary)===null||_statistics$summary===void 0?void 0:_statistics$summary.total)||0,\")\"]})}),/*#__PURE__*/_jsx(Card.Body,{children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Chargement...\"})})}):needs.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(FileText,{size:48,className:\"text-muted mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Aucun besoin trouv\\xE9\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{responsive:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Demandeur\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Besoin\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Montant\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:needs.map(need=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Person,{className:\"me-1\"}),/*#__PURE__*/_jsx(\"strong\",{children:need.user.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-muted small\",children:need.user.email})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:need.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-muted small\",children:need.description.length>80?`${need.description.substring(0,80)}...`:need.description})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{className:\"text-primary\",children:formatAmount(need.amount)})}),/*#__PURE__*/_jsx(\"td\",{children:getStatusBadge(need.status)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:formatDate(need.created_at)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(ButtonGroup,{size:\"sm\",children:[/*#__PURE__*/_jsx(OverlayTrigger,{overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"Voir les d\\xE9tails\"}),children:/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",onClick:()=>showNeedDetails(need),children:/*#__PURE__*/_jsx(Eye,{size:14})})}),need.status==='pending'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(OverlayTrigger,{overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"Approuver\"}),children:/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",onClick:()=>approveNeed(need.id),disabled:processing,children:/*#__PURE__*/_jsx(Check2Circle,{size:14})})}),/*#__PURE__*/_jsx(OverlayTrigger,{overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"Rejeter\"}),children:/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",onClick:()=>handleReject(need),disabled:processing,children:/*#__PURE__*/_jsx(XCircle,{size:14})})})]})]})})]},need.id))})]}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(Pagination,{children:[/*#__PURE__*/_jsx(Pagination.Prev,{disabled:currentPage===1,onClick:()=>setCurrentPage(currentPage-1)}),[...Array(totalPages)].map((_,index)=>/*#__PURE__*/_jsx(Pagination.Item,{active:index+1===currentPage,onClick:()=>setCurrentPage(index+1),children:index+1},index+1)),/*#__PURE__*/_jsx(Pagination.Next,{disabled:currentPage===totalPages,onClick:()=>setCurrentPage(currentPage+1)})]})})]})})]}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:()=>setShowModal(false),size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"D\\xE9tails du Besoin\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:selectedNeed&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Demandeur:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Person,{className:\"me-1\"}),selectedNeed.user.name]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:selectedNeed.user.email})]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Statut:\"}),/*#__PURE__*/_jsx(\"p\",{children:getStatusBadge(selectedNeed.status)})]})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nom du besoin:\"}),/*#__PURE__*/_jsx(\"p\",{children:selectedNeed.name})]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Montant:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-primary\",children:formatAmount(selectedNeed.amount)})]})]}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"p\",{children:selectedNeed.description})]})}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date de soumission:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Calendar,{className:\"me-1\"}),formatDate(selectedNeed.created_at)]})]}),selectedNeed.approved_by&&/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Trait\\xE9 par:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Person,{className:\"me-1\"}),selectedNeed.approved_by.name]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Le \",formatDate(selectedNeed.approved_at)]})]})]}),selectedNeed.rejection_reason&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Motif du rejet:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:selectedNeed.rejection_reason})]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowModal(false),children:\"Fermer\"}),selectedNeed&&selectedNeed.status==='pending'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Button,{variant:\"success\",onClick:()=>approveNeed(selectedNeed.id),disabled:processing,children:[/*#__PURE__*/_jsx(Check2Circle,{className:\"me-2\"}),\"Approuver\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"danger\",onClick:()=>handleReject(selectedNeed),disabled:processing,children:[/*#__PURE__*/_jsx(XCircle,{className:\"me-2\"}),\"Rejeter\"]})]})]})]}),/*#__PURE__*/_jsxs(Modal,{show:showRejectModal,onHide:()=>setShowRejectModal(false),children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Rejeter le Besoin\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Motif du rejet *\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:4,placeholder:\"Expliquez pourquoi ce besoin ne peut pas \\xEAtre approuv\\xE9...\",value:rejectionReason,onChange:e=>setRejectionReason(e.target.value),required:true}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Ce motif sera communiqu\\xE9 au demandeur via WhatsApp.\"})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowRejectModal(false),children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:rejectNeed,disabled:processing||!rejectionReason.trim(),children:processing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\",className:\"me-2\"}),\"Rejet...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(XCircle,{className:\"me-2\"}),\"Confirmer le Rejet\"]})})]})]})]});};export default NeedsManagement;","map":{"version":3,"names":["useState","useEffect","Container","Row","Col","Card","Button","Table","Badge","Modal","Form","Alert","Spinner","Pagination","ButtonGroup","OverlayTrigger","Tooltip","Eye","Check2Circle","XCircle","Clock","Calendar","CurrencyDollar","Person","FileText","BarChart","Search","Whatsapp","Download","FiletypePdf","FiletypeDocx","FileEarmarkExcel","secureApiEndpoints","extractErrorMessage","Swal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NeedsManagement","_statistics$summary","needs","setNeeds","statistics","setStatistics","loading","setLoading","processing","setProcessing","showModal","setShowModal","selectedNeed","setSelectedNeed","showRejectModal","setShowRejectModal","rejectionReason","setRejectionReason","currentPage","setCurrentPage","totalPages","setTotalPages","filters","setFilters","status","search","from_date","to_date","error","setError","success","setSuccess","loadNeeds","loadStatistics","params","page","per_page","Object","keys","forEach","key","response","getAll","data","current_page","last_page","message","getStatistics","console","showNeedDetails","need","getById","id","approveNeed","needId","result","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","confirmButtonColor","isConfirmed","approve","handleReject","rejectNeed","trim","reject","rejection_reason","testWhatsApp","getStatusBadge","statusConfig","pending","variant","approved","rejected","config","IconComponent","bg","className","children","size","formatAmount","amount","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","replace","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","exportNeeds","exportParams","url","filename","statusSuffix","dateSuffix","toISOString","split","exportPdf","exportExcel","exportWord","Error","link","document","createElement","href","download","body","appendChild","click","removeChild","toUpperCase","fluid","onClick","disabled","dismissible","onClose","summary","md","Body","total","total_amount_pending","total_amount_approved","total_amount_rejected","Group","Label","Select","value","onChange","e","target","Control","type","placeholder","placement","overlay","Header","animation","role","length","responsive","hover","map","user","name","email","description","substring","created_at","Prev","Array","_","index","Item","active","Next","show","onHide","closeButton","Title","approved_by","approved_at","Footer","as","rows","required","Text"],"sources":["/var/www/College-IUP/front/src/pages/Needs/NeedsManagement.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport {\n    Container,\n    Row,\n    Col,\n    Card,\n    Button,\n    Table,\n    Badge,\n    Modal,\n    Form,\n    Alert,\n    Spinner,\n    Pagination,\n    ButtonGroup,\n    OverlayTrigger,\n    Tooltip\n} from 'react-bootstrap';\nimport {\n    Eye,\n    Check2Circle,\n    XCircle,\n    Clock,\n    Calendar,\n    CurrencyDollar,\n    Person,\n    FileText,\n    BarChart,\n    Search,\n    Whatsapp,\n    Download,\n    FiletypePdf,\n    FiletypeDocx,\n    FileEarmarkExcel\n} from 'react-bootstrap-icons';\nimport { secureApiEndpoints } from '../../utils/apiMigration';\nimport { extractErrorMessage } from '../../utils/errorHandler';\nimport Swal from 'sweetalert2';\n\nconst NeedsManagement = () => {\n    const [needs, setNeeds] = useState([]);\n    const [statistics, setStatistics] = useState({});\n    const [loading, setLoading] = useState(true);\n    const [processing, setProcessing] = useState(false);\n    const [showModal, setShowModal] = useState(false);\n    const [selectedNeed, setSelectedNeed] = useState(null);\n    const [showRejectModal, setShowRejectModal] = useState(false);\n    const [rejectionReason, setRejectionReason] = useState('');\n    const [currentPage, setCurrentPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(1);\n    const [filters, setFilters] = useState({\n        status: '',\n        search: '',\n        from_date: '',\n        to_date: ''\n    });\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n\n    useEffect(() => {\n        loadNeeds();\n        loadStatistics();\n    }, [currentPage, filters]);\n\n    const loadNeeds = async () => {\n        try {\n            setLoading(true);\n            const params = {\n                page: currentPage,\n                per_page: 15,\n                ...filters\n            };\n\n            // Nettoyer les paramètres vides\n            Object.keys(params).forEach(key => {\n                if (params[key] === '') {\n                    delete params[key];\n                }\n            });\n\n            const response = await secureApiEndpoints.needs.getAll(params);\n            \n            if (response.success) {\n                setNeeds(response.data.data);\n                setCurrentPage(response.data.current_page);\n                setTotalPages(response.data.last_page);\n            } else {\n                setError(response.message);\n            }\n        } catch (error) {\n            setError(extractErrorMessage(error));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const loadStatistics = async () => {\n        try {\n            const response = await secureApiEndpoints.needs.getStatistics();\n            if (response.success) {\n                setStatistics(response.data);\n            }\n        } catch (error) {\n            console.error('Erreur lors du chargement des statistiques:', error);\n        }\n    };\n\n    const showNeedDetails = async (need) => {\n        try {\n            const response = await secureApiEndpoints.needs.getById(need.id);\n            if (response.success) {\n                setSelectedNeed(response.data);\n                setShowModal(true);\n            }\n        } catch (error) {\n            setError(extractErrorMessage(error));\n        }\n    };\n\n    const approveNeed = async (needId) => {\n        const result = await Swal.fire({\n            title: 'Approuver ce besoin ?',\n            text: 'Cette action enverra une notification au demandeur.',\n            icon: 'question',\n            showCancelButton: true,\n            confirmButtonText: 'Oui, approuver',\n            cancelButtonText: 'Annuler',\n            confirmButtonColor: '#28a745'\n        });\n\n        if (result.isConfirmed) {\n            try {\n                setProcessing(true);\n                const response = await secureApiEndpoints.needs.approve(needId);\n                \n                if (response.success) {\n                    setSuccess('Besoin approuvé avec succès');\n                    loadNeeds();\n                    loadStatistics();\n                    setShowModal(false);\n                } else {\n                    setError(response.message);\n                }\n            } catch (error) {\n                setError(extractErrorMessage(error));\n            } finally {\n                setProcessing(false);\n            }\n        }\n    };\n\n    const handleReject = (need) => {\n        setSelectedNeed(need);\n        setRejectionReason('');\n        setShowRejectModal(true);\n    };\n\n    const rejectNeed = async () => {\n        if (!rejectionReason.trim()) {\n            setError('Le motif du rejet est obligatoire');\n            return;\n        }\n\n        try {\n            setProcessing(true);\n            const response = await secureApiEndpoints.needs.reject(selectedNeed.id, {\n                rejection_reason: rejectionReason\n            });\n            \n            if (response.success) {\n                setSuccess('Besoin rejeté avec succès');\n                loadNeeds();\n                loadStatistics();\n                setShowRejectModal(false);\n                setShowModal(false);\n            } else {\n                setError(response.message);\n            }\n        } catch (error) {\n            setError(extractErrorMessage(error));\n        } finally {\n            setProcessing(false);\n        }\n    };\n\n    const testWhatsApp = async () => {\n        try {\n            setProcessing(true);\n            const response = await secureApiEndpoints.needs.testWhatsApp();\n            \n            if (response.success) {\n                Swal.fire({\n                    title: 'Test réussi !',\n                    text: response.message,\n                    icon: 'success',\n                    confirmButtonText: 'OK'\n                });\n            } else {\n                Swal.fire({\n                    title: 'Test échoué',\n                    text: response.message,\n                    icon: 'error',\n                    confirmButtonText: 'OK'\n                });\n            }\n        } catch (error) {\n            Swal.fire({\n                title: 'Erreur',\n                text: extractErrorMessage(error),\n                icon: 'error',\n                confirmButtonText: 'OK'\n            });\n        } finally {\n            setProcessing(false);\n        }\n    };\n\n    const getStatusBadge = (status) => {\n        const statusConfig = {\n            pending: { variant: 'warning', icon: Clock, text: 'En attente' },\n            approved: { variant: 'success', icon: Check2Circle, text: 'Approuvé' },\n            rejected: { variant: 'danger', icon: XCircle, text: 'Rejeté' }\n        };\n\n        const config = statusConfig[status] || statusConfig.pending;\n        const IconComponent = config.icon;\n\n        return (\n            <Badge bg={config.variant} className=\"d-flex align-items-center gap-1\">\n                <IconComponent size={12} />\n                {config.text}\n            </Badge>\n        );\n    };\n\n    const formatAmount = (amount) => {\n        return new Intl.NumberFormat('fr-FR', {\n            style: 'currency',\n            currency: 'XAF',\n            minimumFractionDigits: 0,\n            maximumFractionDigits: 0\n        }).format(amount).replace('XAF', 'FCFA');\n    };\n\n    const formatDate = (dateString) => {\n        return new Date(dateString).toLocaleDateString('fr-FR', {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    };\n\n    const exportNeeds = async (format) => {\n        try {\n            setProcessing(true);\n            \n            // Préparer les paramètres d'export avec les filtres actuels\n            const exportParams = { ...filters };\n            \n            // Nettoyer les paramètres vides\n            Object.keys(exportParams).forEach(key => {\n                if (exportParams[key] === '') {\n                    delete exportParams[key];\n                }\n            });\n\n            let url = '';\n            let filename = '';\n            const statusSuffix = filters.status ? `_${filters.status}` : '_tous';\n            const dateSuffix = new Date().toISOString().split('T')[0];\n\n            switch (format) {\n                case 'pdf':\n                    url = secureApiEndpoints.needs.exportPdf(exportParams);\n                    filename = `besoins${statusSuffix}_${dateSuffix}.pdf`;\n                    break;\n                case 'excel':\n                    url = secureApiEndpoints.needs.exportExcel(exportParams);\n                    filename = `besoins${statusSuffix}_${dateSuffix}.xlsx`;\n                    break;\n                case 'word':\n                    url = secureApiEndpoints.needs.exportWord(exportParams);\n                    filename = `besoins${statusSuffix}_${dateSuffix}.docx`;\n                    break;\n                default:\n                    throw new Error('Format d\\'export non supporté');\n            }\n\n            // Créer un lien temporaire pour télécharger le fichier\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = filename;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n\n            setSuccess(`Export ${format.toUpperCase()} lancé avec succès`);\n        } catch (error) {\n            setError(extractErrorMessage(error));\n        } finally {\n            setProcessing(false);\n        }\n    };\n\n    return (\n        <Container fluid className=\"py-4\">\n            {/* Header */}\n            <Row className=\"mb-4\">\n                <Col>\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                        <div>\n                            <h2>Gestion des Besoins</h2>\n                            <p className=\"text-muted\">Gérez les demandes de besoins des utilisateurs</p>\n                        </div>\n                        <Button\n                            variant=\"outline-success\"\n                            onClick={testWhatsApp}\n                            disabled={processing}\n                        >\n                            <Whatsapp className=\"me-2\" />\n                            Tester WhatsApp\n                        </Button>\n                    </div>\n                </Col>\n            </Row>\n\n            {/* Alerts */}\n            {error && (\n                <Alert variant=\"danger\" dismissible onClose={() => setError('')}>\n                    {error}\n                </Alert>\n            )}\n            {success && (\n                <Alert variant=\"success\" dismissible onClose={() => setSuccess('')}>\n                    {success}\n                </Alert>\n            )}\n\n            {/* Statistics */}\n            {statistics.summary && (\n                <Row className=\"mb-4\">\n                    <Col md={3}>\n                        <Card className=\"bg-primary text-white\">\n                            <Card.Body>\n                                <div className=\"d-flex justify-content-between\">\n                                    <div>\n                                        <h5>Total</h5>\n                                        <h3>{statistics.summary.total}</h3>\n                                    </div>\n                                    <BarChart size={40} />\n                                </div>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                    <Col md={3}>\n                        <Card className=\"bg-warning text-white\">\n                            <Card.Body>\n                                <div className=\"d-flex justify-content-between\">\n                                    <div>\n                                        <h5>En attente</h5>\n                                        <h3>{statistics.summary.pending}</h3>\n                                        <small>{formatAmount(statistics.summary.total_amount_pending)}</small>\n                                    </div>\n                                    <Clock size={40} />\n                                </div>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                    <Col md={3}>\n                        <Card className=\"bg-success text-white\">\n                            <Card.Body>\n                                <div className=\"d-flex justify-content-between\">\n                                    <div>\n                                        <h5>Approuvés</h5>\n                                        <h3>{statistics.summary.approved}</h3>\n                                        <small>{formatAmount(statistics.summary.total_amount_approved)}</small>\n                                    </div>\n                                    <Check2Circle size={40} />\n                                </div>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                    <Col md={3}>\n                        <Card className=\"bg-danger text-white\">\n                            <Card.Body>\n                                <div className=\"d-flex justify-content-between\">\n                                    <div>\n                                        <h5>Rejetés</h5>\n                                        <h3>{statistics.summary.rejected}</h3>\n                                        <small>{formatAmount(statistics.summary.total_amount_rejected)}</small>\n                                    </div>\n                                    <XCircle size={40} />\n                                </div>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                </Row>\n            )}\n\n            {/* Filters */}\n            <Card className=\"mb-4\">\n                <Card.Body>\n                    <Row>\n                        <Col md={3}>\n                            <Form.Group>\n                                <Form.Label>Statut</Form.Label>\n                                <Form.Select\n                                    value={filters.status}\n                                    onChange={(e) => {\n                                        setFilters({ ...filters, status: e.target.value });\n                                        setCurrentPage(1);\n                                    }}\n                                >\n                                    <option value=\"\">Tous les statuts</option>\n                                    <option value=\"pending\">En attente</option>\n                                    <option value=\"approved\">Approuvé</option>\n                                    <option value=\"rejected\">Rejeté</option>\n                                </Form.Select>\n                            </Form.Group>\n                        </Col>\n                        <Col md={3}>\n                            <Form.Group>\n                                <Form.Label>Recherche</Form.Label>\n                                <Form.Control\n                                    type=\"text\"\n                                    placeholder=\"Nom ou description...\"\n                                    value={filters.search}\n                                    onChange={(e) => {\n                                        setFilters({ ...filters, search: e.target.value });\n                                        setCurrentPage(1);\n                                    }}\n                                />\n                            </Form.Group>\n                        </Col>\n                        <Col md={2}>\n                            <Form.Group>\n                                <Form.Label>Date de début</Form.Label>\n                                <Form.Control\n                                    type=\"date\"\n                                    value={filters.from_date}\n                                    onChange={(e) => {\n                                        setFilters({ ...filters, from_date: e.target.value });\n                                        setCurrentPage(1);\n                                    }}\n                                />\n                            </Form.Group>\n                        </Col>\n                        <Col md={2}>\n                            <Form.Group>\n                                <Form.Label>Date de fin</Form.Label>\n                                <Form.Control\n                                    type=\"date\"\n                                    value={filters.to_date}\n                                    onChange={(e) => {\n                                        setFilters({ ...filters, to_date: e.target.value });\n                                        setCurrentPage(1);\n                                    }}\n                                />\n                            </Form.Group>\n                        </Col>\n                        <Col md={2}>\n                            <Form.Group>\n                                <Form.Label className=\"fw-bold\">Actions d'Export</Form.Label>\n                                <div className=\"d-grid gap-2\">\n                                    <OverlayTrigger\n                                        placement=\"top\"\n                                        overlay={<Tooltip>Exporter la liste en PDF</Tooltip>}\n                                    >\n                                        <Button\n                                            variant=\"danger\"\n                                            size=\"md\"\n                                            onClick={() => exportNeeds('pdf')}\n                                            disabled={processing}\n                                            className=\"d-flex align-items-center justify-content-center py-2\"\n                                        >\n                                            <FiletypePdf size={18} className=\"me-2\" />\n                                            <strong>PDF</strong>\n                                        </Button>\n                                    </OverlayTrigger>\n                                    <OverlayTrigger\n                                        placement=\"top\"\n                                        overlay={<Tooltip>Exporter la liste en Excel</Tooltip>}\n                                    >\n                                        <Button\n                                            variant=\"success\"\n                                            size=\"md\"\n                                            onClick={() => exportNeeds('excel')}\n                                            disabled={processing}\n                                            className=\"d-flex align-items-center justify-content-center py-2\"\n                                        >\n                                            <FileEarmarkExcel size={18} className=\"me-2\" />\n                                            <strong>Excel</strong>\n                                        </Button>\n                                    </OverlayTrigger>\n                                    <OverlayTrigger\n                                        placement=\"top\"\n                                        overlay={<Tooltip>Exporter la liste en Word</Tooltip>}\n                                    >\n                                        <Button\n                                            variant=\"primary\"\n                                            size=\"md\"\n                                            onClick={() => exportNeeds('word')}\n                                            disabled={processing}\n                                            className=\"d-flex align-items-center justify-content-center py-2\"\n                                        >\n                                            <FiletypeDocx size={18} className=\"me-2\" />\n                                            <strong>Word</strong>\n                                        </Button>\n                                    </OverlayTrigger>\n                                </div>\n                            </Form.Group>\n                        </Col>\n                    </Row>\n                </Card.Body>\n            </Card>\n\n            {/* Table */}\n            <Card>\n                <Card.Header>\n                    <h5 className=\"mb-0\">Liste des besoins ({statistics.summary?.total || 0})</h5>\n                </Card.Header>\n                <Card.Body>\n                    {loading ? (\n                        <div className=\"text-center py-4\">\n                            <Spinner animation=\"border\" role=\"status\">\n                                <span className=\"visually-hidden\">Chargement...</span>\n                            </Spinner>\n                        </div>\n                    ) : needs.length === 0 ? (\n                        <div className=\"text-center py-4\">\n                            <FileText size={48} className=\"text-muted mb-3\" />\n                            <p className=\"text-muted\">Aucun besoin trouvé</p>\n                        </div>\n                    ) : (\n                        <>\n                            <Table responsive hover>\n                                <thead>\n                                    <tr>\n                                        <th>Demandeur</th>\n                                        <th>Besoin</th>\n                                        <th>Montant</th>\n                                        <th>Statut</th>\n                                        <th>Date</th>\n                                        <th>Actions</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {needs.map((need) => (\n                                        <tr key={need.id}>\n                                            <td>\n                                                <div>\n                                                    <Person className=\"me-1\" />\n                                                    <strong>{need.user.name}</strong>\n                                                    <div className=\"text-muted small\">\n                                                        {need.user.email}\n                                                    </div>\n                                                </div>\n                                            </td>\n                                            <td>\n                                                <div>\n                                                    <strong>{need.name}</strong>\n                                                    <div className=\"text-muted small\">\n                                                        {need.description.length > 80\n                                                            ? `${need.description.substring(0, 80)}...`\n                                                            : need.description\n                                                        }\n                                                    </div>\n                                                </div>\n                                            </td>\n                                            <td>\n                                                <strong className=\"text-primary\">\n                                                    {formatAmount(need.amount)}\n                                                </strong>\n                                            </td>\n                                            <td>{getStatusBadge(need.status)}</td>\n                                            <td>\n                                                <small className=\"text-muted\">\n                                                    {formatDate(need.created_at)}\n                                                </small>\n                                            </td>\n                                            <td>\n                                                <ButtonGroup size=\"sm\">\n                                                    <OverlayTrigger\n                                                        overlay={<Tooltip>Voir les détails</Tooltip>}\n                                                    >\n                                                        <Button\n                                                            variant=\"outline-primary\"\n                                                            onClick={() => showNeedDetails(need)}\n                                                        >\n                                                            <Eye size={14} />\n                                                        </Button>\n                                                    </OverlayTrigger>\n                                                    \n                                                    {need.status === 'pending' && (\n                                                        <>\n                                                            <OverlayTrigger\n                                                                overlay={<Tooltip>Approuver</Tooltip>}\n                                                            >\n                                                                <Button\n                                                                    variant=\"outline-success\"\n                                                                    onClick={() => approveNeed(need.id)}\n                                                                    disabled={processing}\n                                                                >\n                                                                    <Check2Circle size={14} />\n                                                                </Button>\n                                                            </OverlayTrigger>\n                                                            \n                                                            <OverlayTrigger\n                                                                overlay={<Tooltip>Rejeter</Tooltip>}\n                                                            >\n                                                                <Button\n                                                                    variant=\"outline-danger\"\n                                                                    onClick={() => handleReject(need)}\n                                                                    disabled={processing}\n                                                                >\n                                                                    <XCircle size={14} />\n                                                                </Button>\n                                                            </OverlayTrigger>\n                                                        </>\n                                                    )}\n                                                </ButtonGroup>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </Table>\n\n                            {/* Pagination */}\n                            {totalPages > 1 && (\n                                <div className=\"d-flex justify-content-center\">\n                                    <Pagination>\n                                        <Pagination.Prev\n                                            disabled={currentPage === 1}\n                                            onClick={() => setCurrentPage(currentPage - 1)}\n                                        />\n                                        {[...Array(totalPages)].map((_, index) => (\n                                            <Pagination.Item\n                                                key={index + 1}\n                                                active={index + 1 === currentPage}\n                                                onClick={() => setCurrentPage(index + 1)}\n                                            >\n                                                {index + 1}\n                                            </Pagination.Item>\n                                        ))}\n                                        <Pagination.Next\n                                            disabled={currentPage === totalPages}\n                                            onClick={() => setCurrentPage(currentPage + 1)}\n                                        />\n                                    </Pagination>\n                                </div>\n                            )}\n                        </>\n                    )}\n                </Card.Body>\n            </Card>\n\n            {/* Modal pour détails */}\n            <Modal\n                show={showModal}\n                onHide={() => setShowModal(false)}\n                size=\"lg\"\n            >\n                <Modal.Header closeButton>\n                    <Modal.Title>Détails du Besoin</Modal.Title>\n                </Modal.Header>\n                \n                <Modal.Body>\n                    {selectedNeed && (\n                        <div>\n                            <Row className=\"mb-3\">\n                                <Col md={6}>\n                                    <strong>Demandeur:</strong>\n                                    <p><Person className=\"me-1\" />{selectedNeed.user.name}</p>\n                                    <small className=\"text-muted\">{selectedNeed.user.email}</small>\n                                </Col>\n                                <Col md={6}>\n                                    <strong>Statut:</strong>\n                                    <p>{getStatusBadge(selectedNeed.status)}</p>\n                                </Col>\n                            </Row>\n                            \n                            <Row className=\"mb-3\">\n                                <Col md={6}>\n                                    <strong>Nom du besoin:</strong>\n                                    <p>{selectedNeed.name}</p>\n                                </Col>\n                                <Col md={6}>\n                                    <strong>Montant:</strong>\n                                    <p className=\"text-primary\">{formatAmount(selectedNeed.amount)}</p>\n                                </Col>\n                            </Row>\n                            \n                            <Row className=\"mb-3\">\n                                <Col>\n                                    <strong>Description:</strong>\n                                    <p>{selectedNeed.description}</p>\n                                </Col>\n                            </Row>\n                            \n                            <Row className=\"mb-3\">\n                                <Col md={6}>\n                                    <strong>Date de soumission:</strong>\n                                    <p><Calendar className=\"me-1\" />{formatDate(selectedNeed.created_at)}</p>\n                                </Col>\n                                {selectedNeed.approved_by && (\n                                    <Col md={6}>\n                                        <strong>Traité par:</strong>\n                                        <p><Person className=\"me-1\" />{selectedNeed.approved_by.name}</p>\n                                        <small className=\"text-muted\">\n                                            Le {formatDate(selectedNeed.approved_at)}\n                                        </small>\n                                    </Col>\n                                )}\n                            </Row>\n\n                            {selectedNeed.rejection_reason && (\n                                <div className=\"mb-3\">\n                                    <strong>Motif du rejet:</strong>\n                                    <div className=\"alert alert-danger\">\n                                        {selectedNeed.rejection_reason}\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                    )}\n                </Modal.Body>\n\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={() => setShowModal(false)}>\n                        Fermer\n                    </Button>\n                    {selectedNeed && selectedNeed.status === 'pending' && (\n                        <>\n                            <Button\n                                variant=\"success\"\n                                onClick={() => approveNeed(selectedNeed.id)}\n                                disabled={processing}\n                            >\n                                <Check2Circle className=\"me-2\" />\n                                Approuver\n                            </Button>\n                            <Button\n                                variant=\"danger\"\n                                onClick={() => handleReject(selectedNeed)}\n                                disabled={processing}\n                            >\n                                <XCircle className=\"me-2\" />\n                                Rejeter\n                            </Button>\n                        </>\n                    )}\n                </Modal.Footer>\n            </Modal>\n\n            {/* Modal pour rejet */}\n            <Modal\n                show={showRejectModal}\n                onHide={() => setShowRejectModal(false)}\n            >\n                <Modal.Header closeButton>\n                    <Modal.Title>Rejeter le Besoin</Modal.Title>\n                </Modal.Header>\n                \n                <Modal.Body>\n                    <Form.Group>\n                        <Form.Label>Motif du rejet *</Form.Label>\n                        <Form.Control\n                            as=\"textarea\"\n                            rows={4}\n                            placeholder=\"Expliquez pourquoi ce besoin ne peut pas être approuvé...\"\n                            value={rejectionReason}\n                            onChange={(e) => setRejectionReason(e.target.value)}\n                            required\n                        />\n                        <Form.Text className=\"text-muted\">\n                            Ce motif sera communiqué au demandeur via WhatsApp.\n                        </Form.Text>\n                    </Form.Group>\n                </Modal.Body>\n\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={() => setShowRejectModal(false)}>\n                        Annuler\n                    </Button>\n                    <Button\n                        variant=\"danger\"\n                        onClick={rejectNeed}\n                        disabled={processing || !rejectionReason.trim()}\n                    >\n                        {processing ? (\n                            <>\n                                <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />\n                                Rejet...\n                            </>\n                        ) : (\n                            <>\n                                <XCircle className=\"me-2\" />\n                                Confirmer le Rejet\n                            </>\n                        )}\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </Container>\n    );\n};\n\nexport default NeedsManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}