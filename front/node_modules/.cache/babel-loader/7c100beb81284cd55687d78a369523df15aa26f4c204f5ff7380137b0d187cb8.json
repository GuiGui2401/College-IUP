{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Plus,Minus,Settings,History,TrendingUp,TrendingDown,ArrowUpCircle,ArrowDownCircle,RefreshCw,Eye}from'lucide-react';import{host}from'../../../utils/fetch';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StockMovements=_ref=>{let{item,onMovementRecorded}=_ref;const[movements,setMovements]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');// Modal states\nconst[showMovementModal,setShowMovementModal]=useState(false);const[showHistoryModal,setShowHistoryModal]=useState(false);// Form data\nconst[movementData,setMovementData]=useState({type:'adjustment',new_quantity:(item===null||item===void 0?void 0:item.quantite)||0,reason:'',notes:''});const API_BASE=host+'/api';const apiCall=async function(url){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const token=localStorage.getItem('token');return fetch(`${API_BASE}${url}`,{...options,headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json',...options.headers}});};const loadMovements=async()=>{if(!(item!==null&&item!==void 0&&item.id))return;setLoading(true);setError('');try{const response=await apiCall(`/inventory/${item.id}/movements`);if(response.ok){const data=await response.json();if(data.success){setMovements(data.data||[]);}}else{throw new Error(`Erreur HTTP: ${response.status}`);}}catch(err){console.error('Erreur mouvements:',err);setError('Erreur lors du chargement des mouvements: '+err.message);}finally{setLoading(false);}};useEffect(()=>{if(item!==null&&item!==void 0&&item.id){loadMovements();}},[item===null||item===void 0?void 0:item.id]);const handleSubmitMovement=async e=>{e.preventDefault();setLoading(true);setError('');try{const response=await apiCall(`/inventory/${item.id}/movements`,{method:'POST',body:JSON.stringify(movementData)});if(response.ok){const result=await response.json();if(result.success){setSuccess('Mouvement enregistré avec succès !');setShowMovementModal(false);resetForm();await loadMovements();// Notifier le composant parent\nif(onMovementRecorded){onMovementRecorded(result.data.item);}}else{throw new Error(result.message||'Erreur lors de l\\'enregistrement');}}else{const errorData=await response.json();if(errorData.errors){const errorMessages=Object.values(errorData.errors).flat().join(', ');throw new Error(`Validation: ${errorMessages}`);}else{throw new Error(errorData.message||`Erreur HTTP: ${response.status}`);}}}catch(err){console.error('Erreur mouvement:',err);setError(err.message);}finally{setLoading(false);}};const resetForm=()=>{setMovementData({type:'adjustment',new_quantity:(item===null||item===void 0?void 0:item.quantite)||0,reason:'',notes:''});};const getMovementTypeIcon=type=>{switch(type){case'in':return/*#__PURE__*/_jsx(ArrowUpCircle,{className:\"text-success\",size:16});case'out':return/*#__PURE__*/_jsx(ArrowDownCircle,{className:\"text-danger\",size:16});case'adjustment':return/*#__PURE__*/_jsx(Settings,{className:\"text-warning\",size:16});default:return/*#__PURE__*/_jsx(RefreshCw,{className:\"text-secondary\",size:16});}};const getMovementTypeColor=type=>{switch(type){case'in':return'text-success';case'out':return'text-danger';case'adjustment':return'text-warning';default:return'text-secondary';}};const getMovementTypeLabel=type=>{switch(type){case'in':return'Entrée';case'out':return'Sortie';case'adjustment':return'Ajustement';default:return type;}};const getQuantityChangeDisplay=movement=>{const change=movement.quantity_change;if(change>0){return/*#__PURE__*/_jsxs(\"span\",{className:\"text-success\",children:[/*#__PURE__*/_jsx(TrendingUp,{size:14,className:\"me-1\"}),\"+\",change]});}else if(change<0){return/*#__PURE__*/_jsxs(\"span\",{className:\"text-danger\",children:[/*#__PURE__*/_jsx(TrendingDown,{size:14,className:\"me-1\"}),change]});}else{return/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(RefreshCw,{size:14,className:\"me-1\"}),\"0\"]});}};if(!item){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",children:/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"S\\xE9lectionnez un article pour voir ses mouvements de stock.\"})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-1\",children:[\"Gestion des stocks - \",/*#__PURE__*/_jsx(\"strong\",{children:item.nom})]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Stock actuel: \",item.quantite,\" unit\\xE9s\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group btn-group-sm\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary\",onClick:()=>{resetForm();setShowMovementModal(true);},children:[/*#__PURE__*/_jsx(Plus,{size:14,className:\"me-1\"}),\"Mouvement\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-info\",onClick:()=>setShowHistoryModal(true),children:[/*#__PURE__*/_jsx(History,{size:14,className:\"me-1\"}),\"Historique\"]})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger alert-dismissible fade show\",children:[error,/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setError('')})]}),success&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success alert-dismissible fade show\",children:[success,/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setSuccess('')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Mouvements r\\xE9cents\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-outline-secondary\",onClick:loadMovements,disabled:loading,children:[/*#__PURE__*/_jsx(RefreshCw,{size:14,className:\"me-1\"}),\"Actualiser\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border spinner-border-sm text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Chargement...\"})})}):movements.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"list-group list-group-flush\",children:movements.slice(0,5).map((movement,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"list-group-item px-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"me-2\",children:getMovementTypeIcon(movement.type)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw-medium\",children:[getMovementTypeLabel(movement.type),\" - \",movement.reason]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Par \",movement.user_name||'Système',\" le \",movement.formatted_movement_date||new Date(movement.movement_date).toLocaleDateString('fr-FR')]}),movement.notes&&/*#__PURE__*/_jsx(\"div\",{className:\"small text-muted mt-1\",children:/*#__PURE__*/_jsx(\"em\",{children:movement.notes})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold\",children:getQuantityChangeDisplay(movement)}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[movement.quantity_before,\" \\u2192 \",movement.quantity_after]})]})]})},movement.id||index))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-muted py-4\",children:[/*#__PURE__*/_jsx(History,{size:48,className:\"opacity-50 mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Aucun mouvement de stock enregistr\\xE9\"})]})})]}),showMovementModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal fade show\",style:{display:'block'},tabIndex:\"-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"Nouveau mouvement de stock\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>{setShowMovementModal(false);resetForm();}})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitMovement,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Article\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:item.nom,disabled:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-text\",children:[\"Stock actuel: \",item.quantite,\" unit\\xE9s\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Type de mouvement *\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:movementData.type,onChange:e=>setMovementData({...movementData,type:e.target.value}),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"adjustment\",children:\"Ajustement\"}),/*#__PURE__*/_jsx(\"option\",{value:\"in\",children:\"Entr\\xE9e en stock\"}),/*#__PURE__*/_jsx(\"option\",{value:\"out\",children:\"Sortie de stock\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Nouvelle quantit\\xE9 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:movementData.new_quantity,onChange:e=>setMovementData({...movementData,new_quantity:parseInt(e.target.value)||0}),min:\"0\",required:true}),movementData.new_quantity!==item.quantite&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-text\",children:[\"Changement: \",movementData.new_quantity-item.quantite>0?'+':'',movementData.new_quantity-item.quantite,\" unit\\xE9s\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Raison du mouvement *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:movementData.reason,onChange:e=>setMovementData({...movementData,reason:e.target.value}),placeholder:\"Ex: Achat, Vente, Inventaire physique...\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Notes (optionnel)\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",rows:\"3\",value:movementData.notes,onChange:e=>setMovementData({...movementData,notes:e.target.value}),placeholder:\"Notes additionnelles...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>{setShowMovementModal(false);resetForm();},children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'Enregistrement...':'Enregistrer'})]})]})]})})}),showHistoryModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal fade show\",style:{display:'block'},tabIndex:\"-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title\",children:[\"Historique complet - \",item.nom]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setShowHistoryModal(false)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:movements.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Changement\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Avant/Apr\\xE8s\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Raison\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Utilisateur\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:movements.map((movement,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"small\",children:movement.formatted_movement_date||new Date(movement.movement_date).toLocaleDateString('fr-FR')}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[getMovementTypeIcon(movement.type),/*#__PURE__*/_jsx(\"span\",{className:`ms-1 small ${getMovementTypeColor(movement.type)}`,children:getMovementTypeLabel(movement.type)})]})}),/*#__PURE__*/_jsx(\"td\",{children:getQuantityChangeDisplay(movement)}),/*#__PURE__*/_jsxs(\"td\",{className:\"small\",children:[movement.quantity_before,\" \\u2192 \",movement.quantity_after]}),/*#__PURE__*/_jsx(\"td\",{className:\"small\",children:movement.reason}),/*#__PURE__*/_jsx(\"td\",{className:\"small\",children:movement.user_name||'Système'})]},movement.id||index))})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-muted py-4\",children:[/*#__PURE__*/_jsx(History,{size:48,className:\"opacity-50 mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Aucun mouvement enregistr\\xE9\"})]})})]})})}),(showMovementModal||showHistoryModal)&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop fade show\"})]});};export default StockMovements;","map":{"version":3,"names":["React","useState","useEffect","Plus","Minus","Settings","History","TrendingUp","TrendingDown","ArrowUpCircle","ArrowDownCircle","RefreshCw","Eye","host","jsx","_jsx","jsxs","_jsxs","StockMovements","_ref","item","onMovementRecorded","movements","setMovements","loading","setLoading","error","setError","success","setSuccess","showMovementModal","setShowMovementModal","showHistoryModal","setShowHistoryModal","movementData","setMovementData","type","new_quantity","quantite","reason","notes","API_BASE","apiCall","url","options","arguments","length","undefined","token","localStorage","getItem","fetch","headers","loadMovements","id","response","ok","data","json","Error","status","err","console","message","handleSubmitMovement","e","preventDefault","method","body","JSON","stringify","result","resetForm","errorData","errors","errorMessages","Object","values","flat","join","getMovementTypeIcon","className","size","getMovementTypeColor","getMovementTypeLabel","getQuantityChangeDisplay","movement","change","quantity_change","children","nom","onClick","disabled","role","slice","map","index","user_name","formatted_movement_date","Date","movement_date","toLocaleDateString","quantity_before","quantity_after","style","display","tabIndex","onSubmit","value","onChange","target","required","parseInt","min","placeholder","rows"],"sources":["/var/www/College-IUP/front/src/pages/Inventory/components/StockMovements.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Plus, \n  Minus, \n  Settings, \n  History, \n  TrendingUp, \n  TrendingDown,\n  ArrowUpCircle,\n  ArrowDownCircle,\n  RefreshCw,\n  Eye\n} from 'lucide-react';\nimport { host } from '../../../utils/fetch';\n\nconst StockMovements = ({ item, onMovementRecorded }) => {\n  const [movements, setMovements] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  \n  // Modal states\n  const [showMovementModal, setShowMovementModal] = useState(false);\n  const [showHistoryModal, setShowHistoryModal] = useState(false);\n  \n  // Form data\n  const [movementData, setMovementData] = useState({\n    type: 'adjustment',\n    new_quantity: item?.quantite || 0,\n    reason: '',\n    notes: ''\n  });\n\n  const API_BASE = host+'/api';\n\n  const apiCall = async (url, options = {}) => {\n    const token = localStorage.getItem('token');\n    return fetch(`${API_BASE}${url}`, {\n      ...options,\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n        ...options.headers\n      }\n    });\n  };\n\n  const loadMovements = async () => {\n    if (!item?.id) return;\n    \n    setLoading(true);\n    setError('');\n    \n    try {\n      const response = await apiCall(`/inventory/${item.id}/movements`);\n      \n      if (response.ok) {\n        const data = await response.json();\n        if (data.success) {\n          setMovements(data.data || []);\n        }\n      } else {\n        throw new Error(`Erreur HTTP: ${response.status}`);\n      }\n    } catch (err) {\n      console.error('Erreur mouvements:', err);\n      setError('Erreur lors du chargement des mouvements: ' + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (item?.id) {\n      loadMovements();\n    }\n  }, [item?.id]);\n\n  const handleSubmitMovement = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    \n    try {\n      const response = await apiCall(`/inventory/${item.id}/movements`, {\n        method: 'POST',\n        body: JSON.stringify(movementData)\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        if (result.success) {\n          setSuccess('Mouvement enregistré avec succès !');\n          setShowMovementModal(false);\n          resetForm();\n          await loadMovements();\n          \n          // Notifier le composant parent\n          if (onMovementRecorded) {\n            onMovementRecorded(result.data.item);\n          }\n        } else {\n          throw new Error(result.message || 'Erreur lors de l\\'enregistrement');\n        }\n      } else {\n        const errorData = await response.json();\n        if (errorData.errors) {\n          const errorMessages = Object.values(errorData.errors).flat().join(', ');\n          throw new Error(`Validation: ${errorMessages}`);\n        } else {\n          throw new Error(errorData.message || `Erreur HTTP: ${response.status}`);\n        }\n      }\n    } catch (err) {\n      console.error('Erreur mouvement:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resetForm = () => {\n    setMovementData({\n      type: 'adjustment',\n      new_quantity: item?.quantite || 0,\n      reason: '',\n      notes: ''\n    });\n  };\n\n  const getMovementTypeIcon = (type) => {\n    switch (type) {\n      case 'in': return <ArrowUpCircle className=\"text-success\" size={16} />;\n      case 'out': return <ArrowDownCircle className=\"text-danger\" size={16} />;\n      case 'adjustment': return <Settings className=\"text-warning\" size={16} />;\n      default: return <RefreshCw className=\"text-secondary\" size={16} />;\n    }\n  };\n\n  const getMovementTypeColor = (type) => {\n    switch (type) {\n      case 'in': return 'text-success';\n      case 'out': return 'text-danger';\n      case 'adjustment': return 'text-warning';\n      default: return 'text-secondary';\n    }\n  };\n\n  const getMovementTypeLabel = (type) => {\n    switch (type) {\n      case 'in': return 'Entrée';\n      case 'out': return 'Sortie';\n      case 'adjustment': return 'Ajustement';\n      default: return type;\n    }\n  };\n\n  const getQuantityChangeDisplay = (movement) => {\n    const change = movement.quantity_change;\n    if (change > 0) {\n      return (\n        <span className=\"text-success\">\n          <TrendingUp size={14} className=\"me-1\" />\n          +{change}\n        </span>\n      );\n    } else if (change < 0) {\n      return (\n        <span className=\"text-danger\">\n          <TrendingDown size={14} className=\"me-1\" />\n          {change}\n        </span>\n      );\n    } else {\n      return (\n        <span className=\"text-muted\">\n          <RefreshCw size={14} className=\"me-1\" />\n          0\n        </span>\n      );\n    }\n  };\n\n  if (!item) {\n    return (\n      <div className=\"alert alert-info\">\n        <p className=\"mb-0\">Sélectionnez un article pour voir ses mouvements de stock.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Header avec actions */}\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\n        <div>\n          <h6 className=\"mb-1\">Gestion des stocks - <strong>{item.nom}</strong></h6>\n          <small className=\"text-muted\">Stock actuel: {item.quantite} unités</small>\n        </div>\n        <div className=\"btn-group btn-group-sm\">\n          <button \n            className=\"btn btn-outline-primary\"\n            onClick={() => {\n              resetForm();\n              setShowMovementModal(true);\n            }}\n          >\n            <Plus size={14} className=\"me-1\" />\n            Mouvement\n          </button>\n          <button \n            className=\"btn btn-outline-info\"\n            onClick={() => setShowHistoryModal(true)}\n          >\n            <History size={14} className=\"me-1\" />\n            Historique\n          </button>\n        </div>\n      </div>\n\n      {/* Alerts */}\n      {error && (\n        <div className=\"alert alert-danger alert-dismissible fade show\">\n          {error}\n          <button type=\"button\" className=\"btn-close\" onClick={() => setError('')}></button>\n        </div>\n      )}\n      \n      {success && (\n        <div className=\"alert alert-success alert-dismissible fade show\">\n          {success}\n          <button type=\"button\" className=\"btn-close\" onClick={() => setSuccess('')}></button>\n        </div>\n      )}\n\n      {/* Mouvements récents */}\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <h6 className=\"mb-0\">Mouvements récents</h6>\n            <button \n              className=\"btn btn-sm btn-outline-secondary\"\n              onClick={loadMovements}\n              disabled={loading}\n            >\n              <RefreshCw size={14} className=\"me-1\" />\n              Actualiser\n            </button>\n          </div>\n        </div>\n        <div className=\"card-body\">\n          {loading ? (\n            <div className=\"text-center py-3\">\n              <div className=\"spinner-border spinner-border-sm text-primary\" role=\"status\">\n                <span className=\"visually-hidden\">Chargement...</span>\n              </div>\n            </div>\n          ) : movements.length > 0 ? (\n            <div className=\"list-group list-group-flush\">\n              {movements.slice(0, 5).map((movement, index) => (\n                <div key={movement.id || index} className=\"list-group-item px-0\">\n                  <div className=\"d-flex justify-content-between align-items-start\">\n                    <div className=\"d-flex align-items-start\">\n                      <div className=\"me-2\">\n                        {getMovementTypeIcon(movement.type)}\n                      </div>\n                      <div>\n                        <div className=\"fw-medium\">\n                          {getMovementTypeLabel(movement.type)} - {movement.reason}\n                        </div>\n                        <small className=\"text-muted\">\n                          Par {movement.user_name || 'Système'} le {movement.formatted_movement_date || new Date(movement.movement_date).toLocaleDateString('fr-FR')}\n                        </small>\n                        {movement.notes && (\n                          <div className=\"small text-muted mt-1\">\n                            <em>{movement.notes}</em>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"text-end\">\n                      <div className=\"fw-bold\">\n                        {getQuantityChangeDisplay(movement)}\n                      </div>\n                      <small className=\"text-muted\">\n                        {movement.quantity_before} → {movement.quantity_after}\n                      </small>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center text-muted py-4\">\n              <History size={48} className=\"opacity-50 mb-2\" />\n              <p className=\"mb-0\">Aucun mouvement de stock enregistré</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Modal Nouveau Mouvement */}\n      {showMovementModal && (\n        <div className=\"modal fade show\" style={{display: 'block'}} tabIndex=\"-1\">\n          <div className=\"modal-dialog\">\n            <div className=\"modal-content\">\n              <div className=\"modal-header\">\n                <h5 className=\"modal-title\">Nouveau mouvement de stock</h5>\n                <button \n                  type=\"button\" \n                  className=\"btn-close\" \n                  onClick={() => {\n                    setShowMovementModal(false);\n                    resetForm();\n                  }}\n                ></button>\n              </div>\n              <form onSubmit={handleSubmitMovement}>\n                <div className=\"modal-body\">\n                  <div className=\"mb-3\">\n                    <label className=\"form-label\">Article</label>\n                    <input \n                      type=\"text\" \n                      className=\"form-control\" \n                      value={item.nom}\n                      disabled \n                    />\n                    <div className=\"form-text\">Stock actuel: {item.quantite} unités</div>\n                  </div>\n\n                  <div className=\"mb-3\">\n                    <label className=\"form-label\">Type de mouvement *</label>\n                    <select\n                      className=\"form-select\"\n                      value={movementData.type}\n                      onChange={(e) => setMovementData({...movementData, type: e.target.value})}\n                      required\n                    >\n                      <option value=\"adjustment\">Ajustement</option>\n                      <option value=\"in\">Entrée en stock</option>\n                      <option value=\"out\">Sortie de stock</option>\n                    </select>\n                  </div>\n\n                  <div className=\"mb-3\">\n                    <label className=\"form-label\">Nouvelle quantité *</label>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      value={movementData.new_quantity}\n                      onChange={(e) => setMovementData({...movementData, new_quantity: parseInt(e.target.value) || 0})}\n                      min=\"0\"\n                      required\n                    />\n                    {movementData.new_quantity !== item.quantite && (\n                      <div className=\"form-text\">\n                        Changement: {movementData.new_quantity - item.quantite > 0 ? '+' : ''}{movementData.new_quantity - item.quantite} unités\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"mb-3\">\n                    <label className=\"form-label\">Raison du mouvement *</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      value={movementData.reason}\n                      onChange={(e) => setMovementData({...movementData, reason: e.target.value})}\n                      placeholder=\"Ex: Achat, Vente, Inventaire physique...\"\n                      required\n                    />\n                  </div>\n\n                  <div className=\"mb-3\">\n                    <label className=\"form-label\">Notes (optionnel)</label>\n                    <textarea\n                      className=\"form-control\"\n                      rows=\"3\"\n                      value={movementData.notes}\n                      onChange={(e) => setMovementData({...movementData, notes: e.target.value})}\n                      placeholder=\"Notes additionnelles...\"\n                    ></textarea>\n                  </div>\n                </div>\n                <div className=\"modal-footer\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary\"\n                    onClick={() => {\n                      setShowMovementModal(false);\n                      resetForm();\n                    }}\n                  >\n                    Annuler\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"btn btn-primary\"\n                    disabled={loading}\n                  >\n                    {loading ? 'Enregistrement...' : 'Enregistrer'}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modal Historique complet */}\n      {showHistoryModal && (\n        <div className=\"modal fade show\" style={{display: 'block'}} tabIndex=\"-1\">\n          <div className=\"modal-dialog modal-lg\">\n            <div className=\"modal-content\">\n              <div className=\"modal-header\">\n                <h5 className=\"modal-title\">Historique complet - {item.nom}</h5>\n                <button \n                  type=\"button\" \n                  className=\"btn-close\" \n                  onClick={() => setShowHistoryModal(false)}\n                ></button>\n              </div>\n              <div className=\"modal-body\">\n                {movements.length > 0 ? (\n                  <div className=\"table-responsive\">\n                    <table className=\"table table-sm\">\n                      <thead>\n                        <tr>\n                          <th>Date</th>\n                          <th>Type</th>\n                          <th>Changement</th>\n                          <th>Avant/Après</th>\n                          <th>Raison</th>\n                          <th>Utilisateur</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {movements.map((movement, index) => (\n                          <tr key={movement.id || index}>\n                            <td className=\"small\">\n                              {movement.formatted_movement_date || new Date(movement.movement_date).toLocaleDateString('fr-FR')}\n                            </td>\n                            <td>\n                              <div className=\"d-flex align-items-center\">\n                                {getMovementTypeIcon(movement.type)}\n                                <span className={`ms-1 small ${getMovementTypeColor(movement.type)}`}>\n                                  {getMovementTypeLabel(movement.type)}\n                                </span>\n                              </div>\n                            </td>\n                            <td>{getQuantityChangeDisplay(movement)}</td>\n                            <td className=\"small\">\n                              {movement.quantity_before} → {movement.quantity_after}\n                            </td>\n                            <td className=\"small\">{movement.reason}</td>\n                            <td className=\"small\">{movement.user_name || 'Système'}</td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                ) : (\n                  <div className=\"text-center text-muted py-4\">\n                    <History size={48} className=\"opacity-50 mb-2\" />\n                    <p className=\"mb-0\">Aucun mouvement enregistré</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Background overlay pour les modals */}\n      {(showMovementModal || showHistoryModal) && (\n        <div className=\"modal-backdrop fade show\"></div>\n      )}\n    </div>\n  );\n};\n\nexport default StockMovements;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}