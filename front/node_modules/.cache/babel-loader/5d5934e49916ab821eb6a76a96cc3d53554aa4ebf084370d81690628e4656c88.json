{"ast":null,"code":"/**\n * Gestion des présences du personnel pour les secrétaires\n * Affichage de la liste du personnel avec leurs présences sur une période donnée\n */import React,{useState,useEffect}from'react';import{Card,Container,Row,Col,Table,Badge,Button,Form,Spinner,Alert,ProgressBar,Modal,ButtonGroup,Dropdown,InputGroup}from'react-bootstrap';import{People,Calendar,Clock,PersonCheck,PersonX,Download,Filter,Search,Eye,BarChart,PersonWorkspace,ShieldCheck,Gear,FileEarmarkText,CheckCircle,XCircle,ExclamationTriangle,InfoCircle,Printer}from'react-bootstrap-icons';import{useAuth}from'../../hooks/useAuth';import{useSchool}from'../../contexts/SchoolContext';import{secureApiEndpoints}from'../../utils/apiMigration';import DatePicker from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StaffAttendanceManagement=()=>{const[staffList,setStaffList]=useState([]);const[attendanceData,setAttendanceData]=useState([]);const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');const[messageType,setMessageType]=useState('info');const[selectedStaff,setSelectedStaff]=useState(null);const[showDetailModal,setShowDetailModal]=useState(false);const[staffDetails,setStaffDetails]=useState(null);// Filtres\nconst[startDate,setStartDate]=useState(new Date(new Date().getFullYear(),new Date().getMonth(),1));const[endDate,setEndDate]=useState(new Date());const[selectedStaffType,setSelectedStaffType]=useState('');const[searchTerm,setSearchTerm]=useState('');const{user}=useAuth();const{schoolSettings,getLogoUrl}=useSchool();// Types de personnel avec leurs configurations\nconst staffTypes={teacher:{label:'Enseignants',icon:PersonWorkspace,color:'primary',bgColor:'#0d6efd'},accountant:{label:'Comptables',icon:PersonCheck,color:'success',bgColor:'#198754'},supervisor:{label:'Surveillants',icon:ShieldCheck,color:'warning',bgColor:'#ffc107'},admin:{label:'Administrateurs',icon:Gear,color:'danger',bgColor:'#dc3545'},secretaire:{label:'Secrétaires',icon:FileEarmarkText,color:'info',bgColor:'#0dcaf0'}};useEffect(()=>{loadStaffList();},[]);useEffect(()=>{if(staffList.length>0){loadAttendanceData();}},[startDate,endDate,selectedStaffType,staffList]);const loadStaffList=async()=>{try{setLoading(true);const response=await secureApiEndpoints.staff.getStaffWithQR();if(response.success){setStaffList(response.data||[]);}else{setMessage('Erreur lors du chargement du personnel');setMessageType('danger');}}catch(error){console.error('Error loading staff:',error);setMessage('Erreur lors du chargement du personnel');setMessageType('danger');}finally{setLoading(false);}};const loadAttendanceData=async()=>{try{setLoading(true);// Charger les données de présence pour chaque membre du personnel\nconst attendancePromises=staffList.map(async staff=>{try{const response=await secureApiEndpoints.staff.getStaffReport(staff.id,{start_date:startDate.toISOString().split('T')[0],end_date:endDate.toISOString().split('T')[0]});if(response.success){return{...staff,stats:response.data.stats,attendances:response.data.attendances||[]};}return{...staff,stats:{attendance_rate:0,present_days:0,absent_days:0,late_days:0,total_work_hours:0},attendances:[]};}catch(error){console.error(`Error loading attendance for staff ${staff.id}:`,error);return{...staff,stats:{attendance_rate:0,present_days:0,absent_days:0,late_days:0,total_work_hours:0},attendances:[]};}});const results=await Promise.all(attendancePromises);setAttendanceData(results);}catch(error){console.error('Error loading attendance data:',error);setMessage('Erreur lors du chargement des données de présence');setMessageType('danger');}finally{setLoading(false);}};const handleViewDetails=async staff=>{setSelectedStaff(staff);setStaffDetails(staff);setShowDetailModal(true);};const getStaffTypeConfig=staffType=>{return staffTypes[staffType]||{label:staffType,color:'secondary',bgColor:'#6c757d',icon:People};};const getStaffTypeBadge=staffType=>{const config=getStaffTypeConfig(staffType);const IconComponent=config.icon;return/*#__PURE__*/_jsxs(Badge,{bg:config.color,className:\"d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(IconComponent,{size:12}),config.label]});};const getAttendanceRateColor=rate=>{if(rate>=90)return'success';if(rate>=75)return'warning';return'danger';};const getAttendanceIcon=rate=>{if(rate>=90)return/*#__PURE__*/_jsx(CheckCircle,{className:\"text-success\"});if(rate>=75)return/*#__PURE__*/_jsx(ExclamationTriangle,{className:\"text-warning\"});return/*#__PURE__*/_jsx(XCircle,{className:\"text-danger\"});};const filteredAttendanceData=attendanceData.filter(staff=>{const matchesType=!selectedStaffType||staff.staff_type===selectedStaffType;const matchesSearch=!searchTerm||staff.name.toLowerCase().includes(searchTerm.toLowerCase())||staff.email.toLowerCase().includes(searchTerm.toLowerCase());return matchesType&&matchesSearch;});const formatDate=date=>{return date.toLocaleDateString('fr-FR',{day:'2-digit',month:'2-digit',year:'numeric'});};const convertImageToBase64=url=>{return new Promise((resolve,reject)=>{// Créer un timeout pour éviter les blocages\nconst timeout=setTimeout(()=>{reject(new Error('Timeout lors du chargement de l\\'image'));},5000);const img=new Image();// Tenter d'abord sans CORS pour les images locales\nimg.onload=()=>{clearTimeout(timeout);try{const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');// Redimensionner à une taille optimale pour l'impression\nconst maxSize=150;let{width,height}=img;if(width>height){if(width>maxSize){height=height*maxSize/width;width=maxSize;}}else{if(height>maxSize){width=width*maxSize/height;height=maxSize;}}canvas.width=width;canvas.height=height;ctx.drawImage(img,0,0,width,height);const dataURL=canvas.toDataURL('image/png',0.9);resolve(dataURL);}catch(error){console.error('Erreur lors de la conversion canvas:',error);reject(error);}};img.onerror=()=>{clearTimeout(timeout);console.warn('Échec du chargement de l\\'image:',url);reject(new Error('Impossible de charger l\\'image'));};// Charger l'image\nimg.src=url;});};const createDefaultLogo=()=>{// Créer un logo SVG par défaut plus visible encodé en base64\nconst svgLogo=`\n            <svg width=\"60\" height=\"60\" viewBox=\"0 0 60 60\" xmlns=\"http://www.w3.org/2000/svg\">\n                <defs>\n                    <linearGradient id=\"grad1\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                        <stop offset=\"0%\" style=\"stop-color:#0d6efd;stop-opacity:1\" />\n                        <stop offset=\"100%\" style=\"stop-color:#0a58ca;stop-opacity:1\" />\n                    </linearGradient>\n                </defs>\n                <rect width=\"60\" height=\"60\" fill=\"url(#grad1)\" rx=\"12\"/>\n                <circle cx=\"30\" cy=\"18\" r=\"9\" fill=\"white\" stroke=\"#0d6efd\" stroke-width=\"1\"/>\n                <path d=\"M12 48 C12 38, 18 32, 30 32 C42 32, 48 38, 48 48 L48 58 L12 58 Z\" fill=\"white\"/>\n                <rect x=\"10\" y=\"40\" width=\"40\" height=\"3\" fill=\"#0d6efd\"/>\n                <text x=\"30\" y=\"52\" font-family=\"Arial, sans-serif\" font-size=\"6\" fill=\"#0d6efd\" text-anchor=\"middle\" font-weight=\"bold\">ÉCOLE</text>\n                <text x=\"30\" y=\"57\" font-family=\"Arial, sans-serif\" font-size=\"5\" fill=\"#0d6efd\" text-anchor=\"middle\">CPBD</text>\n            </svg>\n        `;return'data:image/svg+xml;base64,'+btoa(unescape(encodeURIComponent(svgLogo)));};const exportToCSV=()=>{if(filteredAttendanceData.length===0)return;const csvHeaders=['Nom','Email','Type','Taux de présence (%)','Jours présents','Jours absents','Retards','Heures travaillées'];const csvData=filteredAttendanceData.map(staff=>[staff.name,staff.email,getStaffTypeConfig(staff.staff_type).label,staff.stats.attendance_rate,staff.stats.present_days,staff.stats.absent_days,staff.stats.late_days,staff.stats.total_work_hours]);const csvContent=[csvHeaders,...csvData].map(row=>row.map(cell=>`\"${cell}\"`).join(',')).join('\\n');const blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const link=document.createElement('a');const url=URL.createObjectURL(blob);link.setAttribute('href',url);link.setAttribute('download',`presences_personnel_${formatDate(startDate)}_${formatDate(endDate)}.csv`);link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);};const handlePrint=async()=>{try{const printContent=await generatePrintContent();const printWindow=window.open('','_blank');printWindow.document.write(printContent);printWindow.document.close();printWindow.print();}catch(error){console.error('Erreur lors de la génération du rapport:',error);}};const generatePrintContent=async()=>{const currentDate=new Date().toLocaleDateString('fr-FR');const periodText=`Du ${formatDate(startDate)} au ${formatDate(endDate)}`;const schoolName=(schoolSettings===null||schoolSettings===void 0?void 0:schoolSettings.school_name)||'COLLÈGE POLYVALENT BILINGUE DE DOUALA';// Récupérer le logo en base64 comme le fait le backend\nlet logoBase64='';if(schoolSettings!==null&&schoolSettings!==void 0&&schoolSettings.school_logo){try{// Utiliser l'URL complète du logo\nconst logoUrl=getLogoUrl();if(logoUrl){logoBase64=await convertImageToBase64(logoUrl);}}catch(error){console.warn('Impossible de convertir le logo:',error);logoBase64=createDefaultLogo();}}else{logoBase64=createDefaultLogo();}let tableRows='';filteredAttendanceData.forEach((staff,index)=>{const config=getStaffTypeConfig(staff.staff_type);tableRows+=`\n                <tr style=\"border-bottom: 1px solid #ddd;\">\n                    <td style=\"padding: 8px; text-align: center;\">${index+1}</td>\n                    <td style=\"padding: 8px;\">\n                        <strong>${staff.name}</strong><br>\n                        <small style=\"color: #666;\">${staff.email||'N/A'}</small>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center;\">\n                        <span style=\"background: ${config.bgColor}; color: white; padding: 2px 6px; border-radius: 3px; font-size: 11px;\">\n                            ${config.label}\n                        </span>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center;\">\n                        <strong style=\"color: ${staff.stats.attendance_rate>=90?'#198754':staff.stats.attendance_rate>=75?'#ffc107':'#dc3545'};\">\n                            ${staff.stats.attendance_rate.toFixed(1)}%\n                        </strong>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center; color: #198754;\">\n                        <strong>${staff.stats.present_days}</strong>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center; color: ${staff.stats.absent_days>0?'#dc3545':'#198754'};\">\n                        <strong>${staff.stats.absent_days}</strong>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center; color: ${staff.stats.late_days>0?'#ffc107':'#198754'};\">\n                        <strong>${staff.stats.late_days}</strong>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center;\">\n                        <strong>${staff.stats.total_work_hours.toFixed(1)}h</strong>\n                    </td>\n                </tr>\n            `;});return`\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <meta charset=\"UTF-8\">\n                <title>Rapport Présences Personnel</title>\n                <style>\n                    @media print {\n                        @page {\n                            margin: 0.5in;\n                            size: A4 landscape;\n                        }\n                        body {\n                            font-family: 'Arial', 'Helvetica', sans-serif;\n                            font-size: 12px;\n                            line-height: 1.3;\n                        }\n                        .no-print {\n                            display: none !important;\n                        }\n                    }\n                    body {\n                        font-family: 'Arial', 'Helvetica', sans-serif;\n                        margin: 0;\n                        padding: 20px;\n                        font-size: 12px;\n                        line-height: 1.3;\n                    }\n                    .header {\n                        text-align: center;\n                        margin-bottom: 30px;\n                        border-bottom: 2px solid #333;\n                        padding-bottom: 15px;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        gap: 15px;\n                    }\n                    .logo-section {\n                        flex-shrink: 0;\n                    }\n                    .logo {\n                        width: 60px;\n                        height: 60px;\n                        object-fit: contain;\n                        border: 2px solid #ddd;\n                        border-radius: 8px;\n                        background: #f8f9fa;\n                    }\n                    .logo-fallback {\n                        width: 60px;\n                        height: 60px;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        background: linear-gradient(135deg, #0d6efd, #0a58ca);\n                        color: white;\n                        font-weight: bold;\n                        font-size: 12px;\n                        border-radius: 8px;\n                        text-align: center;\n                        line-height: 1.2;\n                    }\n                    .title-section {\n                        flex: 1;\n                    }\n                    .header h1 {\n                        margin: 0;\n                        color: #333;\n                        font-size: 20px;\n                        font-weight: bold;\n                    }\n                    .header h2 {\n                        margin: 5px 0;\n                        color: #666;\n                        font-size: 16px;\n                        font-weight: normal;\n                    }\n                    .meta-info {\n                        display: flex;\n                        justify-content: space-between;\n                        margin-bottom: 20px;\n                        font-size: 11px;\n                        color: #666;\n                    }\n                    .stats-summary {\n                        display: flex;\n                        justify-content: space-around;\n                        margin-bottom: 20px;\n                        text-align: center;\n                    }\n                    .stats-card {\n                        flex: 1;\n                        margin: 0 5px;\n                        padding: 10px;\n                        border: 1px solid #ddd;\n                        border-radius: 5px;\n                    }\n                    .stats-card h3 {\n                        margin: 0;\n                        font-size: 18px;\n                        color: #333;\n                    }\n                    .stats-card p {\n                        margin: 5px 0 0 0;\n                        font-size: 10px;\n                        color: #666;\n                        text-transform: uppercase;\n                    }\n                    table {\n                        width: 100%;\n                        border-collapse: collapse;\n                        margin-top: 20px;\n                        font-size: 11px;\n                    }\n                    th {\n                        background-color: #f8f9fa;\n                        border: 1px solid #ddd;\n                        padding: 10px 8px;\n                        text-align: center;\n                        font-weight: bold;\n                        color: #333;\n                    }\n                    td {\n                        border: 1px solid #ddd;\n                        vertical-align: middle;\n                    }\n                    tr:nth-child(even) {\n                        background-color: #f9f9f9;\n                    }\n                    .footer {\n                        margin-top: 30px;\n                        padding-top: 15px;\n                        border-top: 1px solid #ddd;\n                        font-size: 10px;\n                        color: #666;\n                        text-align: center;\n                    }\n                </style>\n            </head>\n            <body>\n                <div class=\"header\">\n                    <div class=\"logo-section\">\n                        <img src=\"${logoBase64}\" alt=\"Logo École\" class=\"logo\">\n                    </div>\n                    <div class=\"title-section\">\n                        <h1>${schoolName.toUpperCase()}</h1>\n                        <h2>Rapport des Présences du Personnel</h2>\n                    </div>\n                </div>\n\n                <div class=\"meta-info\">\n                    <div><strong>Période:</strong> ${periodText}</div>\n                    <div><strong>Généré le:</strong> ${currentDate}</div>\n                    <div><strong>Total personnel:</strong> ${filteredAttendanceData.length}</div>\n                </div>\n\n                <div class=\"stats-summary\">\n                    <div class=\"stats-card\">\n                        <h3 style=\"color: #198754;\">${filteredAttendanceData.filter(s=>s.stats.attendance_rate>=90).length}</h3>\n                        <p>Excellente présence (≥90%)</p>\n                    </div>\n                    <div class=\"stats-card\">\n                        <h3 style=\"color: #ffc107;\">${filteredAttendanceData.filter(s=>s.stats.attendance_rate>=75&&s.stats.attendance_rate<90).length}</h3>\n                        <p>Présence correcte (75-89%)</p>\n                    </div>\n                    <div class=\"stats-card\">\n                        <h3 style=\"color: #dc3545;\">${filteredAttendanceData.filter(s=>s.stats.attendance_rate<75).length}</h3>\n                        <p>Présence insuffisante (&lt;75%)</p>\n                    </div>\n                    <div class=\"stats-card\">\n                        <h3 style=\"color: #0dcaf0;\">${filteredAttendanceData.reduce((sum,s)=>sum+s.stats.total_work_hours,0).toFixed(1)}h</h3>\n                        <p>Total heures travaillées</p>\n                    </div>\n                </div>\n\n                <table>\n                    <thead>\n                        <tr>\n                            <th style=\"width: 5%;\">#</th>\n                            <th style=\"width: 25%;\">Personnel</th>\n                            <th style=\"width: 15%;\">Type</th>\n                            <th style=\"width: 12%;\">Taux présence</th>\n                            <th style=\"width: 10%;\">Présents</th>\n                            <th style=\"width: 10%;\">Absences</th>\n                            <th style=\"width: 10%;\">Retards</th>\n                            <th style=\"width: 13%;\">Heures travaillées</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${tableRows}\n                    </tbody>\n                </table>\n\n                <div class=\"footer\">\n                    <p>Rapport généré automatiquement le ${currentDate} à ${new Date().toLocaleTimeString('fr-FR')}</p>\n                    <p>Ce document contient des informations confidentielles - Usage interne uniquement</p>\n                </div>\n            </body>\n            </html>\n        `;};return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"py-4\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(People,{size:32,className:\"text-primary\"}),\"Pr\\xE9sences du Personnel\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Suivi des pr\\xE9sences du personnel sur une p\\xE9riode donn\\xE9e\"})]})}),message&&/*#__PURE__*/_jsxs(Alert,{variant:messageType,className:\"mb-4\",onClose:()=>setMessage(''),dismissible:true,children:[messageType==='danger'&&/*#__PURE__*/_jsx(ExclamationTriangle,{className:\"me-2\"}),messageType==='success'&&/*#__PURE__*/_jsx(CheckCircle,{className:\"me-2\"}),messageType==='info'&&/*#__PURE__*/_jsx(InfoCircle,{className:\"me-2\"}),message]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(Filter,{className:\"me-2\"}),\"Filtres et Contr\\xF4les\"]})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date de d\\xE9but\"}),/*#__PURE__*/_jsx(DatePicker,{selected:startDate,onChange:setStartDate,dateFormat:\"dd/MM/yyyy\",className:\"form-control\",placeholderText:\"S\\xE9lectionner une date\"})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date de fin\"}),/*#__PURE__*/_jsx(DatePicker,{selected:endDate,onChange:setEndDate,dateFormat:\"dd/MM/yyyy\",className:\"form-control\",placeholderText:\"S\\xE9lectionner une date\"})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Type de personnel\"}),/*#__PURE__*/_jsxs(Form.Select,{value:selectedStaffType,onChange:e=>setSelectedStaffType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Tous les types\"}),Object.entries(staffTypes).map(_ref=>{let[key,config]=_ref;return/*#__PURE__*/_jsx(\"option\",{value:key,children:config.label},key);})]})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Rechercher\"}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputGroup.Text,{children:/*#__PURE__*/_jsx(Search,{size:14})}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Nom ou email...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]})]})})]}),/*#__PURE__*/_jsx(Row,{className:\"mt-3\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(ButtonGroup,{children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",onClick:loadAttendanceData,disabled:loading,children:[loading?/*#__PURE__*/_jsx(Spinner,{size:\"sm\",className:\"me-2\"}):/*#__PURE__*/_jsx(BarChart,{className:\"me-2\"}),\"Actualiser\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-success\",onClick:exportToCSV,disabled:filteredAttendanceData.length===0,children:[/*#__PURE__*/_jsx(Download,{className:\"me-2\"}),\"Exporter CSV\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-info\",onClick:handlePrint,disabled:filteredAttendanceData.length===0,children:[/*#__PURE__*/_jsx(Printer,{className:\"me-2\"}),\"Imprimer\"]})]})})})]})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-primary\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-primary\",children:filteredAttendanceData.length}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Personnel total\"})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-success\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-success\",children:filteredAttendanceData.filter(s=>s.stats.attendance_rate>=90).length}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Pr\\xE9sence excellente (\\u226590%)\"})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-warning\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-warning\",children:filteredAttendanceData.filter(s=>s.stats.attendance_rate>=75&&s.stats.attendance_rate<90).length}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Pr\\xE9sence correcte (75-89%)\"})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-danger\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger\",children:filteredAttendanceData.filter(s=>s.stats.attendance_rate<75).length}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Pr\\xE9sence insuffisante (<75%)\"})]})})})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"me-2\"}),\"Pr\\xE9sences du \",formatDate(startDate),\" au \",formatDate(endDate)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsxs(Badge,{bg:\"info\",children:[filteredAttendanceData.length,\" personnel(s)\"]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",onClick:handlePrint,disabled:filteredAttendanceData.length===0,title:\"Imprimer le rapport\",children:/*#__PURE__*/_jsx(Printer,{size:14})})]})]}),/*#__PURE__*/_jsx(Card.Body,{children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"Chargement des donn\\xE9es...\"})]}):filteredAttendanceData.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4 text-muted\",children:[/*#__PURE__*/_jsx(PersonX,{size:48,className:\"mb-3\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Aucun personnel trouv\\xE9 avec ces crit\\xE8res\"})]}):/*#__PURE__*/_jsxs(Table,{responsive:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Personnel\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Taux de pr\\xE9sence\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Jours pr\\xE9sents\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Absences\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Retards\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Heures travaill\\xE9es\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredAttendanceData.map(staff=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[getAttendanceIcon(staff.stats.attendance_rate),/*#__PURE__*/_jsxs(\"div\",{className:\"ms-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold\",children:staff.name}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:staff.email})]})]})}),/*#__PURE__*/_jsx(\"td\",{children:getStaffTypeBadge(staff.staff_type)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(ProgressBar,{now:staff.stats.attendance_rate,variant:getAttendanceRateColor(staff.stats.attendance_rate),style:{width:'60px',height:'8px'},className:\"me-2\"}),/*#__PURE__*/_jsxs(Badge,{bg:getAttendanceRateColor(staff.stats.attendance_rate),children:[staff.stats.attendance_rate.toFixed(1),\"%\"]})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Badge,{bg:\"success\",className:\"d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(PersonCheck,{size:12}),staff.stats.present_days]})}),/*#__PURE__*/_jsx(\"td\",{children:staff.stats.absent_days>0?/*#__PURE__*/_jsxs(Badge,{bg:\"danger\",className:\"d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(PersonX,{size:12}),staff.stats.absent_days]}):/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"0\"})}),/*#__PURE__*/_jsx(\"td\",{children:staff.stats.late_days>0?/*#__PURE__*/_jsxs(Badge,{bg:\"warning\",className:\"d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Clock,{size:12}),staff.stats.late_days]}):/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"0\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Badge,{bg:\"info\",className:\"d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Clock,{size:12}),staff.stats.total_work_hours.toFixed(1),\"h\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",size:\"sm\",onClick:()=>handleViewDetails(staff),children:[/*#__PURE__*/_jsx(Eye,{size:12,className:\"me-1\"}),\"D\\xE9tails\"]})})]},staff.id))})]})})]}),/*#__PURE__*/_jsxs(Modal,{show:showDetailModal,onHide:()=>setShowDetailModal(false),size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[/*#__PURE__*/_jsx(People,{className:\"me-2\"}),\"D\\xE9tails des pr\\xE9sences - \",selectedStaff===null||selectedStaff===void 0?void 0:selectedStaff.name]})}),/*#__PURE__*/_jsx(Modal.Body,{children:staffDetails&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Informations g\\xE9n\\xE9rales\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nom:\"}),\" \",staffDetails.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",staffDetails.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type:\"}),\" \",getStaffTypeBadge(staffDetails.staff_type)]})]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Statistiques de la p\\xE9riode\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Taux de pr\\xE9sence:\"}),\" \",staffDetails.stats.attendance_rate.toFixed(1),\"%\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Jours pr\\xE9sents:\"}),\" \",staffDetails.stats.present_days]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Jours absents:\"}),\" \",staffDetails.stats.absent_days]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Retards:\"}),\" \",staffDetails.stats.late_days]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Heures travaill\\xE9es:\"}),\" \",staffDetails.stats.total_work_hours.toFixed(1),\"h\"]})]})]}),/*#__PURE__*/_jsx(\"h6\",{children:\"Historique r\\xE9cent des pr\\xE9sences\"}),staffDetails.attendances&&staffDetails.attendances.length>0?/*#__PURE__*/_jsxs(Table,{responsive:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Heure\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Retard\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:staffDetails.attendances.slice(0,10).map((attendance,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(attendance.attendance_date).toLocaleDateString('fr-FR')}),/*#__PURE__*/_jsx(\"td\",{children:new Date(attendance.scanned_at).toLocaleTimeString('fr-FR',{hour:'2-digit',minute:'2-digit'})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:attendance.event_type==='entry'?'success':'danger',children:attendance.event_type==='entry'?'Entrée':'Sortie'})}),/*#__PURE__*/_jsx(\"td\",{children:attendance.late_minutes>0?/*#__PURE__*/_jsxs(Badge,{bg:\"warning\",children:[\"+\",attendance.late_minutes,\"min\"]}):/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"\\xC0 l'heure\"})})]},index))})]}):/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:\"Aucun enregistrement de pr\\xE9sence sur cette p\\xE9riode\"})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowDetailModal(false),children:\"Fermer\"})})]})]});};export default StaffAttendanceManagement;","map":{"version":3,"names":["React","useState","useEffect","Card","Container","Row","Col","Table","Badge","Button","Form","Spinner","Alert","ProgressBar","Modal","ButtonGroup","Dropdown","InputGroup","People","Calendar","Clock","PersonCheck","PersonX","Download","Filter","Search","Eye","BarChart","PersonWorkspace","ShieldCheck","Gear","FileEarmarkText","CheckCircle","XCircle","ExclamationTriangle","InfoCircle","Printer","useAuth","useSchool","secureApiEndpoints","DatePicker","jsx","_jsx","jsxs","_jsxs","StaffAttendanceManagement","staffList","setStaffList","attendanceData","setAttendanceData","loading","setLoading","message","setMessage","messageType","setMessageType","selectedStaff","setSelectedStaff","showDetailModal","setShowDetailModal","staffDetails","setStaffDetails","startDate","setStartDate","Date","getFullYear","getMonth","endDate","setEndDate","selectedStaffType","setSelectedStaffType","searchTerm","setSearchTerm","user","schoolSettings","getLogoUrl","staffTypes","teacher","label","icon","color","bgColor","accountant","supervisor","admin","secretaire","loadStaffList","length","loadAttendanceData","response","staff","getStaffWithQR","success","data","error","console","attendancePromises","map","getStaffReport","id","start_date","toISOString","split","end_date","stats","attendances","attendance_rate","present_days","absent_days","late_days","total_work_hours","results","Promise","all","handleViewDetails","getStaffTypeConfig","staffType","getStaffTypeBadge","config","IconComponent","bg","className","children","size","getAttendanceRateColor","rate","getAttendanceIcon","filteredAttendanceData","filter","matchesType","staff_type","matchesSearch","name","toLowerCase","includes","email","formatDate","date","toLocaleDateString","day","month","year","convertImageToBase64","url","resolve","reject","timeout","setTimeout","Error","img","Image","onload","clearTimeout","canvas","document","createElement","ctx","getContext","maxSize","width","height","drawImage","dataURL","toDataURL","onerror","warn","src","createDefaultLogo","svgLogo","btoa","unescape","encodeURIComponent","exportToCSV","csvHeaders","csvData","csvContent","row","cell","join","blob","Blob","type","link","URL","createObjectURL","setAttribute","style","visibility","body","appendChild","click","removeChild","handlePrint","printContent","generatePrintContent","printWindow","window","open","write","close","print","currentDate","periodText","schoolName","school_name","logoBase64","school_logo","logoUrl","tableRows","forEach","index","toFixed","toUpperCase","s","reduce","sum","toLocaleTimeString","fluid","variant","onClose","dismissible","Header","Body","md","Group","Label","selected","onChange","dateFormat","placeholderText","Select","value","e","target","Object","entries","_ref","key","Text","Control","placeholder","onClick","disabled","title","animation","responsive","hover","now","show","onHide","closeButton","Title","slice","attendance","attendance_date","scanned_at","hour","minute","event_type","late_minutes","Footer"],"sources":["/var/www/College-IUP/front/src/pages/Staff/StaffAttendanceManagement.jsx"],"sourcesContent":["/**\n * Gestion des présences du personnel pour les secrétaires\n * Affichage de la liste du personnel avec leurs présences sur une période donnée\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { \n    Card, \n    Container, \n    Row, \n    Col, \n    Table, \n    Badge, \n    Button,\n    Form,\n    Spinner,\n    Alert,\n    ProgressBar,\n    Modal,\n    ButtonGroup,\n    Dropdown,\n    InputGroup\n} from 'react-bootstrap';\nimport { \n    People, \n    Calendar, \n    Clock, \n    PersonCheck,\n    PersonX,\n    Download,\n    Filter,\n    Search,\n    Eye,\n    BarChart,\n    PersonWorkspace,\n    ShieldCheck,\n    Gear,\n    FileEarmarkText,\n    CheckCircle,\n    XCircle,\n    ExclamationTriangle,\n    InfoCircle,\n    Printer\n} from 'react-bootstrap-icons';\nimport { useAuth } from '../../hooks/useAuth';\nimport { useSchool } from '../../contexts/SchoolContext';\nimport { secureApiEndpoints } from '../../utils/apiMigration';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\n\nconst StaffAttendanceManagement = () => {\n    const [staffList, setStaffList] = useState([]);\n    const [attendanceData, setAttendanceData] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [message, setMessage] = useState('');\n    const [messageType, setMessageType] = useState('info');\n    const [selectedStaff, setSelectedStaff] = useState(null);\n    const [showDetailModal, setShowDetailModal] = useState(false);\n    const [staffDetails, setStaffDetails] = useState(null);\n\n    // Filtres\n    const [startDate, setStartDate] = useState(new Date(new Date().getFullYear(), new Date().getMonth(), 1));\n    const [endDate, setEndDate] = useState(new Date());\n    const [selectedStaffType, setSelectedStaffType] = useState('');\n    const [searchTerm, setSearchTerm] = useState('');\n\n    const { user } = useAuth();\n    const { schoolSettings, getLogoUrl } = useSchool();\n\n    // Types de personnel avec leurs configurations\n    const staffTypes = {\n        teacher: { \n            label: 'Enseignants', \n            icon: PersonWorkspace, \n            color: 'primary',\n            bgColor: '#0d6efd'\n        },\n        accountant: { \n            label: 'Comptables', \n            icon: PersonCheck, \n            color: 'success',\n            bgColor: '#198754'\n        },\n        supervisor: { \n            label: 'Surveillants', \n            icon: ShieldCheck, \n            color: 'warning',\n            bgColor: '#ffc107'\n        },\n        admin: { \n            label: 'Administrateurs', \n            icon: Gear, \n            color: 'danger',\n            bgColor: '#dc3545'\n        },\n        secretaire: { \n            label: 'Secrétaires', \n            icon: FileEarmarkText, \n            color: 'info',\n            bgColor: '#0dcaf0'\n        }\n    };\n\n    useEffect(() => {\n        loadStaffList();\n    }, []);\n\n    useEffect(() => {\n        if (staffList.length > 0) {\n            loadAttendanceData();\n        }\n    }, [startDate, endDate, selectedStaffType, staffList]);\n\n    const loadStaffList = async () => {\n        try {\n            setLoading(true);\n            const response = await secureApiEndpoints.staff.getStaffWithQR();\n            \n            if (response.success) {\n                setStaffList(response.data || []);\n            } else {\n                setMessage('Erreur lors du chargement du personnel');\n                setMessageType('danger');\n            }\n        } catch (error) {\n            console.error('Error loading staff:', error);\n            setMessage('Erreur lors du chargement du personnel');\n            setMessageType('danger');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const loadAttendanceData = async () => {\n        try {\n            setLoading(true);\n            \n            // Charger les données de présence pour chaque membre du personnel\n            const attendancePromises = staffList.map(async (staff) => {\n                try {\n                    const response = await secureApiEndpoints.staff.getStaffReport(staff.id, {\n                        start_date: startDate.toISOString().split('T')[0],\n                        end_date: endDate.toISOString().split('T')[0]\n                    });\n                    \n                    if (response.success) {\n                        return {\n                            ...staff,\n                            stats: response.data.stats,\n                            attendances: response.data.attendances || []\n                        };\n                    }\n                    return {\n                        ...staff,\n                        stats: {\n                            attendance_rate: 0,\n                            present_days: 0,\n                            absent_days: 0,\n                            late_days: 0,\n                            total_work_hours: 0\n                        },\n                        attendances: []\n                    };\n                } catch (error) {\n                    console.error(`Error loading attendance for staff ${staff.id}:`, error);\n                    return {\n                        ...staff,\n                        stats: {\n                            attendance_rate: 0,\n                            present_days: 0,\n                            absent_days: 0,\n                            late_days: 0,\n                            total_work_hours: 0\n                        },\n                        attendances: []\n                    };\n                }\n            });\n\n            const results = await Promise.all(attendancePromises);\n            setAttendanceData(results);\n\n        } catch (error) {\n            console.error('Error loading attendance data:', error);\n            setMessage('Erreur lors du chargement des données de présence');\n            setMessageType('danger');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleViewDetails = async (staff) => {\n        setSelectedStaff(staff);\n        setStaffDetails(staff);\n        setShowDetailModal(true);\n    };\n\n    const getStaffTypeConfig = (staffType) => {\n        return staffTypes[staffType] || { \n            label: staffType, \n            color: 'secondary', \n            bgColor: '#6c757d',\n            icon: People \n        };\n    };\n\n    const getStaffTypeBadge = (staffType) => {\n        const config = getStaffTypeConfig(staffType);\n        const IconComponent = config.icon;\n        return (\n            <Badge bg={config.color} className=\"d-flex align-items-center gap-1\">\n                <IconComponent size={12} />\n                {config.label}\n            </Badge>\n        );\n    };\n\n    const getAttendanceRateColor = (rate) => {\n        if (rate >= 90) return 'success';\n        if (rate >= 75) return 'warning';\n        return 'danger';\n    };\n\n    const getAttendanceIcon = (rate) => {\n        if (rate >= 90) return <CheckCircle className=\"text-success\" />;\n        if (rate >= 75) return <ExclamationTriangle className=\"text-warning\" />;\n        return <XCircle className=\"text-danger\" />;\n    };\n\n    const filteredAttendanceData = attendanceData.filter(staff => {\n        const matchesType = !selectedStaffType || staff.staff_type === selectedStaffType;\n        const matchesSearch = !searchTerm || \n            staff.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            staff.email.toLowerCase().includes(searchTerm.toLowerCase());\n        return matchesType && matchesSearch;\n    });\n\n    const formatDate = (date) => {\n        return date.toLocaleDateString('fr-FR', {\n            day: '2-digit',\n            month: '2-digit', \n            year: 'numeric'\n        });\n    };\n\n    const convertImageToBase64 = (url) => {\n        return new Promise((resolve, reject) => {\n            // Créer un timeout pour éviter les blocages\n            const timeout = setTimeout(() => {\n                reject(new Error('Timeout lors du chargement de l\\'image'));\n            }, 5000);\n\n            const img = new Image();\n            \n            // Tenter d'abord sans CORS pour les images locales\n            img.onload = () => {\n                clearTimeout(timeout);\n                try {\n                    const canvas = document.createElement('canvas');\n                    const ctx = canvas.getContext('2d');\n                    \n                    // Redimensionner à une taille optimale pour l'impression\n                    const maxSize = 150;\n                    let { width, height } = img;\n                    \n                    if (width > height) {\n                        if (width > maxSize) {\n                            height = (height * maxSize) / width;\n                            width = maxSize;\n                        }\n                    } else {\n                        if (height > maxSize) {\n                            width = (width * maxSize) / height;\n                            height = maxSize;\n                        }\n                    }\n                    \n                    canvas.width = width;\n                    canvas.height = height;\n                    ctx.drawImage(img, 0, 0, width, height);\n                    \n                    const dataURL = canvas.toDataURL('image/png', 0.9);\n                    resolve(dataURL);\n                } catch (error) {\n                    console.error('Erreur lors de la conversion canvas:', error);\n                    reject(error);\n                }\n            };\n            \n            img.onerror = () => {\n                clearTimeout(timeout);\n                console.warn('Échec du chargement de l\\'image:', url);\n                reject(new Error('Impossible de charger l\\'image'));\n            };\n            \n            // Charger l'image\n            img.src = url;\n        });\n    };\n\n    const createDefaultLogo = () => {\n        // Créer un logo SVG par défaut plus visible encodé en base64\n        const svgLogo = `\n            <svg width=\"60\" height=\"60\" viewBox=\"0 0 60 60\" xmlns=\"http://www.w3.org/2000/svg\">\n                <defs>\n                    <linearGradient id=\"grad1\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                        <stop offset=\"0%\" style=\"stop-color:#0d6efd;stop-opacity:1\" />\n                        <stop offset=\"100%\" style=\"stop-color:#0a58ca;stop-opacity:1\" />\n                    </linearGradient>\n                </defs>\n                <rect width=\"60\" height=\"60\" fill=\"url(#grad1)\" rx=\"12\"/>\n                <circle cx=\"30\" cy=\"18\" r=\"9\" fill=\"white\" stroke=\"#0d6efd\" stroke-width=\"1\"/>\n                <path d=\"M12 48 C12 38, 18 32, 30 32 C42 32, 48 38, 48 48 L48 58 L12 58 Z\" fill=\"white\"/>\n                <rect x=\"10\" y=\"40\" width=\"40\" height=\"3\" fill=\"#0d6efd\"/>\n                <text x=\"30\" y=\"52\" font-family=\"Arial, sans-serif\" font-size=\"6\" fill=\"#0d6efd\" text-anchor=\"middle\" font-weight=\"bold\">ÉCOLE</text>\n                <text x=\"30\" y=\"57\" font-family=\"Arial, sans-serif\" font-size=\"5\" fill=\"#0d6efd\" text-anchor=\"middle\">CPBD</text>\n            </svg>\n        `;\n        return 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgLogo)));\n    };\n\n    const exportToCSV = () => {\n        if (filteredAttendanceData.length === 0) return;\n\n        const csvHeaders = [\n            'Nom',\n            'Email',\n            'Type',\n            'Taux de présence (%)',\n            'Jours présents',\n            'Jours absents',\n            'Retards',\n            'Heures travaillées'\n        ];\n\n        const csvData = filteredAttendanceData.map(staff => [\n            staff.name,\n            staff.email,\n            getStaffTypeConfig(staff.staff_type).label,\n            staff.stats.attendance_rate,\n            staff.stats.present_days,\n            staff.stats.absent_days,\n            staff.stats.late_days,\n            staff.stats.total_work_hours\n        ]);\n\n        const csvContent = [csvHeaders, ...csvData]\n            .map(row => row.map(cell => `\"${cell}\"`).join(','))\n            .join('\\n');\n\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n        const link = document.createElement('a');\n        const url = URL.createObjectURL(blob);\n        link.setAttribute('href', url);\n        link.setAttribute('download', `presences_personnel_${formatDate(startDate)}_${formatDate(endDate)}.csv`);\n        link.style.visibility = 'hidden';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    };\n\n    const handlePrint = async () => {\n        try {\n            const printContent = await generatePrintContent();\n            const printWindow = window.open('', '_blank');\n            printWindow.document.write(printContent);\n            printWindow.document.close();\n            printWindow.print();\n        } catch (error) {\n            console.error('Erreur lors de la génération du rapport:', error);\n        }\n    };\n\n    const generatePrintContent = async () => {\n        const currentDate = new Date().toLocaleDateString('fr-FR');\n        const periodText = `Du ${formatDate(startDate)} au ${formatDate(endDate)}`;\n        const schoolName = schoolSettings?.school_name || 'COLLÈGE POLYVALENT BILINGUE DE DOUALA';\n        \n        // Récupérer le logo en base64 comme le fait le backend\n        let logoBase64 = '';\n        if (schoolSettings?.school_logo) {\n            try {\n                // Utiliser l'URL complète du logo\n                const logoUrl = getLogoUrl();\n                if (logoUrl) {\n                    logoBase64 = await convertImageToBase64(logoUrl);\n                }\n            } catch (error) {\n                console.warn('Impossible de convertir le logo:', error);\n                logoBase64 = createDefaultLogo();\n            }\n        } else {\n            logoBase64 = createDefaultLogo();\n        }\n        \n        let tableRows = '';\n        filteredAttendanceData.forEach((staff, index) => {\n            const config = getStaffTypeConfig(staff.staff_type);\n            tableRows += `\n                <tr style=\"border-bottom: 1px solid #ddd;\">\n                    <td style=\"padding: 8px; text-align: center;\">${index + 1}</td>\n                    <td style=\"padding: 8px;\">\n                        <strong>${staff.name}</strong><br>\n                        <small style=\"color: #666;\">${staff.email || 'N/A'}</small>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center;\">\n                        <span style=\"background: ${config.bgColor}; color: white; padding: 2px 6px; border-radius: 3px; font-size: 11px;\">\n                            ${config.label}\n                        </span>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center;\">\n                        <strong style=\"color: ${staff.stats.attendance_rate >= 90 ? '#198754' : staff.stats.attendance_rate >= 75 ? '#ffc107' : '#dc3545'};\">\n                            ${staff.stats.attendance_rate.toFixed(1)}%\n                        </strong>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center; color: #198754;\">\n                        <strong>${staff.stats.present_days}</strong>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center; color: ${staff.stats.absent_days > 0 ? '#dc3545' : '#198754'};\">\n                        <strong>${staff.stats.absent_days}</strong>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center; color: ${staff.stats.late_days > 0 ? '#ffc107' : '#198754'};\">\n                        <strong>${staff.stats.late_days}</strong>\n                    </td>\n                    <td style=\"padding: 8px; text-align: center;\">\n                        <strong>${staff.stats.total_work_hours.toFixed(1)}h</strong>\n                    </td>\n                </tr>\n            `;\n        });\n\n        return `\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <meta charset=\"UTF-8\">\n                <title>Rapport Présences Personnel</title>\n                <style>\n                    @media print {\n                        @page {\n                            margin: 0.5in;\n                            size: A4 landscape;\n                        }\n                        body {\n                            font-family: 'Arial', 'Helvetica', sans-serif;\n                            font-size: 12px;\n                            line-height: 1.3;\n                        }\n                        .no-print {\n                            display: none !important;\n                        }\n                    }\n                    body {\n                        font-family: 'Arial', 'Helvetica', sans-serif;\n                        margin: 0;\n                        padding: 20px;\n                        font-size: 12px;\n                        line-height: 1.3;\n                    }\n                    .header {\n                        text-align: center;\n                        margin-bottom: 30px;\n                        border-bottom: 2px solid #333;\n                        padding-bottom: 15px;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        gap: 15px;\n                    }\n                    .logo-section {\n                        flex-shrink: 0;\n                    }\n                    .logo {\n                        width: 60px;\n                        height: 60px;\n                        object-fit: contain;\n                        border: 2px solid #ddd;\n                        border-radius: 8px;\n                        background: #f8f9fa;\n                    }\n                    .logo-fallback {\n                        width: 60px;\n                        height: 60px;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        background: linear-gradient(135deg, #0d6efd, #0a58ca);\n                        color: white;\n                        font-weight: bold;\n                        font-size: 12px;\n                        border-radius: 8px;\n                        text-align: center;\n                        line-height: 1.2;\n                    }\n                    .title-section {\n                        flex: 1;\n                    }\n                    .header h1 {\n                        margin: 0;\n                        color: #333;\n                        font-size: 20px;\n                        font-weight: bold;\n                    }\n                    .header h2 {\n                        margin: 5px 0;\n                        color: #666;\n                        font-size: 16px;\n                        font-weight: normal;\n                    }\n                    .meta-info {\n                        display: flex;\n                        justify-content: space-between;\n                        margin-bottom: 20px;\n                        font-size: 11px;\n                        color: #666;\n                    }\n                    .stats-summary {\n                        display: flex;\n                        justify-content: space-around;\n                        margin-bottom: 20px;\n                        text-align: center;\n                    }\n                    .stats-card {\n                        flex: 1;\n                        margin: 0 5px;\n                        padding: 10px;\n                        border: 1px solid #ddd;\n                        border-radius: 5px;\n                    }\n                    .stats-card h3 {\n                        margin: 0;\n                        font-size: 18px;\n                        color: #333;\n                    }\n                    .stats-card p {\n                        margin: 5px 0 0 0;\n                        font-size: 10px;\n                        color: #666;\n                        text-transform: uppercase;\n                    }\n                    table {\n                        width: 100%;\n                        border-collapse: collapse;\n                        margin-top: 20px;\n                        font-size: 11px;\n                    }\n                    th {\n                        background-color: #f8f9fa;\n                        border: 1px solid #ddd;\n                        padding: 10px 8px;\n                        text-align: center;\n                        font-weight: bold;\n                        color: #333;\n                    }\n                    td {\n                        border: 1px solid #ddd;\n                        vertical-align: middle;\n                    }\n                    tr:nth-child(even) {\n                        background-color: #f9f9f9;\n                    }\n                    .footer {\n                        margin-top: 30px;\n                        padding-top: 15px;\n                        border-top: 1px solid #ddd;\n                        font-size: 10px;\n                        color: #666;\n                        text-align: center;\n                    }\n                </style>\n            </head>\n            <body>\n                <div class=\"header\">\n                    <div class=\"logo-section\">\n                        <img src=\"${logoBase64}\" alt=\"Logo École\" class=\"logo\">\n                    </div>\n                    <div class=\"title-section\">\n                        <h1>${schoolName.toUpperCase()}</h1>\n                        <h2>Rapport des Présences du Personnel</h2>\n                    </div>\n                </div>\n\n                <div class=\"meta-info\">\n                    <div><strong>Période:</strong> ${periodText}</div>\n                    <div><strong>Généré le:</strong> ${currentDate}</div>\n                    <div><strong>Total personnel:</strong> ${filteredAttendanceData.length}</div>\n                </div>\n\n                <div class=\"stats-summary\">\n                    <div class=\"stats-card\">\n                        <h3 style=\"color: #198754;\">${filteredAttendanceData.filter(s => s.stats.attendance_rate >= 90).length}</h3>\n                        <p>Excellente présence (≥90%)</p>\n                    </div>\n                    <div class=\"stats-card\">\n                        <h3 style=\"color: #ffc107;\">${filteredAttendanceData.filter(s => s.stats.attendance_rate >= 75 && s.stats.attendance_rate < 90).length}</h3>\n                        <p>Présence correcte (75-89%)</p>\n                    </div>\n                    <div class=\"stats-card\">\n                        <h3 style=\"color: #dc3545;\">${filteredAttendanceData.filter(s => s.stats.attendance_rate < 75).length}</h3>\n                        <p>Présence insuffisante (&lt;75%)</p>\n                    </div>\n                    <div class=\"stats-card\">\n                        <h3 style=\"color: #0dcaf0;\">${filteredAttendanceData.reduce((sum, s) => sum + s.stats.total_work_hours, 0).toFixed(1)}h</h3>\n                        <p>Total heures travaillées</p>\n                    </div>\n                </div>\n\n                <table>\n                    <thead>\n                        <tr>\n                            <th style=\"width: 5%;\">#</th>\n                            <th style=\"width: 25%;\">Personnel</th>\n                            <th style=\"width: 15%;\">Type</th>\n                            <th style=\"width: 12%;\">Taux présence</th>\n                            <th style=\"width: 10%;\">Présents</th>\n                            <th style=\"width: 10%;\">Absences</th>\n                            <th style=\"width: 10%;\">Retards</th>\n                            <th style=\"width: 13%;\">Heures travaillées</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${tableRows}\n                    </tbody>\n                </table>\n\n                <div class=\"footer\">\n                    <p>Rapport généré automatiquement le ${currentDate} à ${new Date().toLocaleTimeString('fr-FR')}</p>\n                    <p>Ce document contient des informations confidentielles - Usage interne uniquement</p>\n                </div>\n            </body>\n            </html>\n        `;\n    };\n\n    return (\n        <Container fluid className=\"py-4\">\n            {/* Header */}\n            <Row className=\"mb-4\">\n                <Col>\n                    <h2 className=\"d-flex align-items-center gap-2\">\n                        <People size={32} className=\"text-primary\" />\n                        Présences du Personnel\n                    </h2>\n                    <p className=\"text-muted\">\n                        Suivi des présences du personnel sur une période donnée\n                    </p>\n                </Col>\n            </Row>\n\n            {/* Message d'état */}\n            {message && (\n                <Alert variant={messageType} className=\"mb-4\" onClose={() => setMessage('')} dismissible>\n                    {messageType === 'danger' && <ExclamationTriangle className=\"me-2\" />}\n                    {messageType === 'success' && <CheckCircle className=\"me-2\" />}\n                    {messageType === 'info' && <InfoCircle className=\"me-2\" />}\n                    {message}\n                </Alert>\n            )}\n\n            {/* Filtres */}\n            <Card className=\"mb-4\">\n                <Card.Header>\n                    <h5 className=\"mb-0\">\n                        <Filter className=\"me-2\" />\n                        Filtres et Contrôles\n                    </h5>\n                </Card.Header>\n                <Card.Body>\n                    <Row>\n                        <Col md={3}>\n                            <Form.Group>\n                                <Form.Label>Date de début</Form.Label>\n                                <DatePicker\n                                    selected={startDate}\n                                    onChange={setStartDate}\n                                    dateFormat=\"dd/MM/yyyy\"\n                                    className=\"form-control\"\n                                    placeholderText=\"Sélectionner une date\"\n                                />\n                            </Form.Group>\n                        </Col>\n                        <Col md={3}>\n                            <Form.Group>\n                                <Form.Label>Date de fin</Form.Label>\n                                <DatePicker\n                                    selected={endDate}\n                                    onChange={setEndDate}\n                                    dateFormat=\"dd/MM/yyyy\"\n                                    className=\"form-control\"\n                                    placeholderText=\"Sélectionner une date\"\n                                />\n                            </Form.Group>\n                        </Col>\n                        <Col md={3}>\n                            <Form.Group>\n                                <Form.Label>Type de personnel</Form.Label>\n                                <Form.Select\n                                    value={selectedStaffType}\n                                    onChange={(e) => setSelectedStaffType(e.target.value)}\n                                >\n                                    <option value=\"\">Tous les types</option>\n                                    {Object.entries(staffTypes).map(([key, config]) => (\n                                        <option key={key} value={key}>{config.label}</option>\n                                    ))}\n                                </Form.Select>\n                            </Form.Group>\n                        </Col>\n                        <Col md={3}>\n                            <Form.Group>\n                                <Form.Label>Rechercher</Form.Label>\n                                <InputGroup>\n                                    <InputGroup.Text>\n                                        <Search size={14} />\n                                    </InputGroup.Text>\n                                    <Form.Control\n                                        type=\"text\"\n                                        placeholder=\"Nom ou email...\"\n                                        value={searchTerm}\n                                        onChange={(e) => setSearchTerm(e.target.value)}\n                                    />\n                                </InputGroup>\n                            </Form.Group>\n                        </Col>\n                    </Row>\n                    <Row className=\"mt-3\">\n                        <Col>\n                            <ButtonGroup>\n                                <Button \n                                    variant=\"outline-primary\" \n                                    onClick={loadAttendanceData}\n                                    disabled={loading}\n                                >\n                                    {loading ? <Spinner size=\"sm\" className=\"me-2\" /> : <BarChart className=\"me-2\" />}\n                                    Actualiser\n                                </Button>\n                                <Button \n                                    variant=\"outline-success\" \n                                    onClick={exportToCSV}\n                                    disabled={filteredAttendanceData.length === 0}\n                                >\n                                    <Download className=\"me-2\" />\n                                    Exporter CSV\n                                </Button>\n                                <Button \n                                    variant=\"outline-info\" \n                                    onClick={handlePrint}\n                                    disabled={filteredAttendanceData.length === 0}\n                                >\n                                    <Printer className=\"me-2\" />\n                                    Imprimer\n                                </Button>\n                            </ButtonGroup>\n                        </Col>\n                    </Row>\n                </Card.Body>\n            </Card>\n\n            {/* Statistiques globales */}\n            <Row className=\"mb-4\">\n                <Col md={3}>\n                    <Card className=\"text-center border-primary\">\n                        <Card.Body>\n                            <h4 className=\"text-primary\">{filteredAttendanceData.length}</h4>\n                            <small className=\"text-muted\">Personnel total</small>\n                        </Card.Body>\n                    </Card>\n                </Col>\n                <Col md={3}>\n                    <Card className=\"text-center border-success\">\n                        <Card.Body>\n                            <h4 className=\"text-success\">\n                                {filteredAttendanceData.filter(s => s.stats.attendance_rate >= 90).length}\n                            </h4>\n                            <small className=\"text-muted\">Présence excellente (≥90%)</small>\n                        </Card.Body>\n                    </Card>\n                </Col>\n                <Col md={3}>\n                    <Card className=\"text-center border-warning\">\n                        <Card.Body>\n                            <h4 className=\"text-warning\">\n                                {filteredAttendanceData.filter(s => s.stats.attendance_rate >= 75 && s.stats.attendance_rate < 90).length}\n                            </h4>\n                            <small className=\"text-muted\">Présence correcte (75-89%)</small>\n                        </Card.Body>\n                    </Card>\n                </Col>\n                <Col md={3}>\n                    <Card className=\"text-center border-danger\">\n                        <Card.Body>\n                            <h4 className=\"text-danger\">\n                                {filteredAttendanceData.filter(s => s.stats.attendance_rate < 75).length}\n                            </h4>\n                            <small className=\"text-muted\">Présence insuffisante (&lt;75%)</small>\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n\n            {/* Tableau des présences */}\n            <Card>\n                <Card.Header className=\"d-flex justify-content-between align-items-center\">\n                    <h5 className=\"mb-0\">\n                        <Calendar className=\"me-2\" />\n                        Présences du {formatDate(startDate)} au {formatDate(endDate)}\n                    </h5>\n                    <div className=\"d-flex align-items-center gap-2\">\n                        <Badge bg=\"info\">\n                            {filteredAttendanceData.length} personnel(s)\n                        </Badge>\n                        <Button \n                            variant=\"outline-primary\" \n                            size=\"sm\"\n                            onClick={handlePrint}\n                            disabled={filteredAttendanceData.length === 0}\n                            title=\"Imprimer le rapport\"\n                        >\n                            <Printer size={14} />\n                        </Button>\n                    </div>\n                </Card.Header>\n                <Card.Body>\n                    {loading ? (\n                        <div className=\"text-center py-4\">\n                            <Spinner animation=\"border\" />\n                            <p className=\"mt-2\">Chargement des données...</p>\n                        </div>\n                    ) : filteredAttendanceData.length === 0 ? (\n                        <div className=\"text-center py-4 text-muted\">\n                            <PersonX size={48} className=\"mb-3\" />\n                            <p>Aucun personnel trouvé avec ces critères</p>\n                        </div>\n                    ) : (\n                        <Table responsive hover>\n                            <thead>\n                                <tr>\n                                    <th>Personnel</th>\n                                    <th>Type</th>\n                                    <th>Taux de présence</th>\n                                    <th>Jours présents</th>\n                                    <th>Absences</th>\n                                    <th>Retards</th>\n                                    <th>Heures travaillées</th>\n                                    <th>Actions</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {filteredAttendanceData.map((staff) => (\n                                    <tr key={staff.id}>\n                                        <td>\n                                            <div className=\"d-flex align-items-center\">\n                                                {getAttendanceIcon(staff.stats.attendance_rate)}\n                                                <div className=\"ms-2\">\n                                                    <div className=\"fw-bold\">{staff.name}</div>\n                                                    <small className=\"text-muted\">{staff.email}</small>\n                                                </div>\n                                            </div>\n                                        </td>\n                                        <td>{getStaffTypeBadge(staff.staff_type)}</td>\n                                        <td>\n                                            <div className=\"d-flex align-items-center\">\n                                                <ProgressBar \n                                                    now={staff.stats.attendance_rate} \n                                                    variant={getAttendanceRateColor(staff.stats.attendance_rate)}\n                                                    style={{ width: '60px', height: '8px' }}\n                                                    className=\"me-2\"\n                                                />\n                                                <Badge bg={getAttendanceRateColor(staff.stats.attendance_rate)}>\n                                                    {staff.stats.attendance_rate.toFixed(1)}%\n                                                </Badge>\n                                            </div>\n                                        </td>\n                                        <td>\n                                            <Badge bg=\"success\" className=\"d-flex align-items-center gap-1\">\n                                                <PersonCheck size={12} />\n                                                {staff.stats.present_days}\n                                            </Badge>\n                                        </td>\n                                        <td>\n                                            {staff.stats.absent_days > 0 ? (\n                                                <Badge bg=\"danger\" className=\"d-flex align-items-center gap-1\">\n                                                    <PersonX size={12} />\n                                                    {staff.stats.absent_days}\n                                                </Badge>\n                                            ) : (\n                                                <Badge bg=\"success\">0</Badge>\n                                            )}\n                                        </td>\n                                        <td>\n                                            {staff.stats.late_days > 0 ? (\n                                                <Badge bg=\"warning\" className=\"d-flex align-items-center gap-1\">\n                                                    <Clock size={12} />\n                                                    {staff.stats.late_days}\n                                                </Badge>\n                                            ) : (\n                                                <Badge bg=\"success\">0</Badge>\n                                            )}\n                                        </td>\n                                        <td>\n                                            <Badge bg=\"info\" className=\"d-flex align-items-center gap-1\">\n                                                <Clock size={12} />\n                                                {staff.stats.total_work_hours.toFixed(1)}h\n                                            </Badge>\n                                        </td>\n                                        <td>\n                                            <Button\n                                                variant=\"outline-primary\"\n                                                size=\"sm\"\n                                                onClick={() => handleViewDetails(staff)}\n                                            >\n                                                <Eye size={12} className=\"me-1\" />\n                                                Détails\n                                            </Button>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </Table>\n                    )}\n                </Card.Body>\n            </Card>\n\n            {/* Modal des détails */}\n            <Modal show={showDetailModal} onHide={() => setShowDetailModal(false)} size=\"lg\">\n                <Modal.Header closeButton>\n                    <Modal.Title>\n                        <People className=\"me-2\" />\n                        Détails des présences - {selectedStaff?.name}\n                    </Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    {staffDetails && (\n                        <div>\n                            {/* Informations générales */}\n                            <Row className=\"mb-4\">\n                                <Col md={6}>\n                                    <h6>Informations générales</h6>\n                                    <p><strong>Nom:</strong> {staffDetails.name}</p>\n                                    <p><strong>Email:</strong> {staffDetails.email}</p>\n                                    <p><strong>Type:</strong> {getStaffTypeBadge(staffDetails.staff_type)}</p>\n                                </Col>\n                                <Col md={6}>\n                                    <h6>Statistiques de la période</h6>\n                                    <p><strong>Taux de présence:</strong> {staffDetails.stats.attendance_rate.toFixed(1)}%</p>\n                                    <p><strong>Jours présents:</strong> {staffDetails.stats.present_days}</p>\n                                    <p><strong>Jours absents:</strong> {staffDetails.stats.absent_days}</p>\n                                    <p><strong>Retards:</strong> {staffDetails.stats.late_days}</p>\n                                    <p><strong>Heures travaillées:</strong> {staffDetails.stats.total_work_hours.toFixed(1)}h</p>\n                                </Col>\n                            </Row>\n\n                            {/* Historique récent */}\n                            <h6>Historique récent des présences</h6>\n                            {staffDetails.attendances && staffDetails.attendances.length > 0 ? (\n                                <Table responsive size=\"sm\">\n                                    <thead>\n                                        <tr>\n                                            <th>Date</th>\n                                            <th>Heure</th>\n                                            <th>Type</th>\n                                            <th>Retard</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {staffDetails.attendances.slice(0, 10).map((attendance, index) => (\n                                            <tr key={index}>\n                                                <td>{new Date(attendance.attendance_date).toLocaleDateString('fr-FR')}</td>\n                                                <td>{new Date(attendance.scanned_at).toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' })}</td>\n                                                <td>\n                                                    <Badge bg={attendance.event_type === 'entry' ? 'success' : 'danger'}>\n                                                        {attendance.event_type === 'entry' ? 'Entrée' : 'Sortie'}\n                                                    </Badge>\n                                                </td>\n                                                <td>\n                                                    {attendance.late_minutes > 0 ? (\n                                                        <Badge bg=\"warning\">+{attendance.late_minutes}min</Badge>\n                                                    ) : (\n                                                        <Badge bg=\"success\">À l'heure</Badge>\n                                                    )}\n                                                </td>\n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                </Table>\n                            ) : (\n                                <Alert variant=\"info\">\n                                    Aucun enregistrement de présence sur cette période\n                                </Alert>\n                            )}\n                        </div>\n                    )}\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={() => setShowDetailModal(false)}>\n                        Fermer\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </Container>\n    );\n};\n\nexport default StaffAttendanceManagement;"],"mappings":"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CAACc,KAAK,CAACE,eAAe,EAAI,EAAE,CAAG,SAAS,CAAGhB,KAAK,CAACc,KAAK,CAACE,eAAe,EAAI,EAAE,CAAG,SAAS,CAAG,SAAS;AACzJ,8BAA8BhB,KAAK,CAACc,KAAK,CAACE,eAAe,CAACyG,OAAO,CAAC,CAAC,CAAC;AACpE;AACA;AACA;AACA,kCAAkCzH,KAAK,CAACc,KAAK,CAACG,YAAY;AAC1D;AACA,0EAA0EjB,KAAK,CAACc,KAAK,CAACI,WAAW,CAAG,CAAC,CAAG,SAAS,CAAG,SAAS;AAC7H,kCAAkClB,KAAK,CAACc,KAAK,CAACI,WAAW;AACzD;AACA,0EAA0ElB,KAAK,CAACc,KAAK,CAACK,SAAS,CAAG,CAAC,CAAG,SAAS,CAAG,SAAS;AAC3H,kCAAkCnB,KAAK,CAACc,KAAK,CAACK,SAAS;AACvD;AACA;AACA,kCAAkCnB,KAAK,CAACc,KAAK,CAACM,gBAAgB,CAACqG,OAAO,CAAC,CAAC,CAAC;AACzE;AACA;AACA,aAAa,CACL,CAAC,CAAC,CAEF,MAAO;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}