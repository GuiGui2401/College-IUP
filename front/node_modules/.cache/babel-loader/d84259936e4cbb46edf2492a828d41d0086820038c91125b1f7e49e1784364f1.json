{"ast":null,"code":"import{useEffect,useState}from\"react\";import{Alert,Button,Card,Col,Container,Form,Image,Row,Spinner}from\"react-bootstrap\";import{Building,Calendar,Check2Circle,CurrencyDollar,Envelope,GeoAlt,Globe,Palette,Percent,Save,Telephone,Upload,Whatsapp}from\"react-bootstrap-icons\";import Swal from\"sweetalert2\";import ColorPicker from\"../../components/ColorPicker\";import{useTheme}from\"../../contexts/ThemeContext\";import{secureApiEndpoints}from\"../../utils/apiMigration\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SchoolSettings=()=>{const{changePrimaryColor}=useTheme();const[settings,setSettings]=useState({school_name:\"\",school_motto:\"\",school_address:\"\",school_phone:\"\",school_email:\"\",school_website:\"\",school_logo:\"\",currency:\"FCFA\",bank_name:\"\",country:\"\",city:\"\",footer_text:\"\",scholarship_deadline:\"\",reduction_percentage:10,primary_color:\"#007bff\",principal_name:\"\",whatsapp_notification_number:\"\",whatsapp_notifications_enabled:false,whatsapp_api_url:\"\",whatsapp_instance_id:\"\",whatsapp_token:\"\"});const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[error,setError]=useState(\"\");const[success,setSuccess]=useState(\"\");const[logoFile,setLogoFile]=useState(null);const[logoPreview,setLogoPreview]=useState(\"\");const[testingWhatsApp,setTestingWhatsApp]=useState(false);useEffect(()=>{loadSettings();},[]);const loadSettings=async()=>{try{setLoading(true);const response=await secureApiEndpoints.schoolSettings.get();if(response.success){// Convertir la date au format requis pour l'input date\nconst settingsData={...response.data};if(settingsData.scholarship_deadline){// Convertir de '2025-08-15T00:00:00.000000Z' vers '2025-08-15'\nsettingsData.scholarship_deadline=settingsData.scholarship_deadline.split(\"T\")[0];}setSettings(settingsData);// Synchroniser le thème avec la couleur primaire chargée\nif(response.data.primary_color){changePrimaryColor(response.data.primary_color);}// Charger le logo si disponible\nif(response.data.school_logo){try{const logoResponse=await secureApiEndpoints.schoolSettings.getLogo();if(logoResponse.success){setLogoPreview(logoResponse.data.logo_url);}}catch(error){console.log(\"Logo non disponible\");}}}else{setError(response.message);}}catch(error){setError(\"Erreur lors du chargement des paramètres\");console.error(\"Error loading settings:\",error);}finally{setLoading(false);}};const handleInputChange=(field,value)=>{setSettings(prev=>({...prev,[field]:value}));// Si c'est la couleur primaire, l'appliquer immédiatement\nif(field===\"primary_color\"){changePrimaryColor(value);}};const handleLogoChange=event=>{const file=event.target.files[0];if(file){if(file.size>5*1024*1024){// 5MB limit\nsetError(\"Le logo ne peut pas dépasser 5MB\");return;}// Vérifier le type de fichier\nconst allowedTypes=[\"image/jpeg\",\"image/jpg\",\"image/png\",\"image/gif\"];if(!allowedTypes.includes(file.type)){setError(\"Format de fichier non supporté. Utilisez JPG, PNG ou GIF.\");return;}setLogoFile(file);// Créer un aperçu\nconst reader=new FileReader();reader.onload=e=>{setLogoPreview(e.target.result);};reader.readAsDataURL(file);}};const handleSubmit=async e=>{e.preventDefault();try{setSaving(true);setError(\"\");setSuccess(\"\");// Validation côté frontend\nif(!settings.school_name||settings.school_name.trim()===\"\"){setError(\"Le nom de l'établissement est requis\");setSaving(false);return;}// Préparer les données avec des valeurs par défaut\nconst cleanedSettings={...settings,school_name:settings.school_name||\"\",school_motto:settings.school_motto||\"\",school_address:settings.school_address||\"\",school_phone:settings.school_phone||\"\",school_email:settings.school_email||\"\",school_website:settings.school_website||\"\",currency:settings.currency||\"FCFA\",bank_name:settings.bank_name||\"\",country:settings.country||\"\",city:settings.city||\"\",footer_text:settings.footer_text||\"\",scholarship_deadline:settings.scholarship_deadline||\"\",reduction_percentage:settings.reduction_percentage||10};// Préparer les données\nlet formData;if(logoFile){// Si un nouveau logo est uploadé, utiliser FormData\nformData=new FormData();Object.keys(cleanedSettings).forEach(key=>{if(key!==\"school_logo\"){formData.append(key,cleanedSettings[key]||\"\");}});formData.append(\"school_logo\",logoFile);// Débogage temporaire\nconsole.log(\"Sending FormData with logo:\",logoFile.name,logoFile.size,logoFile.type);for(let[key,value]of formData.entries()){console.log(\"FormData entry:\",key,typeof value===\"object\"?value.name:value);}}else{// Sinon, utiliser les données JSON normales\nformData={...cleanedSettings};delete formData.school_logo;// Ne pas envoyer le chemin du logo existant\n}const response=await secureApiEndpoints.schoolSettings.update(formData);if(response.success){setSuccess(\"Paramètres mis à jour avec succès\");setSettings(response.data);setLogoFile(null);// Recharger le logo si nécessaire\nif(logoFile&&response.data.school_logo){try{const logoResponse=await secureApiEndpoints.schoolSettings.getLogo();if(logoResponse.success){setLogoPreview(logoResponse.data.logo_url);}}catch(error){console.log(\"Erreur lors du rechargement du logo\");}}// Notification de succès\nSwal.fire({title:\"Succès !\",text:\"Les paramètres de l'établissement ont été mis à jour.\",icon:\"success\",confirmButtonText:\"OK\"});}else{setError(response.message||\"Erreur lors de la mise à jour\");}}catch(error){setError(\"Erreur lors de la mise à jour des paramètres\");console.error(\"Error updating settings:\",error);}finally{setSaving(false);}};const testWhatsApp=async()=>{try{setTestingWhatsApp(true);setError(\"\");setSuccess(\"\");const response=await secureApiEndpoints.schoolSettings.testWhatsApp();if(response.success){setSuccess(response.message);Swal.fire({title:\"Test réussi !\",text:response.message,icon:\"success\",confirmButtonText:\"OK\"});}else{setError(response.message);Swal.fire({title:\"Test échoué\",text:response.message,icon:\"error\",confirmButtonText:\"OK\"});}}catch(error){const errorMessage=\"Erreur lors du test WhatsApp\";setError(errorMessage);Swal.fire({title:\"Erreur\",text:errorMessage,icon:\"error\",confirmButtonText:\"OK\"});}finally{setTestingWhatsApp(false);}};if(loading){return/*#__PURE__*/_jsx(Container,{fluid:true,className:\"py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Chargement...\"})})})});}return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"py-4\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Param\\xE8tres de l'\\xC9tablissement\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Configurez les informations g\\xE9n\\xE9rales de votre \\xE9tablissement\"})]})}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",dismissible:true,onClose:()=>setError(\"\"),children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",dismissible:true,onClose:()=>setSuccess(\"\"),children:success}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{lg:8,children:[/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0 d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Building,{className:\"me-2\"}),\"Informations G\\xE9n\\xE9rales\"]})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Nom de l'\\xE9tablissement *\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:settings.school_name,onChange:e=>handleInputChange(\"school_name\",e.target.value),required:true})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Devise\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:settings.school_motto,onChange:e=>handleInputChange(\"school_motto\",e.target.value),placeholder:\"Ex: Excellence et Discipline\"})]})})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Nom du Principal/Directeur\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:settings.principal_name,onChange:e=>handleInputChange(\"principal_name\",e.target.value),placeholder:\"Ex: M. Jean DUPONT\"}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Ce nom appara\\xEEtra sur les certificats de scolarit\\xE9\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{className:\" d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(GeoAlt,{className:\"me-1\"}),\"Adresse compl\\xE8te\"]}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,value:settings.school_address,onChange:e=>handleInputChange(\"school_address\",e.target.value),placeholder:\"Adresse compl\\xE8te de l'\\xE9tablissement\"})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{className:\" d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Telephone,{className:\"me-1\"}),\"T\\xE9l\\xE9phone\"]}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:settings.school_phone,onChange:e=>handleInputChange(\"school_phone\",e.target.value),placeholder:\"Ex: 233 43 25 47\"})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{className:\" d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Envelope,{className:\"me-1\"}),\"Email\"]}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:settings.school_email,onChange:e=>handleInputChange(\"school_email\",e.target.value),placeholder:\"contact@ecole.com\"})]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{className:\" d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Globe,{className:\"me-1\"}),\"Site Web\"]}),/*#__PURE__*/_jsx(Form.Control,{type:\"url\",value:settings.school_website,onChange:e=>handleInputChange(\"school_website\",e.target.value),placeholder:\"www.ecole.com\"})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{className:\" d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(CurrencyDollar,{className:\"me-1\"}),\"Monnaie\"]}),/*#__PURE__*/_jsxs(Form.Select,{value:settings.currency,onChange:e=>handleInputChange(\"currency\",e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"FCFA\",children:\"FCFA\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EUR\",children:\"EUR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",children:\"USD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"XAF\",children:\"XAF\"})]})]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Nom de la banque\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:settings.bank_name,onChange:e=>handleInputChange(\"bank_name\",e.target.value),placeholder:\"Ex: FIGEC\"})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Pays\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:settings.country,onChange:e=>handleInputChange(\"country\",e.target.value),placeholder:\"Ex: Cameroun\"})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Ville\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:settings.city,onChange:e=>handleInputChange(\"city\",e.target.value),placeholder:\"Ex: Douala\"})]})})]})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0 d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(CurrencyDollar,{className:\"me-2\"}),\"Param\\xE8tres Financiers\"]})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{className:\" d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"me-1\"}),\"Date limite pour bourses/r\\xE9ductions\"]}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",value:settings.scholarship_deadline,onChange:e=>handleInputChange(\"scholarship_deadline\",e.target.value)}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Les \\xE9tudiants doivent payer avant cette date pour b\\xE9n\\xE9ficier des bourses et r\\xE9ductions\"})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{className:\" d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Percent,{className:\"me-1\"}),\"Pourcentage de r\\xE9duction (%)\"]}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",min:\"0\",max:\"100\",step:\"0.01\",value:settings.reduction_percentage,onChange:e=>handleInputChange(\"reduction_percentage\",parseFloat(e.target.value)||0)}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"R\\xE9duction appliqu\\xE9e aux anciens \\xE9l\\xE8ves et aux nouveaux payant avant d\\xE9lai\"})]})})]})})]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0 d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Whatsapp,{className:\"me-2\"}),\"Notifications WhatsApp\"]})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{className:\" d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Telephone,{className:\"me-1\"}),\"Num\\xE9ro WhatsApp pour notifications\"]}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:settings.whatsapp_notification_number,onChange:e=>handleInputChange(\"whatsapp_notification_number\",e.target.value),placeholder:\"Ex: +237 6XX XX XX XX\"}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Ce num\\xE9ro recevra les notifications\"})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\xC9tat des notifications\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",id:\"whatsapp-notifications-switch\",label:settings.whatsapp_notifications_enabled?\"Activées\":\"Désactivées\",checked:settings.whatsapp_notifications_enabled,onChange:e=>handleInputChange(\"whatsapp_notifications_enabled\",e.target.checked)})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-top pt-3 mb-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-3\",children:\"Configuration API UltraMsg\"}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"URL de l'API UltraMsg\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"url\",value:settings.whatsapp_api_url,onChange:e=>handleInputChange(\"whatsapp_api_url\",e.target.value),placeholder:\"https://api.ultramsg.com\"}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"URL de base de l'API UltraMsg\"})]})})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Instance ID\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:settings.whatsapp_instance_id,onChange:e=>handleInputChange(\"whatsapp_instance_id\",e.target.value),placeholder:\"instanceXXXXX\"}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"ID de votre instance UltraMsg\"})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Token API\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:settings.whatsapp_token,onChange:e=>handleInputChange(\"whatsapp_token\",e.target.value),placeholder:\"Votre token UltraMsg\"}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Token d'authentification UltraMsg\"})]})})]})]}),settings.whatsapp_notifications_enabled&&settings.whatsapp_notification_number&&settings.whatsapp_api_url&&settings.whatsapp_instance_id&&settings.whatsapp_token&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-light p-3 rounded\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-success\",children:\"\\u2705 Configuration compl\\xE8te\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-muted small\",children:\"Tous les param\\xE8tres requis sont configur\\xE9s\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",size:\"sm\",onClick:testWhatsApp,disabled:testingWhatsApp,children:testingWhatsApp?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\",className:\"me-2\"}),\"Test en cours...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Check2Circle,{className:\"me-2\"}),\"Tester UltraMsg\"]})})]})}),settings.whatsapp_notifications_enabled&&(!settings.whatsapp_notification_number||!settings.whatsapp_api_url||!settings.whatsapp_instance_id||!settings.whatsapp_token)&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u26A0\\uFE0F Configuration incompl\\xE8te\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Veuillez remplir tous les champs pour activer les notifications WhatsApp.\"})]})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Texte de Pied de Page (Re\\xE7us)\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:4,value:settings.footer_text,onChange:e=>handleInputChange(\"footer_text\",e.target.value),placeholder:\"Texte qui appara\\xEEtra au bas des re\\xE7us de paiement...\"})})})]})]}),/*#__PURE__*/_jsxs(Col,{lg:4,children:[/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0 d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Upload,{className:\"me-2\"}),\"Logo de l'\\xC9tablissement\"]})}),/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[logoPreview&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Image,{src:logoPreview,alt:\"Logo\",thumbnail:true,style:{maxWidth:\"200px\",maxHeight:\"200px\"}})}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Choisir un nouveau logo\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",accept:\"image/*\",onChange:handleLogoChange}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Formats accept\\xE9s: JPG, PNG, GIF. Taille max: 5MB\"})]})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(Palette,{className:\"me-2\"}),\"Th\\xE8me de l'Application\"]})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(ColorPicker,{value:settings.primary_color,onChange:color=>handleInputChange(\"primary_color\",color),label:\"Couleur principale de l'interface\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Cette couleur sera appliqu\\xE9e aux boutons, liens et \\xE9l\\xE9ments principaux de l'interface.\"})]})]})]})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:saving,size:\"lg\",children:saving?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\",className:\"me-2\"}),\"Sauvegarde...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Save,{className:\"me-2\"}),\"Sauvegarder les Param\\xE8tres\"]})})})})})]})]});};export default SchoolSettings;","map":{"version":3,"names":["useEffect","useState","Alert","Button","Card","Col","Container","Form","Image","Row","Spinner","Building","Calendar","Check2Circle","CurrencyDollar","Envelope","GeoAlt","Globe","Palette","Percent","Save","Telephone","Upload","Whatsapp","Swal","ColorPicker","useTheme","secureApiEndpoints","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SchoolSettings","changePrimaryColor","settings","setSettings","school_name","school_motto","school_address","school_phone","school_email","school_website","school_logo","currency","bank_name","country","city","footer_text","scholarship_deadline","reduction_percentage","primary_color","principal_name","whatsapp_notification_number","whatsapp_notifications_enabled","whatsapp_api_url","whatsapp_instance_id","whatsapp_token","loading","setLoading","saving","setSaving","error","setError","success","setSuccess","logoFile","setLogoFile","logoPreview","setLogoPreview","testingWhatsApp","setTestingWhatsApp","loadSettings","response","schoolSettings","get","settingsData","data","split","logoResponse","getLogo","logo_url","console","log","message","handleInputChange","field","value","prev","handleLogoChange","event","file","target","files","size","allowedTypes","includes","type","reader","FileReader","onload","e","result","readAsDataURL","handleSubmit","preventDefault","trim","cleanedSettings","formData","FormData","Object","keys","forEach","key","append","name","entries","update","fire","title","text","icon","confirmButtonText","testWhatsApp","errorMessage","fluid","className","children","animation","role","variant","dismissible","onClose","onSubmit","lg","Header","Body","md","Group","Label","Control","onChange","required","placeholder","Text","as","rows","Select","min","max","step","parseFloat","Check","id","label","checked","onClick","disabled","src","alt","thumbnail","style","maxWidth","maxHeight","accept","color"],"sources":["/var/www/College-IUP/front/src/pages/Settings/SchoolSettings.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport {\n  Alert,\n  Button,\n  Card,\n  Col,\n  Container,\n  Form,\n  Image,\n  Row,\n  Spinner,\n} from \"react-bootstrap\";\nimport {\n  Building,\n  Calendar,\n  Check2Circle,\n  CurrencyDollar,\n  Envelope,\n  GeoAlt,\n  Globe,\n  Palette,\n  Percent,\n  Save,\n  Telephone,\n  Upload,\n  Whatsapp,\n} from \"react-bootstrap-icons\";\nimport Swal from \"sweetalert2\";\nimport ColorPicker from \"../../components/ColorPicker\";\nimport { useTheme } from \"../../contexts/ThemeContext\";\nimport { secureApiEndpoints } from \"../../utils/apiMigration\";\n\nconst SchoolSettings = () => {\n  const { changePrimaryColor } = useTheme();\n\n  const [settings, setSettings] = useState({\n    school_name: \"\",\n    school_motto: \"\",\n    school_address: \"\",\n    school_phone: \"\",\n    school_email: \"\",\n    school_website: \"\",\n    school_logo: \"\",\n    currency: \"FCFA\",\n    bank_name: \"\",\n    country: \"\",\n    city: \"\",\n    footer_text: \"\",\n    scholarship_deadline: \"\",\n    reduction_percentage: 10,\n    primary_color: \"#007bff\",\n    principal_name: \"\",\n    whatsapp_notification_number: \"\",\n    whatsapp_notifications_enabled: false,\n    whatsapp_api_url: \"\",\n    whatsapp_instance_id: \"\",\n    whatsapp_token: \"\",\n  });\n\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [logoFile, setLogoFile] = useState(null);\n  const [logoPreview, setLogoPreview] = useState(\"\");\n  const [testingWhatsApp, setTestingWhatsApp] = useState(false);\n\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      setLoading(true);\n      const response = await secureApiEndpoints.schoolSettings.get();\n\n      if (response.success) {\n        // Convertir la date au format requis pour l'input date\n        const settingsData = { ...response.data };\n        if (settingsData.scholarship_deadline) {\n          // Convertir de '2025-08-15T00:00:00.000000Z' vers '2025-08-15'\n          settingsData.scholarship_deadline =\n            settingsData.scholarship_deadline.split(\"T\")[0];\n        }\n\n        setSettings(settingsData);\n\n        // Synchroniser le thème avec la couleur primaire chargée\n        if (response.data.primary_color) {\n          changePrimaryColor(response.data.primary_color);\n        }\n\n        // Charger le logo si disponible\n        if (response.data.school_logo) {\n          try {\n            const logoResponse =\n              await secureApiEndpoints.schoolSettings.getLogo();\n            if (logoResponse.success) {\n              setLogoPreview(logoResponse.data.logo_url);\n            }\n          } catch (error) {\n            console.log(\"Logo non disponible\");\n          }\n        }\n      } else {\n        setError(response.message);\n      }\n    } catch (error) {\n      setError(\"Erreur lors du chargement des paramètres\");\n      console.error(\"Error loading settings:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleInputChange = (field, value) => {\n    setSettings((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n\n    // Si c'est la couleur primaire, l'appliquer immédiatement\n    if (field === \"primary_color\") {\n      changePrimaryColor(value);\n    }\n  };\n\n  const handleLogoChange = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      if (file.size > 5 * 1024 * 1024) {\n        // 5MB limit\n        setError(\"Le logo ne peut pas dépasser 5MB\");\n        return;\n      }\n\n      // Vérifier le type de fichier\n      const allowedTypes = [\n        \"image/jpeg\",\n        \"image/jpg\",\n        \"image/png\",\n        \"image/gif\",\n      ];\n      if (!allowedTypes.includes(file.type)) {\n        setError(\"Format de fichier non supporté. Utilisez JPG, PNG ou GIF.\");\n        return;\n      }\n\n      setLogoFile(file);\n\n      // Créer un aperçu\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setLogoPreview(e.target.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      setSaving(true);\n      setError(\"\");\n      setSuccess(\"\");\n\n      // Validation côté frontend\n      if (!settings.school_name || settings.school_name.trim() === \"\") {\n        setError(\"Le nom de l'établissement est requis\");\n        setSaving(false);\n        return;\n      }\n\n      // Préparer les données avec des valeurs par défaut\n      const cleanedSettings = {\n        ...settings,\n        school_name: settings.school_name || \"\",\n        school_motto: settings.school_motto || \"\",\n        school_address: settings.school_address || \"\",\n        school_phone: settings.school_phone || \"\",\n        school_email: settings.school_email || \"\",\n        school_website: settings.school_website || \"\",\n        currency: settings.currency || \"FCFA\",\n        bank_name: settings.bank_name || \"\",\n        country: settings.country || \"\",\n        city: settings.city || \"\",\n        footer_text: settings.footer_text || \"\",\n        scholarship_deadline: settings.scholarship_deadline || \"\",\n        reduction_percentage: settings.reduction_percentage || 10,\n      };\n\n      // Préparer les données\n      let formData;\n\n      if (logoFile) {\n        // Si un nouveau logo est uploadé, utiliser FormData\n        formData = new FormData();\n        Object.keys(cleanedSettings).forEach((key) => {\n          if (key !== \"school_logo\") {\n            formData.append(key, cleanedSettings[key] || \"\");\n          }\n        });\n        formData.append(\"school_logo\", logoFile);\n\n        // Débogage temporaire\n        console.log(\n          \"Sending FormData with logo:\",\n          logoFile.name,\n          logoFile.size,\n          logoFile.type\n        );\n        for (let [key, value] of formData.entries()) {\n          console.log(\n            \"FormData entry:\",\n            key,\n            typeof value === \"object\" ? value.name : value\n          );\n        }\n      } else {\n        // Sinon, utiliser les données JSON normales\n        formData = { ...cleanedSettings };\n        delete formData.school_logo; // Ne pas envoyer le chemin du logo existant\n      }\n\n      const response = await secureApiEndpoints.schoolSettings.update(formData);\n\n      if (response.success) {\n        setSuccess(\"Paramètres mis à jour avec succès\");\n        setSettings(response.data);\n        setLogoFile(null);\n\n        // Recharger le logo si nécessaire\n        if (logoFile && response.data.school_logo) {\n          try {\n            const logoResponse =\n              await secureApiEndpoints.schoolSettings.getLogo();\n            if (logoResponse.success) {\n              setLogoPreview(logoResponse.data.logo_url);\n            }\n          } catch (error) {\n            console.log(\"Erreur lors du rechargement du logo\");\n          }\n        }\n\n        // Notification de succès\n        Swal.fire({\n          title: \"Succès !\",\n          text: \"Les paramètres de l'établissement ont été mis à jour.\",\n          icon: \"success\",\n          confirmButtonText: \"OK\",\n        });\n      } else {\n        setError(response.message || \"Erreur lors de la mise à jour\");\n      }\n    } catch (error) {\n      setError(\"Erreur lors de la mise à jour des paramètres\");\n      console.error(\"Error updating settings:\", error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const testWhatsApp = async () => {\n    try {\n      setTestingWhatsApp(true);\n      setError(\"\");\n      setSuccess(\"\");\n\n      const response = await secureApiEndpoints.schoolSettings.testWhatsApp();\n\n      if (response.success) {\n        setSuccess(response.message);\n        Swal.fire({\n          title: \"Test réussi !\",\n          text: response.message,\n          icon: \"success\",\n          confirmButtonText: \"OK\",\n        });\n      } else {\n        setError(response.message);\n        Swal.fire({\n          title: \"Test échoué\",\n          text: response.message,\n          icon: \"error\",\n          confirmButtonText: \"OK\",\n        });\n      }\n    } catch (error) {\n      const errorMessage = \"Erreur lors du test WhatsApp\";\n      setError(errorMessage);\n      Swal.fire({\n        title: \"Erreur\",\n        text: errorMessage,\n        icon: \"error\",\n        confirmButtonText: \"OK\",\n      });\n    } finally {\n      setTestingWhatsApp(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Container fluid className=\"py-4\">\n        <div className=\"text-center\">\n          <Spinner animation=\"border\" role=\"status\">\n            <span className=\"visually-hidden\">Chargement...</span>\n          </Spinner>\n        </div>\n      </Container>\n    );\n  }\n\n  return (\n    <Container fluid className=\"py-4\">\n      {/* Header */}\n      <Row className=\"mb-4\">\n        <Col>\n          <h2>Paramètres de l'Établissement</h2>\n          <p className=\"text-muted\">\n            Configurez les informations générales de votre établissement\n          </p>\n        </Col>\n      </Row>\n\n      {/* Alerts */}\n      {error && (\n        <Alert variant=\"danger\" dismissible onClose={() => setError(\"\")}>\n          {error}\n        </Alert>\n      )}\n      {success && (\n        <Alert variant=\"success\" dismissible onClose={() => setSuccess(\"\")}>\n          {success}\n        </Alert>\n      )}\n\n      <Form onSubmit={handleSubmit}>\n        <Row>\n          {/* Informations générales */}\n          <Col lg={8}>\n            <Card className=\"mb-4\">\n              <Card.Header>\n                <h5 className=\"mb-0 d-flex align-items-center gap-1\">\n                  <Building className=\"me-2\" />\n                  Informations Générales\n                </h5>\n              </Card.Header>\n              <Card.Body>\n                <Row>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Nom de l'établissement *</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        value={settings.school_name}\n                        onChange={(e) =>\n                          handleInputChange(\"school_name\", e.target.value)\n                        }\n                        required\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Devise</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        value={settings.school_motto}\n                        onChange={(e) =>\n                          handleInputChange(\"school_motto\", e.target.value)\n                        }\n                        placeholder=\"Ex: Excellence et Discipline\"\n                      />\n                    </Form.Group>\n                  </Col>\n                </Row>\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label>Nom du Principal/Directeur</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    value={settings.principal_name}\n                    onChange={(e) =>\n                      handleInputChange(\"principal_name\", e.target.value)\n                    }\n                    placeholder=\"Ex: M. Jean DUPONT\"\n                  />\n                  <Form.Text className=\"text-muted\">\n                    Ce nom apparaîtra sur les certificats de scolarité\n                  </Form.Text>\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label className=\" d-flex align-items-center gap-1\">\n                    <GeoAlt className=\"me-1\" />\n                    Adresse complète\n                  </Form.Label>\n                  <Form.Control\n                    as=\"textarea\"\n                    rows={3}\n                    value={settings.school_address}\n                    onChange={(e) =>\n                      handleInputChange(\"school_address\", e.target.value)\n                    }\n                    placeholder=\"Adresse complète de l'établissement\"\n                  />\n                </Form.Group>\n\n                <Row>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                  <Form.Label className=\" d-flex align-items-center gap-1\">\n                        <Telephone className=\"me-1\" />\n                        Téléphone\n                      </Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        value={settings.school_phone}\n                        onChange={(e) =>\n                          handleInputChange(\"school_phone\", e.target.value)\n                        }\n                        placeholder=\"Ex: 233 43 25 47\"\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                  <Form.Label className=\" d-flex align-items-center gap-1\">\n                        <Envelope className=\"me-1\" />\n                        Email\n                      </Form.Label>\n                      <Form.Control\n                        type=\"email\"\n                        value={settings.school_email}\n                        onChange={(e) =>\n                          handleInputChange(\"school_email\", e.target.value)\n                        }\n                        placeholder=\"contact@ecole.com\"\n                      />\n                    </Form.Group>\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                    <Form.Label className=\" d-flex align-items-center gap-1\">\n                        <Globe className=\"me-1\" />\n                        Site Web\n                      </Form.Label>\n                      <Form.Control\n                        type=\"url\"\n                        value={settings.school_website}\n                        onChange={(e) =>\n                          handleInputChange(\"school_website\", e.target.value)\n                        }\n                        placeholder=\"www.ecole.com\"\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                    <Form.Label className=\" d-flex align-items-center gap-1\">\n                        <CurrencyDollar className=\"me-1\" />\n                        Monnaie\n                      </Form.Label>\n                      <Form.Select\n                        value={settings.currency}\n                        onChange={(e) =>\n                          handleInputChange(\"currency\", e.target.value)\n                        }\n                      >\n                        <option value=\"FCFA\">FCFA</option>\n                        <option value=\"EUR\">EUR</option>\n                        <option value=\"USD\">USD</option>\n                        <option value=\"XAF\">XAF</option>\n                      </Form.Select>\n                    </Form.Group>\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Nom de la banque</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        value={settings.bank_name}\n                        onChange={(e) =>\n                          handleInputChange(\"bank_name\", e.target.value)\n                        }\n                        placeholder=\"Ex: FIGEC\"\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col md={3}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Pays</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        value={settings.country}\n                        onChange={(e) =>\n                          handleInputChange(\"country\", e.target.value)\n                        }\n                        placeholder=\"Ex: Cameroun\"\n                      />\n                    </Form.Group>\n                  </Col>\n                  <Col md={3}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Ville</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        value={settings.city}\n                        onChange={(e) =>\n                          handleInputChange(\"city\", e.target.value)\n                        }\n                        placeholder=\"Ex: Douala\"\n                      />\n                    </Form.Group>\n                  </Col>\n                </Row>\n              </Card.Body>\n            </Card>\n\n            {/* Paramètres financiers */}\n            <Card className=\"mb-4\">\n              <Card.Header>\n                <h5 className=\"mb-0 d-flex align-items-center gap-1\">\n                  <CurrencyDollar className=\"me-2\" />\n                  Paramètres Financiers\n                </h5>\n              </Card.Header>\n              <Card.Body>\n                <Row>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                    <Form.Label className=\" d-flex align-items-center gap-1\">\n                        <Calendar className=\"me-1\" />\n                        Date limite pour bourses/réductions\n                      </Form.Label>\n                      <Form.Control\n                        type=\"date\"\n                        value={settings.scholarship_deadline}\n                        onChange={(e) =>\n                          handleInputChange(\n                            \"scholarship_deadline\",\n                            e.target.value\n                          )\n                        }\n                      />\n                      <Form.Text className=\"text-muted\">\n                        Les étudiants doivent payer avant cette date pour\n                        bénéficier des bourses et réductions\n                      </Form.Text>\n                    </Form.Group>\n                  </Col>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label className=\" d-flex align-items-center gap-1\">\n                        <Percent className=\"me-1\" />\n                        Pourcentage de réduction (%)\n                      </Form.Label>\n                      <Form.Control\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"100\"\n                        step=\"0.01\"\n                        value={settings.reduction_percentage}\n                        onChange={(e) =>\n                          handleInputChange(\n                            \"reduction_percentage\",\n                            parseFloat(e.target.value) || 0\n                          )\n                        }\n                      />\n                      <Form.Text className=\"text-muted\">\n                        Réduction appliquée aux anciens élèves et aux nouveaux\n                        payant avant délai\n                      </Form.Text>\n                    </Form.Group>\n                  </Col>\n                </Row>\n              </Card.Body>\n            </Card>\n\n            {/* Configuration WhatsApp */}\n            <Card className=\"mb-4\">\n              <Card.Header>\n                <h5 className=\"mb-0 d-flex align-items-center gap-1\">\n                  <Whatsapp className=\"me-2\" />\n                  Notifications WhatsApp\n                </h5>\n              </Card.Header>\n              <Card.Body>\n                <Row className=\"mb-3\">\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label className=\" d-flex align-items-center gap-1\">\n                        <Telephone className=\"me-1\" />\n                        Numéro WhatsApp pour notifications\n                      </Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        value={settings.whatsapp_notification_number}\n                        onChange={(e) =>\n                          handleInputChange(\n                            \"whatsapp_notification_number\",\n                            e.target.value\n                          )\n                        }\n                        placeholder=\"Ex: +237 6XX XX XX XX\"\n                      />\n                      <Form.Text className=\"text-muted\">\n                        Ce numéro recevra les notifications\n                      </Form.Text>\n                    </Form.Group>\n                  </Col>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>État des notifications</Form.Label>\n                      <div>\n                        <Form.Check\n                          type=\"switch\"\n                          id=\"whatsapp-notifications-switch\"\n                          label={\n                            settings.whatsapp_notifications_enabled\n                              ? \"Activées\"\n                              : \"Désactivées\"\n                          }\n                          checked={settings.whatsapp_notifications_enabled}\n                          onChange={(e) =>\n                            handleInputChange(\n                              \"whatsapp_notifications_enabled\",\n                              e.target.checked\n                            )\n                          }\n                        />\n                      </div>\n                    </Form.Group>\n                  </Col>\n                </Row>\n\n                <div className=\"border-top pt-3 mb-3\">\n                  <h6 className=\"text-muted mb-3\">\n                    Configuration API UltraMsg\n                  </h6>\n                  <Row>\n                    <Col md={12}>\n                      <Form.Group className=\"mb-3\">\n                        <Form.Label>URL de l'API UltraMsg</Form.Label>\n                        <Form.Control\n                          type=\"url\"\n                          value={settings.whatsapp_api_url}\n                          onChange={(e) =>\n                            handleInputChange(\n                              \"whatsapp_api_url\",\n                              e.target.value\n                            )\n                          }\n                          placeholder=\"https://api.ultramsg.com\"\n                        />\n                        <Form.Text className=\"text-muted\">\n                          URL de base de l'API UltraMsg\n                        </Form.Text>\n                      </Form.Group>\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col md={6}>\n                      <Form.Group className=\"mb-3\">\n                        <Form.Label>Instance ID</Form.Label>\n                        <Form.Control\n                          type=\"text\"\n                          value={settings.whatsapp_instance_id}\n                          onChange={(e) =>\n                            handleInputChange(\n                              \"whatsapp_instance_id\",\n                              e.target.value\n                            )\n                          }\n                          placeholder=\"instanceXXXXX\"\n                        />\n                        <Form.Text className=\"text-muted\">\n                          ID de votre instance UltraMsg\n                        </Form.Text>\n                      </Form.Group>\n                    </Col>\n                    <Col md={6}>\n                      <Form.Group className=\"mb-3\">\n                        <Form.Label>Token API</Form.Label>\n                        <Form.Control\n                          type=\"password\"\n                          value={settings.whatsapp_token}\n                          onChange={(e) =>\n                            handleInputChange(\"whatsapp_token\", e.target.value)\n                          }\n                          placeholder=\"Votre token UltraMsg\"\n                        />\n                        <Form.Text className=\"text-muted\">\n                          Token d'authentification UltraMsg\n                        </Form.Text>\n                      </Form.Group>\n                    </Col>\n                  </Row>\n                </div>\n\n                {settings.whatsapp_notifications_enabled &&\n                  settings.whatsapp_notification_number &&\n                  settings.whatsapp_api_url &&\n                  settings.whatsapp_instance_id &&\n                  settings.whatsapp_token && (\n                    <div className=\"bg-light p-3 rounded\">\n                      <div className=\"d-flex justify-content-between align-items-center\">\n                        <div>\n                          <strong className=\"text-success\">\n                            ✅ Configuration complète\n                          </strong>\n                          <div className=\"text-muted small\">\n                            Tous les paramètres requis sont configurés\n                          </div>\n                        </div>\n                        <Button\n                          variant=\"outline-success\"\n                          size=\"sm\"\n                          onClick={testWhatsApp}\n                          disabled={testingWhatsApp}\n                        >\n                          {testingWhatsApp ? (\n                            <>\n                              <Spinner\n                                animation=\"border\"\n                                size=\"sm\"\n                                className=\"me-2\"\n                              />\n                              Test en cours...\n                            </>\n                          ) : (\n                            <>\n                              <Check2Circle className=\"me-2\" />\n                              Tester UltraMsg\n                            </>\n                          )}\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n\n                {settings.whatsapp_notifications_enabled &&\n                  (!settings.whatsapp_notification_number ||\n                    !settings.whatsapp_api_url ||\n                    !settings.whatsapp_instance_id ||\n                    !settings.whatsapp_token) && (\n                    <div className=\"alert alert-warning\">\n                      <strong>⚠️ Configuration incomplète</strong>\n                      <div>\n                        Veuillez remplir tous les champs pour activer les\n                        notifications WhatsApp.\n                      </div>\n                    </div>\n                  )}\n              </Card.Body>\n            </Card>\n\n            {/* Texte de pied de page */}\n            <Card className=\"mb-4\">\n              <Card.Header>\n                <h5 className=\"mb-0\">Texte de Pied de Page (Reçus)</h5>\n              </Card.Header>\n              <Card.Body>\n                <Form.Group>\n                  <Form.Control\n                    as=\"textarea\"\n                    rows={4}\n                    value={settings.footer_text}\n                    onChange={(e) =>\n                      handleInputChange(\"footer_text\", e.target.value)\n                    }\n                    placeholder=\"Texte qui apparaîtra au bas des reçus de paiement...\"\n                  />\n                </Form.Group>\n              </Card.Body>\n            </Card>\n          </Col>\n\n          {/* Logo */}\n          <Col lg={4}>\n            <Card className=\"mb-4\">\n              <Card.Header>\n                <h5 className=\"mb-0 d-flex align-items-center gap-1\">\n                  <Upload className=\"me-2\" />\n                  Logo de l'Établissement\n                </h5>\n              </Card.Header>\n              <Card.Body className=\"text-center\">\n                {logoPreview && (\n                  <div className=\"mb-3\">\n                    <Image\n                      src={logoPreview}\n                      alt=\"Logo\"\n                      thumbnail\n                      style={{ maxWidth: \"200px\", maxHeight: \"200px\" }}\n                    />\n                  </div>\n                )}\n\n                <Form.Group>\n                  <Form.Label>Choisir un nouveau logo</Form.Label>\n                  <Form.Control\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleLogoChange}\n                  />\n                  <Form.Text className=\"text-muted\">\n                    Formats acceptés: JPG, PNG, GIF. Taille max: 5MB\n                  </Form.Text>\n                </Form.Group>\n              </Card.Body>\n            </Card>\n\n            {/* Couleur primaire */}\n            <Card className=\"mb-4\">\n              <Card.Header>\n                <h5 className=\"mb-0\">\n                  <Palette className=\"me-2\" />\n                  Thème de l'Application\n                </h5>\n              </Card.Header>\n              <Card.Body>\n                <ColorPicker\n                  value={settings.primary_color}\n                  onChange={(color) =>\n                    handleInputChange(\"primary_color\", color)\n                  }\n                  label=\"Couleur principale de l'interface\"\n                />\n                <small className=\"text-muted\">\n                  Cette couleur sera appliquée aux boutons, liens et éléments\n                  principaux de l'interface.\n                </small>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n\n        {/* Boutons d'action */}\n        <Row>\n          <Col>\n            <div className=\"d-flex justify-content-end\">\n              <Button\n                variant=\"primary\"\n                type=\"submit\"\n                disabled={saving}\n                size=\"lg\"\n              >\n                {saving ? (\n                  <>\n                    <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />\n                    Sauvegarde...\n                  </>\n                ) : (\n                  <>\n                    <Save className=\"me-2\" />\n                    Sauvegarder les Paramètres\n                  </>\n                )}\n              </Button>\n            </div>\n          </Col>\n        </Row>\n      </Form>\n    </Container>\n  );\n};\n\nexport default SchoolSettings;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}