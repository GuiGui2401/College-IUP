{"ast":null,"code":"import React,{useState}from'react';import{Link,useLocation}from'react-router-dom';import{Search,Bell,List,Globe,ChevronRight,Gear,PersonCircle,ChatDots}from'react-bootstrap-icons';import{useAuth,usePermissions}from'../hooks/useAuth';import UserMenu from'./UserMenu';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TopBar=_ref=>{let{onSidebarToggle,showSidebarToggle=false}=_ref;const location=useLocation();const[searchQuery,setSearchQuery]=useState('');const[showNotifications,setShowNotifications]=useState(false);// Hooks d'authentification\nconst{user,isAuthenticated}=useAuth();const{canManageUsers,canAccess}=usePermissions();const getBreadcrumb=()=>{const path=location.pathname;const segments=path.split('/').filter(segment=>segment);const breadcrumbMap={'':'Accueil','class':'Classes','teachers':'Enseignants','students':'Élèves','matieres':'Matières','search':'Recherche','params':'Profil','profile':'Profil','settings':'Paramètres','docs':'Documents','stats':'Statistiques','seqs':'Séquences','trims':'Trimestres','competences':'Compétences','login':'Connexion','register':'Inscription'};if(segments.length===0){return[{name:'Accueil',path:'/'}];}const breadcrumbs=[{name:'Accueil',path:'/'}];segments.forEach((segment,index)=>{const path='/'+segments.slice(0,index+1).join('/');const name=breadcrumbMap[segment]||segment;breadcrumbs.push({name,path});});return breadcrumbs;};const handleSearch=e=>{e.preventDefault();if(searchQuery.trim()){window.location.href=`/search?q=${encodeURIComponent(searchQuery)}`;}};const breadcrumbs=getBreadcrumb();return/*#__PURE__*/_jsxs(\"div\",{className:\"topbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topbar-left\",children:[showSidebarToggle&&/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-toggle\",onClick:onSidebarToggle,\"aria-label\":\"Toggle sidebar\",children:/*#__PURE__*/_jsx(List,{size:20})}),/*#__PURE__*/_jsx(\"nav\",{className:\"breadcrumb\",children:breadcrumbs.map((crumb,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[index>0&&/*#__PURE__*/_jsx(ChevronRight,{className:\"breadcrumb-separator\",size:14}),/*#__PURE__*/_jsx(\"span\",{className:`breadcrumb-item ${index===breadcrumbs.length-1?'active':''}`,children:index===breadcrumbs.length-1?crumb.name:/*#__PURE__*/_jsx(Link,{to:crumb.path,children:crumb.name})})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"topbar-right\",children:[isAuthenticated&&user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(Search,{className:\"search-icon\",size:16}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSearch,children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"Rechercher \\xE9l\\xE8ves, enseignants...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"topbar-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn\",title:\"Langue\",children:/*#__PURE__*/_jsx(Globe,{size:18})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn has-notification\",title:\"Notifications\",onClick:()=>setShowNotifications(!showNotifications),children:/*#__PURE__*/_jsx(Bell,{size:18})}),showNotifications&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 top-12 w-80 bg-white rounded-xl shadow-xl border border-gray-200 z-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800\",children:\"Notifications\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center text-gray-500\",children:\"Aucune nouvelle notification\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn\",title:\"Messages\",children:/*#__PURE__*/_jsx(ChatDots,{size:18})}),canManageUsers()&&/*#__PURE__*/_jsx(Link,{to:\"/settings\",className:\"action-btn\",title:\"Param\\xE8tres\",children:/*#__PURE__*/_jsx(Gear,{size:18})}),/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"action-btn\",title:\"Profil\",children:/*#__PURE__*/_jsx(PersonCircle,{size:18})}),/*#__PURE__*/_jsx(UserMenu,{className:\"ml-2\"})]})]}),!isAuthenticated&&/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn btn-secondary\",children:\"Connexion\"})})]})]});};export default TopBar;","map":{"version":3,"names":["React","useState","Link","useLocation","Search","Bell","List","Globe","ChevronRight","Gear","PersonCircle","ChatDots","useAuth","usePermissions","UserMenu","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TopBar","_ref","onSidebarToggle","showSidebarToggle","location","searchQuery","setSearchQuery","showNotifications","setShowNotifications","user","isAuthenticated","canManageUsers","canAccess","getBreadcrumb","path","pathname","segments","split","filter","segment","breadcrumbMap","length","name","breadcrumbs","forEach","index","slice","join","push","handleSearch","e","preventDefault","trim","window","href","encodeURIComponent","className","children","onClick","size","map","crumb","to","onSubmit","type","placeholder","value","onChange","target","title"],"sources":["/var/www/College-IUP/front/src/components/TopBar.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { \n    Search, \n    Bell, \n    List,\n    Globe,\n    ChevronRight,\n    Gear,\n    PersonCircle,\n    ChatDots\n} from 'react-bootstrap-icons';\nimport { useAuth, usePermissions } from '../hooks/useAuth';\nimport UserMenu from './UserMenu';\nconst TopBar = ({ onSidebarToggle, showSidebarToggle = false }) => {\n    const location = useLocation();\n    const [searchQuery, setSearchQuery] = useState('');\n    const [showNotifications, setShowNotifications] = useState(false);\n    \n    // Hooks d'authentification\n    const { user, isAuthenticated } = useAuth();\n    const { canManageUsers, canAccess } = usePermissions();\n    const getBreadcrumb = () => {\n        const path = location.pathname;\n        const segments = path.split('/').filter(segment => segment);\n        \n        const breadcrumbMap = {\n            '': 'Accueil',\n            'class': 'Classes',\n            'teachers': 'Enseignants',\n            'students': 'Élèves',\n            'matieres': 'Matières',\n            'search': 'Recherche',\n            'params': 'Profil',\n            'profile': 'Profil',\n            'settings': 'Paramètres',\n            'docs': 'Documents',\n            'stats': 'Statistiques',\n            'seqs': 'Séquences',\n            'trims': 'Trimestres',\n            'competences': 'Compétences',\n            'login': 'Connexion',\n            'register': 'Inscription'\n        };\n\n        if (segments.length === 0) {\n            return [{ name: 'Accueil', path: '/' }];\n        }\n\n        const breadcrumbs = [{ name: 'Accueil', path: '/' }];\n        \n        segments.forEach((segment, index) => {\n            const path = '/' + segments.slice(0, index + 1).join('/');\n            const name = breadcrumbMap[segment] || segment;\n            breadcrumbs.push({ name, path });\n        });\n\n        return breadcrumbs;\n    };\n\n    const handleSearch = (e) => {\n        e.preventDefault();\n        if (searchQuery.trim()) {\n            window.location.href = `/search?q=${encodeURIComponent(searchQuery)}`;\n        }\n    };\n    const breadcrumbs = getBreadcrumb();\n\n    return (\n        <div className=\"topbar\">\n            <div className=\"topbar-left\">\n                {showSidebarToggle && (\n                    <button \n                        className=\"sidebar-toggle\"\n                        onClick={onSidebarToggle}\n                        aria-label=\"Toggle sidebar\"\n                    >\n                        <List size={20} />\n                    </button>\n                )}\n                \n                <nav className=\"breadcrumb\">\n                    {breadcrumbs.map((crumb, index) => (\n                        <React.Fragment key={index}>\n                            {index > 0 && (\n                                <ChevronRight className=\"breadcrumb-separator\" size={14} />\n                            )}\n                            <span className={`breadcrumb-item ${index === breadcrumbs.length - 1 ? 'active' : ''}`}>\n                                {index === breadcrumbs.length - 1 ? (\n                                    crumb.name\n                                ) : (\n                                    <Link to={crumb.path}>{crumb.name}</Link>\n                                )}\n                            </span>\n                        </React.Fragment>\n                    ))}\n                </nav>\n            </div>\n\n            <div className=\"topbar-right\">\n                {isAuthenticated && user && (\n                    <>\n                        {/* Search Box */}\n                        <div className=\"search-box\">\n                            <Search className=\"search-icon\" size={16} />\n                            <form onSubmit={handleSearch}>\n                                <input\n                                    type=\"text\"\n                                    className=\"search-input\"\n                                    placeholder=\"Rechercher élèves, enseignants...\"\n                                    value={searchQuery}\n                                    onChange={(e) => setSearchQuery(e.target.value)}\n                                />\n                            </form>\n                        </div>\n\n                        <div className=\"topbar-actions\">\n                            {/* Language Selector */}\n                            <button className=\"action-btn\" title=\"Langue\">\n                                <Globe size={18} />\n                            </button>\n\n                            {/* Notifications */}\n                            <div className=\"relative\">\n                                <button \n                                    className=\"action-btn has-notification\" \n                                    title=\"Notifications\"\n                                    onClick={() => setShowNotifications(!showNotifications)}\n                                >\n                                    <Bell size={18} />\n                                </button>\n                                {showNotifications && (\n                                    <div className=\"absolute right-0 top-12 w-80 bg-white rounded-xl shadow-xl border border-gray-200 z-50\">\n                                        <div className=\"p-4 border-b border-gray-200\">\n                                            <h3 className=\"font-semibold text-gray-800\">Notifications</h3>\n                                        </div>\n                                        <div className=\"p-4 text-center text-gray-500\">\n                                            Aucune nouvelle notification\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n\n                            {/* Messages */}\n                            <button className=\"action-btn\" title=\"Messages\">\n                                <ChatDots size={18} />\n                            </button>\n\n                            {/* Settings - seulement pour les admins */}\n                            {canManageUsers() && (\n                                <Link to=\"/settings\" className=\"action-btn\" title=\"Paramètres\">\n                                    <Gear size={18} />\n                                </Link>\n                            )}\n\n                            {/* User Profile */}\n                            <Link to=\"/profile\" className=\"action-btn\" title=\"Profil\">\n                                <PersonCircle size={18} />\n                            </Link>\n\n                            {/* Menu utilisateur avec déconnexion */}\n                            <UserMenu className=\"ml-2\" />\n                        </div>\n                    </>\n                )}\n\n                {!isAuthenticated && (\n                    <div className=\"flex gap-2\">\n                        <Link to=\"/login\" className=\"btn btn-secondary\">\n                            Connexion\n                        </Link>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default TopBar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}