{"ast":null,"code":"import{useCallback,useEffect,useMemo,useState}from\"react\";import{Alert,Badge,Button,Card,Col,Container,Form,Nav,Pagination,Row,Spinner,Tab,Table}from\"react-bootstrap\";import{ArrowDown,ArrowDownUp,ArrowUp,BarChart,Building,Calendar,CashCoin,Download,FileEarmarkText,FileText,Search}from\"react-bootstrap-icons\";import Swal from\"sweetalert2\";import*as XLSX from\"xlsx\";import{useSchool}from\"../contexts/SchoolContext\";import{secureApiEndpoints}from\"../utils/apiMigration\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Reports=()=>{const{schoolSettings,formatCurrency}=useSchool();const[activeTab,setActiveTab]=useState(\"insolvable\");const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const[reportData,setReportData]=useState(null);const[reportCache,setReportCache]=useState(new Map());const[sortConfig,setSortConfig]=useState({key:null,direction:null});const[currentPage,setCurrentPage]=useState(1);const[itemsPerPage,setItemsPerPage]=useState(10);// États pour les filtres\nconst[filters,setFilters]=useState({// Filtres spécifiques (peuvent être utilisés simultanément)\nsectionId:\"\",classId:\"\",seriesId:\"\",// Filtres par dates\nstartDate:\"\",endDate:\"\"});const[availableOptions,setAvailableOptions]=useState({sections:[],classes:[],series:[]});useEffect(()=>{loadAvailableOptions();},[]);const loadAvailableOptions=async()=>{try{// Charger les sections, classes et toutes les séries\nconst[sectionsRes,classesRes]=await Promise.all([secureApiEndpoints.sections.getAll(),secureApiEndpoints.accountant.getClasses()// Utilise getClasses qui donne plus d'infos\n]);// S'assurer que les données sont des tableaux\nconst sections=sectionsRes.success&&Array.isArray(sectionsRes.data)?sectionsRes.data:[];// Classes avec leurs relations complètes\nconst classesData=classesRes.success&&classesRes.data?classesRes.data:{};const classes=Array.isArray(classesData.classes)?classesData.classes:[];// Extraire toutes les séries des classes\nlet allSeries=[];classes.forEach(schoolClass=>{if(schoolClass.series&&Array.isArray(schoolClass.series)){schoolClass.series.forEach(series=>{var _schoolClass$level,_schoolClass$level$se,_schoolClass$level2,_schoolClass$level2$s,_schoolClass$level3,_schoolClass$level3$s;allSeries.push({...series,section_id:schoolClass===null||schoolClass===void 0?void 0:(_schoolClass$level=schoolClass.level)===null||_schoolClass$level===void 0?void 0:(_schoolClass$level$se=_schoolClass$level.section)===null||_schoolClass$level$se===void 0?void 0:_schoolClass$level$se.id,section_name:schoolClass===null||schoolClass===void 0?void 0:(_schoolClass$level2=schoolClass.level)===null||_schoolClass$level2===void 0?void 0:(_schoolClass$level2$s=_schoolClass$level2.section)===null||_schoolClass$level2$s===void 0?void 0:_schoolClass$level2$s.name,class_id:schoolClass===null||schoolClass===void 0?void 0:schoolClass.id,class_name:schoolClass===null||schoolClass===void 0?void 0:schoolClass.name,full_name:`${(schoolClass===null||schoolClass===void 0?void 0:(_schoolClass$level3=schoolClass.level)===null||_schoolClass$level3===void 0?void 0:(_schoolClass$level3$s=_schoolClass$level3.section)===null||_schoolClass$level3$s===void 0?void 0:_schoolClass$level3$s.name)||''} - ${(schoolClass===null||schoolClass===void 0?void 0:schoolClass.name)||''} - ${series.name||''}`});});}});console.log('Loaded options:',{sections:sections.length,classes:classes.length,series:allSeries.length});console.log('Series data:',allSeries);setAvailableOptions({sections,classes,series:allSeries});}catch(error){console.error(\"Error loading options:\",error);}};// Fonction pour générer une clé de cache unique\nconst generateCacheKey=useCallback((reportType,filters)=>{return`${reportType}_${JSON.stringify(filters)}`;},[]);// Fonction pour vérifier si les données sont en cache\nconst getCachedReport=useCallback(cacheKey=>{const cached=reportCache.get(cacheKey);if(cached){// Vérifier si le cache a moins de 5 minutes\nconst isExpired=Date.now()-cached.timestamp>5*60*1000;if(!isExpired){return cached.data;}else{// Supprimer le cache expiré\nsetReportCache(prev=>{const newCache=new Map(prev);newCache.delete(cacheKey);return newCache;});}}return null;},[reportCache]);// Fonction pour mettre en cache un rapport\nconst cacheReport=useCallback((cacheKey,data)=>{setReportCache(prev=>{const newCache=new Map(prev);newCache.set(cacheKey,{data,timestamp:Date.now()});return newCache;});},[]);// Fonction pour trier les données\nconst sortData=useCallback((data,key,direction)=>{if(!data||!Array.isArray(data))return data;return[...data].sort((a,b)=>{let aVal=key.split(\".\").reduce((obj,k)=>obj===null||obj===void 0?void 0:obj[k],a);let bVal=key.split(\".\").reduce((obj,k)=>obj===null||obj===void 0?void 0:obj[k],b);// Gérer les valeurs nulles/undefined\nif(aVal==null)aVal=\"\";if(bVal==null)bVal=\"\";// Conversion automatique pour les nombres\nif(typeof aVal===\"string\"&&!isNaN(parseFloat(aVal))){aVal=parseFloat(aVal);bVal=parseFloat(bVal);}if(direction===\"asc\"){return aVal>bVal?1:aVal<bVal?-1:0;}else{return aVal<bVal?1:aVal>bVal?-1:0;}});},[]);// Fonction pour gérer le clic sur un en-tête de colonne\nconst handleSort=useCallback(key=>{let direction=\"asc\";if(sortConfig.key===key&&sortConfig.direction===\"asc\"){direction=\"desc\";}else if(sortConfig.key===key&&sortConfig.direction===\"desc\"){direction=null;}setSortConfig({key,direction});},[sortConfig]);// Fonction pour obtenir l'icône de tri\nconst getSortIcon=useCallback(columnKey=>{if(sortConfig.key!==columnKey){return/*#__PURE__*/_jsx(ArrowDownUp,{className:\"ms-1 text-muted\",size:12});}if(sortConfig.direction===\"asc\"){return/*#__PURE__*/_jsx(ArrowUp,{className:\"ms-1 text-primary\",size:12});}if(sortConfig.direction===\"desc\"){return/*#__PURE__*/_jsx(ArrowDown,{className:\"ms-1 text-primary\",size:12});}return/*#__PURE__*/_jsx(ArrowDownUp,{className:\"ms-1 text-muted\",size:12});},[sortConfig]);// Composant d'en-tête triable\nconst SortableHeader=useCallback(_ref=>{let{children,sortKey,className=\"\"}=_ref;return/*#__PURE__*/_jsxs(\"th\",{className:`sortable-header ${className}`,onClick:()=>handleSort(sortKey),style:{cursor:\"pointer\",userSelect:\"none\"},children:[children,getSortIcon(sortKey)]});},[handleSort,getSortIcon]);// Hook pour obtenir les données triées\nconst sortedReportData=useMemo(()=>{if(!reportData||!sortConfig.key||!sortConfig.direction){return reportData;}const newData={...reportData};// Trier différents types de données selon le rapport\nif(newData.students&&Array.isArray(newData.students)){newData.students=sortData(newData.students,sortConfig.key,sortConfig.direction);}if(newData.classes&&Array.isArray(newData.classes)){newData.classes=sortData(newData.classes,sortConfig.key,sortConfig.direction);}if(newData.periods&&Array.isArray(newData.periods)){newData.periods=sortData(newData.periods,sortConfig.key,sortConfig.direction);}return newData;},[reportData,sortConfig,sortData]);// Fonctions de pagination\nconst paginateData=useCallback((data,page,perPage)=>{if(!data||!Array.isArray(data))return data;const startIndex=(page-1)*perPage;const endIndex=startIndex+perPage;return data.slice(startIndex,endIndex);},[]);// Hook pour obtenir les données paginées\nconst paginatedReportData=useMemo(()=>{if(!sortedReportData)return sortedReportData;const newData={...sortedReportData};// Paginer différents types de données selon le rapport\nif(newData.students&&Array.isArray(newData.students)){newData.students=paginateData(newData.students,currentPage,itemsPerPage);newData.totalStudents=sortedReportData.students.length;}if(newData.classes&&Array.isArray(newData.classes)){newData.classes=paginateData(newData.classes,currentPage,itemsPerPage);newData.totalClasses=sortedReportData.classes.length;}if(newData.periods&&Array.isArray(newData.periods)){newData.periods=paginateData(newData.periods,currentPage,itemsPerPage);newData.totalPeriods=sortedReportData.periods.length;}return newData;},[sortedReportData,currentPage,itemsPerPage,paginateData]);// Fonction pour calculer le nombre total de pages\nconst getTotalPages=useCallback(dataArray=>{if(!dataArray||!Array.isArray(dataArray))return 1;return Math.ceil(dataArray.length/itemsPerPage);},[itemsPerPage]);// Composant de pagination\nconst PaginationControls=useCallback(_ref2=>{let{dataArray,dataType=\"éléments\"}=_ref2;const totalPages=getTotalPages(dataArray);const totalItems=(dataArray===null||dataArray===void 0?void 0:dataArray.length)||0;if(totalPages<=1)return null;const startItem=(currentPage-1)*itemsPerPage+1;const endItem=Math.min(currentPage*itemsPerPage,totalItems);return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Affichage de \",startItem,\" \\xE0 \",endItem,\" sur \",totalItems,\" \",dataType]}),/*#__PURE__*/_jsxs(Form.Select,{size:\"sm\",value:itemsPerPage,onChange:e=>{setItemsPerPage(Number(e.target.value));setCurrentPage(1);},style:{width:\"auto\"},children:[/*#__PURE__*/_jsx(\"option\",{value:5,children:\"5 par page\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10 par page\"}),/*#__PURE__*/_jsx(\"option\",{value:25,children:\"25 par page\"}),/*#__PURE__*/_jsx(\"option\",{value:50,children:\"50 par page\"}),/*#__PURE__*/_jsx(\"option\",{value:100,children:\"100 par page\"})]})]}),/*#__PURE__*/_jsxs(Pagination,{size:\"sm\",className:\"mb-0\",children:[/*#__PURE__*/_jsx(Pagination.First,{onClick:()=>setCurrentPage(1),disabled:currentPage===1}),/*#__PURE__*/_jsx(Pagination.Prev,{onClick:()=>setCurrentPage(Math.max(1,currentPage-1)),disabled:currentPage===1}),[...Array(Math.min(5,totalPages))].map((_,index)=>{let pageNumber;if(totalPages<=5){pageNumber=index+1;}else if(currentPage<=3){pageNumber=index+1;}else if(currentPage>=totalPages-2){pageNumber=totalPages-4+index;}else{pageNumber=currentPage-2+index;}return/*#__PURE__*/_jsx(Pagination.Item,{active:pageNumber===currentPage,onClick:()=>setCurrentPage(pageNumber),children:pageNumber},pageNumber);}),/*#__PURE__*/_jsx(Pagination.Next,{onClick:()=>setCurrentPage(Math.min(totalPages,currentPage+1)),disabled:currentPage===totalPages}),/*#__PURE__*/_jsx(Pagination.Last,{onClick:()=>setCurrentPage(totalPages),disabled:currentPage===totalPages})]})]});},[currentPage,itemsPerPage,getTotalPages]);// Reset pagination when changing tabs or filters\nuseEffect(()=>{setCurrentPage(1);},[activeTab,filters]);// Fonctions d'export Excel\nconst exportToExcel=useCallback((data,reportType)=>{if(!data){Swal.fire(\"Erreur\",\"Aucune donnée à exporter\",\"error\");return;}const workbook=XLSX.utils.book_new();const fileName=`rapport_${reportType}_${new Date().toISOString().split(\"T\")[0]}.xlsx`;// Fonction pour nettoyer et convertir les données\nconst cleanValue=value=>{if(value===null||value===undefined)return\"\";if(typeof value===\"object\")return JSON.stringify(value);return value;};try{switch(reportType){case\"insolvable\":if(data.students&&Array.isArray(data.students)){const studentsData=data.students.map(student=>{var _student$student,_student$student2,_student$incomplete_t;return{Étudiant:cleanValue(student===null||student===void 0?void 0:(_student$student=student.student)===null||_student$student===void 0?void 0:_student$student.full_name),\"Classe/Série\":cleanValue(student===null||student===void 0?void 0:(_student$student2=student.student)===null||_student$student2===void 0?void 0:_student$student2.class_series),\"Total Requis\":cleanValue(student===null||student===void 0?void 0:student.total_required),\"Total Payé\":cleanValue(student===null||student===void 0?void 0:student.total_paid),\"Reste à Payer\":cleanValue(student===null||student===void 0?void 0:student.total_remaining),\"Tranches Incomplètes\":(student===null||student===void 0?void 0:(_student$incomplete_t=student.incomplete_tranches)===null||_student$incomplete_t===void 0?void 0:_student$incomplete_t.map(t=>`${t===null||t===void 0?void 0:t.tranche_name}: ${t===null||t===void 0?void 0:t.paid_amount}/${t===null||t===void 0?void 0:t.required_amount}`).join(\", \"))||\"\"};});const worksheet=XLSX.utils.json_to_sheet(studentsData);XLSX.utils.book_append_sheet(workbook,worksheet,\"Élèves Insolvables\");}break;case\"payments\":if(data.students&&Array.isArray(data.students)){const paymentsData=data.students.map(student=>{var _student$student3,_student$student4;return{Étudiant:cleanValue(student===null||student===void 0?void 0:(_student$student3=student.student)===null||_student$student3===void 0?void 0:_student$student3.full_name),\"Classe/Série\":cleanValue(student===null||student===void 0?void 0:(_student$student4=student.student)===null||_student$student4===void 0?void 0:_student$student4.class_series),\"Total Requis\":cleanValue(student===null||student===void 0?void 0:student.total_required),\"Total Payé\":cleanValue(student===null||student===void 0?void 0:student.total_paid),Statut:cleanValue(student===null||student===void 0?void 0:student.status)};});const worksheet=XLSX.utils.json_to_sheet(paymentsData);XLSX.utils.book_append_sheet(workbook,worksheet,\"Paiements\");}break;case\"rame\":if(data.students&&Array.isArray(data.students)){const rameData=data.students.map(student=>{var _student$student5,_student$student6,_student$rame_details;return{Étudiant:cleanValue(student===null||student===void 0?void 0:(_student$student5=student.student)===null||_student$student5===void 0?void 0:_student$student5.full_name),\"Classe/Série\":cleanValue(student===null||student===void 0?void 0:(_student$student6=student.student)===null||_student$student6===void 0?void 0:_student$student6.class_series),\"Statut RAME\":cleanValue(student===null||student===void 0?void 0:student.rame_status),\"Date de Paiement\":cleanValue(student===null||student===void 0?void 0:(_student$rame_details=student.rame_details)===null||_student$rame_details===void 0?void 0:_student$rame_details.payment_date)};});const worksheet=XLSX.utils.json_to_sheet(rameData);XLSX.utils.book_append_sheet(workbook,worksheet,\"État RAME\");}break;case\"scholarships_discounts\":if(data.students&&Array.isArray(data.students)){const scholarshipsData=data.students.map(student=>{var _student$student7,_student$student8;return{Étudiant:cleanValue(student===null||student===void 0?void 0:(_student$student7=student.student)===null||_student$student7===void 0?void 0:_student$student7.full_name),\"Classe/Série\":cleanValue(student===null||student===void 0?void 0:(_student$student8=student.student)===null||_student$student8===void 0?void 0:_student$student8.class_series),\"Type de Réduction\":cleanValue(student===null||student===void 0?void 0:student.discount_type),Montant:cleanValue(student===null||student===void 0?void 0:student.discount_amount),Pourcentage:cleanValue(student!==null&&student!==void 0&&student.discount_percentage?`${student.discount_percentage}%`:\"\")};});const worksheet=XLSX.utils.json_to_sheet(scholarshipsData);XLSX.utils.book_append_sheet(workbook,worksheet,\"Bourses et Rabais\");}break;case\"collection_details\":if(data.collections&&Array.isArray(data.collections)){const collectionsData=data.collections.map(collection=>{var _collection$student,_collection$student2,_collection$student3,_collection$student4;return{Matricule:cleanValue(collection===null||collection===void 0?void 0:(_collection$student=collection.student)===null||_collection$student===void 0?void 0:_collection$student.matricule),Nom:cleanValue(collection===null||collection===void 0?void 0:(_collection$student2=collection.student)===null||_collection$student2===void 0?void 0:_collection$student2.last_name),Prénom:cleanValue(collection===null||collection===void 0?void 0:(_collection$student3=collection.student)===null||_collection$student3===void 0?void 0:_collection$student3.first_name),Classe:cleanValue(collection===null||collection===void 0?void 0:(_collection$student4=collection.student)===null||_collection$student4===void 0?void 0:_collection$student4.class_name),\"Date de Versement\":cleanValue(collection===null||collection===void 0?void 0:collection.payment_date),\"Date de Validation\":collection!==null&&collection!==void 0&&collection.validated_at?cleanValue(collection.validated_at):\"En attente\",Montant:cleanValue(collection===null||collection===void 0?void 0:collection.amount),\"Nom du Comptable\":cleanValue(collection===null||collection===void 0?void 0:collection.validator_name),\"N° Reçu\":cleanValue(collection===null||collection===void 0?void 0:collection.receipt_number),Rabais:collection!==null&&collection!==void 0&&collection.has_reduction?cleanValue(collection===null||collection===void 0?void 0:collection.reduction_amount):0};});const worksheet=XLSX.utils.json_to_sheet(collectionsData);XLSX.utils.book_append_sheet(workbook,worksheet,\"Détail Encaissements\");// Ajouter une feuille de statistiques\nif(data.statistics){const statsData=[];// Statistiques par méthode\nif(data.statistics.by_payment_method){statsData.push([\"STATISTIQUES PAR MÉTHODE DE PAIEMENT\"]);statsData.push([\"Méthode\",\"Nombre\",\"Montant\"]);data.statistics.by_payment_method.forEach(method=>{statsData.push([method.label,method.count,method.total]);});statsData.push([]);}// Statistiques par tranche\nif(data.statistics.by_payment_tranche){statsData.push([\"STATISTIQUES PAR TRANCHE\"]);statsData.push([\"Tranche\",\"Nombre\",\"Montant\"]);data.statistics.by_payment_tranche.forEach(tranche=>{statsData.push([tranche.tranche_name,tranche.count,tranche.total]);});}const statsWorksheet=XLSX.utils.aoa_to_sheet(statsData);XLSX.utils.book_append_sheet(workbook,statsWorksheet,\"Statistiques\");}}break;default:throw new Error(\"Type de rapport non reconnu pour l'export Excel\");}// Télécharger le fichier\nXLSX.writeFile(workbook,fileName);Swal.fire({title:\"Export réussi !\",text:`Le fichier ${fileName} a été téléchargé`,icon:\"success\",timer:3000});}catch(error){console.error(\"Erreur lors de l'export Excel:\",error);Swal.fire(\"Erreur\",\"Erreur lors de l'export Excel\",\"error\");}},[]);const generateReport=async reportType=>{const cacheKey=generateCacheKey(reportType,filters);// Vérifier le cache d'abord\nconst cachedData=getCachedReport(cacheKey);if(cachedData){setReportData(cachedData);return;}setLoading(true);setError(\"\");try{let response;switch(reportType){case\"insolvable\":response=await secureApiEndpoints.reports.getInsolvableReport(filters);break;case\"payments\":response=await secureApiEndpoints.reports.getPaymentsReport(filters);break;case\"rame\":response=await secureApiEndpoints.reports.getRameReport(filters);break;case\"scholarships_discounts\":response=await secureApiEndpoints.reports.getScholarshipsDiscountsReport(filters);break;case\"collection_details\":response=await secureApiEndpoints.reports.getCollectionDetailsReport(filters);break;default:throw new Error(\"Type de rapport non reconnu\");}if(response.success){setReportData(response.data);// Mettre en cache les données\ncacheReport(cacheKey,response.data);}else{setError(response.message||\"Erreur lors de la génération du rapport\");}}catch(error){setError(\"Erreur lors de la génération du rapport\");console.error(\"Error generating report:\",error);}finally{setLoading(false);}};const exportReport=async function(){let format=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"pdf\";if(!reportData){Swal.fire(\"Erreur\",\"Aucun rapport à exporter\",\"error\");return;}try{Swal.fire({title:\"Export en cours...\",text:\"Génération du fichier PDF\",allowOutsideClick:false,showConfirmButton:false,willOpen:()=>{Swal.showLoading();}});// Préparer les paramètres pour l'export\nconst exportParams={...filters,report_type:activeTab};// Appeler l'API d'export PDF\nconst response=await secureApiEndpoints.reports.exportPdf(exportParams);if(response.success){// Ouvrir le HTML dans une nouvelle fenêtre pour impression/sauvegarde PDF\nconst printWindow=window.open(\"\",\"_blank\");printWindow.document.write(response.data);printWindow.document.close();// Attendre un peu que le contenu se charge puis déclencher l'impression\nsetTimeout(()=>{printWindow.focus();printWindow.print();},500);Swal.fire(\"Succès\",\"Rapport ouvert pour impression/sauvegarde PDF\",\"success\");}else{Swal.fire(\"Erreur\",response.message||\"Erreur lors de l'export PDF\",\"error\");}}catch(error){console.error(\"Error exporting PDF:\",error);Swal.fire(\"Erreur\",\"Erreur lors de l'export PDF\",\"error\");}};const renderFilterSection=()=>/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(Search,{className:\"me-2\"}),\"Filtres\"]})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Section\"}),/*#__PURE__*/_jsxs(Form.Select,{value:filters.sectionId,onChange:e=>{setFilters({...filters,sectionId:e.target.value,// Réinitialiser classe et série si section change\nclassId:\"\",seriesId:\"\"});},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Toutes les sections\"}),availableOptions.sections.map(section=>/*#__PURE__*/_jsx(\"option\",{value:section.id,children:section.name},section.id))]})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Classe\"}),/*#__PURE__*/_jsxs(Form.Select,{value:filters.classId,onChange:e=>{setFilters({...filters,classId:e.target.value,// Réinitialiser série si classe change\nseriesId:\"\"});},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Toutes les classes\"}),availableOptions.classes.filter(schoolClass=>{var _schoolClass$level4,_schoolClass$level4$s;// Si une section est sélectionnée, filtrer les classes de cette section\nif(!filters.sectionId)return true;return((_schoolClass$level4=schoolClass.level)===null||_schoolClass$level4===void 0?void 0:(_schoolClass$level4$s=_schoolClass$level4.section)===null||_schoolClass$level4$s===void 0?void 0:_schoolClass$level4$s.id)==filters.sectionId;}).map(schoolClass=>/*#__PURE__*/_jsx(\"option\",{value:schoolClass.id,children:schoolClass.name},schoolClass.id))]})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"S\\xE9rie\"}),/*#__PURE__*/_jsxs(Form.Select,{value:filters.seriesId,onChange:e=>{setFilters({...filters,seriesId:e.target.value});},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Toutes les s\\xE9ries\"}),availableOptions.series.filter(series=>{// Filtrer par section si sélectionnée\nif(filters.sectionId&&series.section_id!=filters.sectionId)return false;// Filtrer par classe si sélectionnée\nif(filters.classId&&series.class_id!=filters.classId)return false;return true;}).map(series=>/*#__PURE__*/_jsx(\"option\",{value:series.id,children:series.name},series.id))]})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date de d\\xE9but\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",value:filters.startDate,onChange:e=>{setFilters({...filters,startDate:e.target.value});}})]})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date de fin\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",value:filters.endDate,onChange:e=>{setFilters({...filters,endDate:e.target.value});}})]})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:()=>generateReport(activeTab),disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\",className:\"me-2\"}),\"G\\xE9n\\xE9ration...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FileEarmarkText,{className:\"me-2\"}),\"G\\xE9n\\xE9rer le rapport\"]})}),reportData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-success\",onClick:()=>exportReport(\"pdf\"),children:[/*#__PURE__*/_jsx(Download,{className:\"me-2\"}),\"Exporter PDF\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",onClick:()=>exportToExcel(sortedReportData,activeTab),children:[/*#__PURE__*/_jsx(FileText,{className:\"me-2\"}),\"Exporter Excel\"]})]}),(filters.sectionId||filters.classId||filters.seriesId)&&/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",onClick:()=>setFilters({sectionId:\"\",classId:\"\",seriesId:\"\",startDate:\"\",endDate:\"\"}),children:\"R\\xE9initialiser filtres\"})]})})]})]});const renderInsolvableReport=()=>{var _paginatedReportData$;return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\xC9tat Insolvable - \\xC9l\\xE8ves n'ayant pas fini de payer\"})}),/*#__PURE__*/_jsx(Card.Body,{children:paginatedReportData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Badge,{bg:\"info\",children:[\"Total des \\xE9l\\xE8ves insolvables:\",\" \",(paginatedReportData===null||paginatedReportData===void 0?void 0:paginatedReportData.total_insolvable_students)||0]})}),/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"student.full_name\",children:\"\\xC9tudiant\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"student.class_series\",children:\"Classe/S\\xE9rie\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"total_required\",children:\"Total Requis\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"total_paid\",children:\"Total Pay\\xE9\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"total_remaining\",children:\"Reste \\xE0 Payer\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tranches Incompl\\xE8tes\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_paginatedReportData$=paginatedReportData.students)===null||_paginatedReportData$===void 0?void 0:_paginatedReportData$.map((studentData,studentIndex)=>{var _studentData$student,_studentData$student2,_studentData$incomple;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:studentData===null||studentData===void 0?void 0:(_studentData$student=studentData.student)===null||_studentData$student===void 0?void 0:_studentData$student.full_name}),/*#__PURE__*/_jsx(\"td\",{children:studentData===null||studentData===void 0?void 0:(_studentData$student2=studentData.student)===null||_studentData$student2===void 0?void 0:_studentData$student2.class_series}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency((studentData===null||studentData===void 0?void 0:studentData.total_required)||0)}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency((studentData===null||studentData===void 0?void 0:studentData.total_paid)||0)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-danger\",children:formatCurrency((studentData===null||studentData===void 0?void 0:studentData.total_remaining)||0)}),/*#__PURE__*/_jsx(\"td\",{children:(_studentData$incomple=studentData.incomplete_tranches)===null||_studentData$incomple===void 0?void 0:_studentData$incomple.map((tranche,trancheIndex)=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[tranche===null||tranche===void 0?void 0:tranche.tranche_name,\":\"]}),\" \",formatCurrency((tranche===null||tranche===void 0?void 0:tranche.paid_amount)||0),\"/\",formatCurrency((tranche===null||tranche===void 0?void 0:tranche.required_amount)||0),/*#__PURE__*/_jsxs(\"span\",{className:\"text-danger\",children:[\" \",\"(reste:\",\" \",formatCurrency((tranche===null||tranche===void 0?void 0:tranche.remaining_amount)||0),\")\"]})]})},trancheIndex))})]},studentIndex);})})]}),/*#__PURE__*/_jsx(PaginationControls,{dataArray:sortedReportData===null||sortedReportData===void 0?void 0:sortedReportData.students,dataType:\"\\xE9l\\xE8ves insolvables\"})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted text-center\",children:\"G\\xE9n\\xE9rez un rapport pour voir les donn\\xE9es\"})})]});};const renderPaymentsReport=()=>{var _reportData$students;return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\xC9tat des Paiements - Tous les \\xE9l\\xE8ves avec infos toutes tranches\"})}),/*#__PURE__*/_jsx(Card.Body,{children:reportData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Badge,{bg:\"info\",children:[\"Total des \\xE9l\\xE8ves: \",(reportData===null||reportData===void 0?void 0:reportData.total_students)||0]})}),(_reportData$students=reportData.students)===null||_reportData$students===void 0?void 0:_reportData$students.map((studentData,studentIndex)=>{var _studentData$student3,_studentData$student4,_studentData$tranches;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 p-3 border rounded\",children:[/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-2\",children:[studentData===null||studentData===void 0?void 0:(_studentData$student3=studentData.student)===null||_studentData$student3===void 0?void 0:_studentData$student3.full_name,\" -\",\" \",studentData===null||studentData===void 0?void 0:(_studentData$student4=studentData.student)===null||_studentData$student4===void 0?void 0:_studentData$student4.class_series]}),/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Tranche\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Montant Requis\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Montant Pay\\xE9\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reste \\xE0 Payer\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Statut\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:studentData===null||studentData===void 0?void 0:(_studentData$tranches=studentData.tranches_details)===null||_studentData$tranches===void 0?void 0:_studentData$tranches.map((tranche,trancheIndex)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:tranche===null||tranche===void 0?void 0:tranche.tranche_name}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency((tranche===null||tranche===void 0?void 0:tranche.required_amount)||0)}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency((tranche===null||tranche===void 0?void 0:tranche.paid_amount)||0)}),/*#__PURE__*/_jsx(\"td\",{className:((tranche===null||tranche===void 0?void 0:tranche.remaining_amount)||0)>0?\"text-danger\":\"text-success\",children:formatCurrency((tranche===null||tranche===void 0?void 0:tranche.remaining_amount)||0)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:(tranche===null||tranche===void 0?void 0:tranche.status)===\"complete\"?\"success\":\"warning\",children:(tranche===null||tranche===void 0?void 0:tranche.status)===\"complete\"?\"Complet\":\"Incomplet\"})})]},trancheIndex))})]})]},studentIndex);})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted text-center\",children:\"G\\xE9n\\xE9rez un rapport pour voir les donn\\xE9es\"})})]});};const renderRameReport=()=>{var _paginatedReportData$2,_paginatedReportData$3,_paginatedReportData$4,_paginatedReportData$5,_paginatedReportData$6;return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\xC9tat RAME - Liste des \\xE9l\\xE8ves avec statut RAME\"})}),/*#__PURE__*/_jsx(Card.Body,{children:paginatedReportData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-primary\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-primary mb-0\",children:(paginatedReportData===null||paginatedReportData===void 0?void 0:(_paginatedReportData$2=paginatedReportData.summary)===null||_paginatedReportData$2===void 0?void 0:_paginatedReportData$2.total_students)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"Total \\xC9tudiants\"})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-success\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-success mb-0\",children:(paginatedReportData===null||paginatedReportData===void 0?void 0:(_paginatedReportData$3=paginatedReportData.summary)===null||_paginatedReportData$3===void 0?void 0:_paginatedReportData$3.paid_count)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"RAME Pay\\xE9e\"})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-info\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-info mb-0\",children:(paginatedReportData===null||paginatedReportData===void 0?void 0:(_paginatedReportData$4=paginatedReportData.summary)===null||_paginatedReportData$4===void 0?void 0:_paginatedReportData$4.physical_count)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"RAME Physique\"})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-danger\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger mb-0\",children:(paginatedReportData===null||paginatedReportData===void 0?void 0:(_paginatedReportData$5=paginatedReportData.summary)===null||_paginatedReportData$5===void 0?void 0:_paginatedReportData$5.unpaid_count)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"Non Pay\\xE9e\"})]})})})]})}),/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"student.full_name\",children:\"\\xC9tudiant\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"student.class_series\",children:\"Classe/S\\xE9rie\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Statut RAME\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"rame_details.payment_status\",children:\"Statut\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"rame_details.payment_type\",children:\"Type\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"rame_details.payment_date\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Notes\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_paginatedReportData$6=paginatedReportData.students)===null||_paginatedReportData$6===void 0?void 0:_paginatedReportData$6.map((studentData,studentIndex)=>{var _studentData$student5,_studentData$student6,_studentData$rame_det,_studentData$rame_det2,_studentData$rame_det3,_studentData$rame_det4,_studentData$rame_det5,_studentData$rame_det6,_studentData$rame_det7,_studentData$rame_det8,_studentData$rame_det9,_studentData$rame_det0,_studentData$rame_det1,_studentData$rame_det10;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:studentData===null||studentData===void 0?void 0:(_studentData$student5=studentData.student)===null||_studentData$student5===void 0?void 0:_studentData$student5.full_name}),/*#__PURE__*/_jsx(\"td\",{children:studentData===null||studentData===void 0?void 0:(_studentData$student6=studentData.student)===null||_studentData$student6===void 0?void 0:_studentData$student6.class_series}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-center\",children:[(studentData===null||studentData===void 0?void 0:(_studentData$rame_det=studentData.rame_details)===null||_studentData$rame_det===void 0?void 0:_studentData$rame_det.has_brought_rame)&&/*#__PURE__*/_jsx(Badge,{bg:\"info\",className:\"me-1\",children:\"Physique\"}),(studentData===null||studentData===void 0?void 0:(_studentData$rame_det2=studentData.rame_details)===null||_studentData$rame_det2===void 0?void 0:_studentData$rame_det2.has_paid_rame)&&/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"Pay\\xE9e\"}),!(studentData!==null&&studentData!==void 0&&(_studentData$rame_det3=studentData.rame_details)!==null&&_studentData$rame_det3!==void 0&&_studentData$rame_det3.has_brought_rame)&&!(studentData!==null&&studentData!==void 0&&(_studentData$rame_det4=studentData.rame_details)!==null&&_studentData$rame_det4!==void 0&&_studentData$rame_det4.has_paid_rame)&&/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:\"Aucun\"})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:(studentData===null||studentData===void 0?void 0:(_studentData$rame_det5=studentData.rame_details)===null||_studentData$rame_det5===void 0?void 0:_studentData$rame_det5.payment_status)==='paid'?\"success\":\"danger\",children:(studentData===null||studentData===void 0?void 0:(_studentData$rame_det6=studentData.rame_details)===null||_studentData$rame_det6===void 0?void 0:_studentData$rame_det6.payment_status)==='paid'?'Payé':'Non payé'})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:(studentData===null||studentData===void 0?void 0:(_studentData$rame_det7=studentData.rame_details)===null||_studentData$rame_det7===void 0?void 0:_studentData$rame_det7.payment_type)==='physical'?\"info\":(studentData===null||studentData===void 0?void 0:(_studentData$rame_det8=studentData.rame_details)===null||_studentData$rame_det8===void 0?void 0:_studentData$rame_det8.payment_type)==='cash'?\"warning\":\"secondary\",children:(studentData===null||studentData===void 0?void 0:(_studentData$rame_det9=studentData.rame_details)===null||_studentData$rame_det9===void 0?void 0:_studentData$rame_det9.payment_type)==='physical'?'Physique':(studentData===null||studentData===void 0?void 0:(_studentData$rame_det0=studentData.rame_details)===null||_studentData$rame_det0===void 0?void 0:_studentData$rame_det0.payment_type)==='cash'?'Espèces':'Non payé'})}),/*#__PURE__*/_jsx(\"td\",{children:studentData!==null&&studentData!==void 0&&(_studentData$rame_det1=studentData.rame_details)!==null&&_studentData$rame_det1!==void 0&&_studentData$rame_det1.payment_date?new Date(studentData.rame_details.payment_date).toLocaleDateString('fr-FR'):'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:(studentData===null||studentData===void 0?void 0:(_studentData$rame_det10=studentData.rame_details)===null||_studentData$rame_det10===void 0?void 0:_studentData$rame_det10.notes)||'-'})})]},studentIndex);})})]}),/*#__PURE__*/_jsx(PaginationControls,{dataArray:sortedReportData===null||sortedReportData===void 0?void 0:sortedReportData.students,dataType:\"\\xE9l\\xE8ves\"})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted text-center\",children:\"G\\xE9n\\xE9rez un rapport pour voir les donn\\xE9es\"})})]});};// Fonction pour filtrer les données des bourses et rabais\nconst getScholarshipsFilteredData=useCallback(()=>{if(!(reportData!==null&&reportData!==void 0&&reportData.students))return[];return reportData.students.filter(student=>{const hasScholarship=student.scholarship_reason;const hasDiscount=student.discount_reason;return hasScholarship||hasDiscount;// Afficher tous les bénéficiaires\n});},[reportData===null||reportData===void 0?void 0:reportData.students]);// Données filtrées et triées pour les bourses et rabais\nconst scholarshipsFilteredStudents=getScholarshipsFilteredData();const scholarshipsSortedStudents=useMemo(()=>{if(activeTab===\"scholarships_discounts\"&&sortConfig.key&&sortConfig.direction){return sortData(scholarshipsFilteredStudents,sortConfig.key,sortConfig.direction);}return scholarshipsFilteredStudents;},[scholarshipsFilteredStudents,sortConfig,sortData,activeTab]);const scholarshipsPaginatedStudents=useMemo(()=>{if(activeTab!==\"scholarships_discounts\")return[];const startIndex=(currentPage-1)*itemsPerPage;return scholarshipsSortedStudents.slice(startIndex,startIndex+itemsPerPage);},[scholarshipsSortedStudents,currentPage,itemsPerPage,activeTab]);const renderScholarshipsDiscountsReport=()=>{var _reportData$summary,_reportData$students2,_reportData$summary2,_reportData$students3,_reportData$summary3,_reportData$summary4,_reportData$summary5,_reportData$summary6,_reportData$class_sum,_reportData$summary9,_reportData$summary0,_reportData$summary1,_reportData$summary10,_reportData$summary11;return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\xC9tats Bourses et Rabais\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Tous les avantages accord\\xE9s aux \\xE9l\\xE8ves\"})]}),reportData&&/*#__PURE__*/_jsxs(Badge,{bg:\"primary\",children:[scholarshipsSortedStudents.length,\" b\\xE9n\\xE9ficiaire(s)\"]})]})}),/*#__PURE__*/_jsx(Card.Body,{children:reportData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-info h-100\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center mb-2\",children:[/*#__PURE__*/_jsx(CashCoin,{className:\"text-info me-2\",size:24}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-info mb-0\",children:formatCurrency(((_reportData$summary=reportData.summary)===null||_reportData$summary===void 0?void 0:_reportData$summary.total_scholarships)||0)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"Total Bourses\"}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-info\",children:[((_reportData$students2=reportData.students)===null||_reportData$students2===void 0?void 0:_reportData$students2.filter(s=>s.scholarship_reason).length)||0,\" \",\"b\\xE9n\\xE9ficiaires\"]})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-warning h-100\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center mb-2\",children:[/*#__PURE__*/_jsx(BarChart,{className:\"text-warning me-2\",size:24}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-warning mb-0\",children:formatCurrency(((_reportData$summary2=reportData.summary)===null||_reportData$summary2===void 0?void 0:_reportData$summary2.total_discounts)||0)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"Total Rabais\"}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-warning\",children:[((_reportData$students3=reportData.students)===null||_reportData$students3===void 0?void 0:_reportData$students3.filter(s=>s.discount_reason).length)||0,\" \",\"b\\xE9n\\xE9ficiaires\"]})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-success h-100\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center mb-2\",children:[/*#__PURE__*/_jsx(Building,{className:\"text-success me-2\",size:24}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-success mb-0\",children:formatCurrency((((_reportData$summary3=reportData.summary)===null||_reportData$summary3===void 0?void 0:_reportData$summary3.total_scholarships)||0)+(((_reportData$summary4=reportData.summary)===null||_reportData$summary4===void 0?void 0:_reportData$summary4.total_discounts)||0))})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"Total Avantages\"}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-success\",children:[((_reportData$summary5=reportData.summary)===null||_reportData$summary5===void 0?void 0:_reportData$summary5.beneficiary_count)||0,\" \",\"b\\xE9n\\xE9ficiaires\"]})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"text-center border-primary h-100\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center mb-2\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"text-primary me-2\",size:24}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-primary mb-0\",children:[((((_reportData$summary6=reportData.summary)===null||_reportData$summary6===void 0?void 0:_reportData$summary6.beneficiary_count)||0)/Math.max(scholarshipsSortedStudents.length,1)*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"Taux B\\xE9n\\xE9ficiaires\"}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-primary\",children:[\"Sur \",scholarshipsSortedStudents.length,\" \\xE9l\\xE8ves\"]})]})})})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\xC9l\\xE9ments par page\"}),/*#__PURE__*/_jsxs(Form.Select,{value:itemsPerPage,onChange:e=>{setItemsPerPage(parseInt(e.target.value));setCurrentPage(1);},style:{width:\"auto\"},children:[/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:25,children:\"25\"}),/*#__PURE__*/_jsx(\"option\",{value:50,children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:100,children:\"100\"})]})]})}),/*#__PURE__*/_jsx(Col,{md:6,className:\"text-end\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Affichage de \",(currentPage-1)*itemsPerPage+1,\" \\xE0\",\" \",Math.min(currentPage*itemsPerPage,scholarshipsSortedStudents.length),\" \",\"sur \",scholarshipsSortedStudents.length,\" b\\xE9n\\xE9ficiaires\"]})})]}),/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,hover:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"th\",{style:{cursor:\"pointer\"},onClick:()=>handleSort(\"class_name\"),children:[\"Classe \",getSortIcon(\"class_name\")]}),/*#__PURE__*/_jsxs(\"th\",{style:{cursor:\"pointer\"},onClick:()=>handleSort(\"student_name\"),children:[\"Nom & Pr\\xE9noms \",getSortIcon(\"student_name\")]}),/*#__PURE__*/_jsxs(\"th\",{style:{cursor:\"pointer\"},onClick:()=>handleSort(\"tuition_amount\"),children:[\"Scolarit\\xE9 \",getSortIcon(\"tuition_amount\")]}),/*#__PURE__*/_jsx(\"th\",{children:\"Type d'Avantage\"}),/*#__PURE__*/_jsxs(\"th\",{style:{cursor:\"pointer\"},onClick:()=>handleSort(\"total_benefit_amount\"),children:[\"Montant Avantage \",getSortIcon(\"total_benefit_amount\")]}),/*#__PURE__*/_jsx(\"th\",{children:\"\\xC9conomie (%)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Obs\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:scholarshipsPaginatedStudents.map((student,index)=>{const savingsPercentage=student.tuition_amount>0?((student.total_benefit_amount||0)/student.tuition_amount*100).toFixed(1):0;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",className:\"me-1\",children:student.class_name})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:student.student_name})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:formatCurrency(student.tuition_amount)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-wrap gap-1\",children:[student.scholarship_reason&&/*#__PURE__*/_jsxs(Badge,{bg:\"info\",size:\"sm\",children:[/*#__PURE__*/_jsx(CashCoin,{size:12,className:\"me-1\"}),\"Bourse: \",student.scholarship_reason]}),student.discount_reason&&/*#__PURE__*/_jsxs(Badge,{bg:\"warning\",size:\"sm\",children:[/*#__PURE__*/_jsx(BarChart,{size:12,className:\"me-1\"}),\"Rabais: \",student.discount_reason]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"strong\",{className:\"text-success\",children:formatCurrency(student.total_benefit_amount)})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(Badge,{bg:savingsPercentage>=50?\"success\":savingsPercentage>=25?\"warning\":\"info\",className:\"px-2\",children:[savingsPercentage,\"%\"]})}),/*#__PURE__*/_jsx(\"td\",{children:student.observation&&/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:student.observation})})]},index);})})]}),scholarshipsSortedStudents.length>itemsPerPage&&/*#__PURE__*/_jsx(Row,{className:\"mt-3\",children:/*#__PURE__*/_jsx(Col,{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(Pagination,{children:[/*#__PURE__*/_jsx(Pagination.First,{onClick:()=>setCurrentPage(1),disabled:currentPage===1}),/*#__PURE__*/_jsx(Pagination.Prev,{onClick:()=>setCurrentPage(currentPage-1),disabled:currentPage===1}),Array.from({length:Math.ceil(scholarshipsSortedStudents.length/itemsPerPage)},(_,i)=>i+1).filter(page=>Math.abs(page-currentPage)<=2).map(page=>/*#__PURE__*/_jsx(Pagination.Item,{active:page===currentPage,onClick:()=>setCurrentPage(page),children:page},page)),/*#__PURE__*/_jsx(Pagination.Next,{onClick:()=>setCurrentPage(currentPage+1),disabled:currentPage===Math.ceil(scholarshipsSortedStudents.length/itemsPerPage)}),/*#__PURE__*/_jsx(Pagination.Last,{onClick:()=>setCurrentPage(Math.ceil(scholarshipsSortedStudents.length/itemsPerPage)),disabled:currentPage===Math.ceil(scholarshipsSortedStudents.length/itemsPerPage)})]})})}),/*#__PURE__*/_jsxs(Card,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(Building,{className:\"me-2\"}),\"R\\xE9capitulatif par Classe et S\\xE9rie\"]})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(Building,{size:16,className:\"me-1\"}),\"Classe - S\\xE9rie\"]}),/*#__PURE__*/_jsxs(\"th\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(CashCoin,{size:16,className:\"me-1\"}),\"B\\xE9n\\xE9ficiaires\"]}),/*#__PURE__*/_jsxs(\"th\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(BarChart,{size:16,className:\"me-1\"}),\"Bourses\"]}),/*#__PURE__*/_jsxs(\"th\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(Calendar,{size:16,className:\"me-1\"}),\"Rabais\"]}),/*#__PURE__*/_jsxs(\"th\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(FileText,{size:16,className:\"me-1\"}),\"Total Avantages\"]}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"R\\xE9partition\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_reportData$class_sum=reportData.class_summary)===null||_reportData$class_sum===void 0?void 0:_reportData$class_sum.map((classSummary,index)=>{var _reportData$summary7,_reportData$summary8;const totalSchool=(((_reportData$summary7=reportData.summary)===null||_reportData$summary7===void 0?void 0:_reportData$summary7.total_scholarships)||0)+(((_reportData$summary8=reportData.summary)===null||_reportData$summary8===void 0?void 0:_reportData$summary8.total_discounts)||0);const classPercentage=totalSchool>0?(classSummary.total_benefits/totalSchool*100).toFixed(1):0;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:classSummary.class_name}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:classSummary.series_name})]}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Badge,{bg:\"primary\",className:\"px-3\",children:classSummary.beneficiary_count})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-info\",children:formatCurrency(classSummary.total_scholarships)})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-warning\",children:formatCurrency(classSummary.total_discounts)})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"strong\",{className:\"text-success\",children:formatCurrency(classSummary.total_benefits)})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(Badge,{bg:classPercentage>=30?\"success\":classPercentage>=15?\"warning\":\"info\",className:\"px-2\",children:[classPercentage,\"%\"]})})]},index);})}),/*#__PURE__*/_jsx(\"tfoot\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"TOTAL G\\xC9N\\xC9RAL\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Badge,{bg:\"dark\",className:\"px-3\",children:((_reportData$summary9=reportData.summary)===null||_reportData$summary9===void 0?void 0:_reportData$summary9.beneficiary_count)||0})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"strong\",{className:\"text-info\",children:formatCurrency(((_reportData$summary0=reportData.summary)===null||_reportData$summary0===void 0?void 0:_reportData$summary0.total_scholarships)||0)})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"strong\",{className:\"text-warning\",children:formatCurrency(((_reportData$summary1=reportData.summary)===null||_reportData$summary1===void 0?void 0:_reportData$summary1.total_discounts)||0)})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"strong\",{className:\"text-success fs-6\",children:formatCurrency((((_reportData$summary10=reportData.summary)===null||_reportData$summary10===void 0?void 0:_reportData$summary10.total_scholarships)||0)+(((_reportData$summary11=reportData.summary)===null||_reportData$summary11===void 0?void 0:_reportData$summary11.total_discounts)||0))})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Badge,{bg:\"dark\",className:\"px-2\",children:\"100%\"})})]})})]})})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted text-center\",children:\"G\\xE9n\\xE9rez un rapport pour voir les donn\\xE9es\"})})]});};const renderCollectionDetailsReport=()=>{var _paginatedReportData$7,_paginatedReportData$8,_paginatedReportData$9,_paginatedReportData$0,_paginatedReportData$1,_paginatedReportData$10,_paginatedReportData$11,_paginatedReportData$12,_paginatedReportData$13,_paginatedReportData$14,_paginatedReportData$15;return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center mb-3\",children:[(paginatedReportData===null||paginatedReportData===void 0?void 0:(_paginatedReportData$7=paginatedReportData.school_settings)===null||_paginatedReportData$7===void 0?void 0:_paginatedReportData$7.logo_url)&&/*#__PURE__*/_jsx(\"img\",{src:paginatedReportData.school_settings.logo_url,alt:\"Logo de l'\\xE9cole\",style:{height:\"60px\",width:\"auto\",marginRight:\"20px\",objectFit:\"contain\"},onError:e=>{e.target.style.display=\"none\";}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-1\",children:(paginatedReportData===null||paginatedReportData===void 0?void 0:(_paginatedReportData$8=paginatedReportData.school_settings)===null||_paginatedReportData$8===void 0?void 0:_paginatedReportData$8.school_name)||\"COLLEGE POLYVALENT BILINGUE DE DOUALA\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0 text-primary\",children:\"D\\xC9TAIL DES ENCAISSEMENTS\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ann\\xE9e Acad\\xE9mique :\"}),\" \",(paginatedReportData===null||paginatedReportData===void 0?void 0:(_paginatedReportData$9=paginatedReportData.school_year)===null||_paginatedReportData$9===void 0?void 0:_paginatedReportData$9.name)||\"N/A\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Lieu de D\\xE9p\\xF4t :\"}),\" \",(paginatedReportData===null||paginatedReportData===void 0?void 0:(_paginatedReportData$0=paginatedReportData.summary)===null||_paginatedReportData$0===void 0?void 0:_paginatedReportData$0.deposit_location)||\"BANQ\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"P\\xE9riode:\"}),\" \",paginatedReportData!==null&&paginatedReportData!==void 0&&(_paginatedReportData$1=paginatedReportData.summary)!==null&&_paginatedReportData$1!==void 0&&_paginatedReportData$1.period_start?new Date(paginatedReportData.summary.period_start).toLocaleDateString(\"fr-FR\"):\"N/A\",\"au\",\" \",paginatedReportData!==null&&paginatedReportData!==void 0&&(_paginatedReportData$10=paginatedReportData.summary)!==null&&_paginatedReportData$10!==void 0&&_paginatedReportData$10.period_end?new Date(paginatedReportData.summary.period_end).toLocaleDateString(\"fr-FR\"):\"N/A\"]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsxs(Badge,{bg:\"primary\",className:\"me-2\",children:[(paginatedReportData===null||paginatedReportData===void 0?void 0:(_paginatedReportData$11=paginatedReportData.summary)===null||_paginatedReportData$11===void 0?void 0:_paginatedReportData$11.total_collections)||0,\" \",\"encaissement(s)\"]}),/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:formatCurrency((paginatedReportData===null||paginatedReportData===void 0?void 0:(_paginatedReportData$12=paginatedReportData.summary)===null||_paginatedReportData$12===void 0?void 0:_paginatedReportData$12.total_amount)||0)})]})]})]})}),/*#__PURE__*/_jsx(Card.Body,{children:paginatedReportData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,size:\"sm\",className:\"table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"student.matricule\",children:\"Matricule\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"student.last_name\",children:\"Nom\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"student.first_name\",children:\"Pr\\xE9nom\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"student.class_name\",children:\"Classe\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"payment_date\",children:\"Date de Versement\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"validated_at\",children:\"Date de Validation\"}),/*#__PURE__*/_jsx(SortableHeader,{sortKey:\"amount\",children:\"Montant\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nom du Comptable\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_paginatedReportData$13=paginatedReportData.collections)===null||_paginatedReportData$13===void 0?void 0:_paginatedReportData$13.map((collection,index)=>{var _collection$student5,_collection$student6,_collection$student7,_collection$student8;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"code\",{className:\"text-primary\",children:((_collection$student5=collection.student)===null||_collection$student5===void 0?void 0:_collection$student5.matricule)||\"N/A\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:((_collection$student6=collection.student)===null||_collection$student6===void 0?void 0:_collection$student6.last_name)||\"N/A\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:((_collection$student7=collection.student)===null||_collection$student7===void 0?void 0:_collection$student7.first_name)||\"N/A\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"info\",size:\"sm\",children:((_collection$student8=collection.student)===null||_collection$student8===void 0?void 0:_collection$student8.class_name)||\"N/A\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:collection.payment_date?new Date(collection.payment_date).toLocaleDateString(\"fr-FR\"):\"N/A\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:collection.payment_time||\"\"})]}),/*#__PURE__*/_jsx(\"td\",{children:collection.validated_at?/*#__PURE__*/_jsx(\"span\",{className:\"text-success fw-bold\",children:new Date(collection.validated_at).toLocaleDateString(\"fr-FR\")}):/*#__PURE__*/_jsx(Badge,{bg:\"warning\",size:\"sm\",children:\"En attente\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-success fs-6\",children:formatCurrency(collection.amount||0)}),collection.has_reduction&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-info\",children:[\"(Rabais: -\",formatCurrency(collection.reduction_amount||0),\")\"]})})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold text-primary\",children:collection.validator_name||\"Système\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Re\\xE7u N\\xB0: \",collection.receipt_number||\"N/A\"]})]})]},collection.payment_id||index);})})]}),/*#__PURE__*/_jsx(PaginationControls,{dataArray:sortedReportData===null||sortedReportData===void 0?void 0:sortedReportData.collections,dataType:\"encaissements\"}),(paginatedReportData===null||paginatedReportData===void 0?void 0:paginatedReportData.statistics)&&/*#__PURE__*/_jsxs(Row,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Par M\\xE9thode de Paiement\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Table,{size:\"sm\",responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"M\\xE9thode\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:\"Montant\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_paginatedReportData$14=paginatedReportData.statistics.by_payment_method)===null||_paginatedReportData$14===void 0?void 0:_paginatedReportData$14.map((method,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:method.label}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Badge,{bg:\"info\",children:method.count})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:formatCurrency(method.total)})]},idx))})]})})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Par Tranche de Paiement\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Table,{size:\"sm\",responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Tranche\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-end\",children:\"Montant\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_paginatedReportData$15=paginatedReportData.statistics.by_payment_tranche)===null||_paginatedReportData$15===void 0?void 0:_paginatedReportData$15.map((tranche,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:tranche.tranche_name}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:tranche.count})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:formatCurrency(tranche.total)})]},idx))})]})})]})})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted text-center\",children:\"G\\xE9n\\xE9rez un rapport pour voir les donn\\xE9es\"})})]});};return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"py-4\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(FileText,{className:\"me-3\"}),\"Rapports Financiers\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"G\\xE9n\\xE9ration de rapports d\\xE9taill\\xE9s avec prise en compte des bourses et r\\xE9ductions\"})]})}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",dismissible:true,onClose:()=>setError(\"\"),children:error}),renderFilterSection(),/*#__PURE__*/_jsx(Tab.Container,{activeKey:activeTab,onSelect:setActiveTab,children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(Nav,{variant:\"tabs\",className:\"mb-4\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"insolvable\",children:[/*#__PURE__*/_jsx(Building,{className:\"me-2\"}),\"\\xC9tat Insolvable\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"payments\",children:[/*#__PURE__*/_jsx(CashCoin,{className:\"me-2\"}),\"Paiements\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"rame\",children:[/*#__PURE__*/_jsx(FileEarmarkText,{className:\"me-2\"}),\"\\xC9tat RAME\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"scholarships_discounts\",children:[/*#__PURE__*/_jsx(Building,{className:\"me-2\"}),\"Bourses & Rabais\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"collection_details\",children:[/*#__PURE__*/_jsx(CashCoin,{className:\"me-2\"}),\"D\\xE9tail des Encaissements\"]})})]}),/*#__PURE__*/_jsxs(Tab.Content,{children:[/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"insolvable\",children:renderInsolvableReport()}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"payments\",children:renderPaymentsReport()}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"rame\",children:renderRameReport()}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"scholarships_discounts\",children:renderScholarshipsDiscountsReport()}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"collection_details\",children:renderCollectionDetailsReport()})]})]})})})]});};export default Reports;","map":{"version":3,"names":["useCallback","useEffect","useMemo","useState","Alert","Badge","Button","Card","Col","Container","Form","Nav","Pagination","Row","Spinner","Tab","Table","ArrowDown","ArrowDownUp","ArrowUp","BarChart","Building","Calendar","CashCoin","Download","FileEarmarkText","FileText","Search","Swal","XLSX","useSchool","secureApiEndpoints","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Reports","schoolSettings","formatCurrency","activeTab","setActiveTab","loading","setLoading","error","setError","reportData","setReportData","reportCache","setReportCache","Map","sortConfig","setSortConfig","key","direction","currentPage","setCurrentPage","itemsPerPage","setItemsPerPage","filters","setFilters","sectionId","classId","seriesId","startDate","endDate","availableOptions","setAvailableOptions","sections","classes","series","loadAvailableOptions","sectionsRes","classesRes","Promise","all","getAll","accountant","getClasses","success","Array","isArray","data","classesData","allSeries","forEach","schoolClass","_schoolClass$level","_schoolClass$level$se","_schoolClass$level2","_schoolClass$level2$s","_schoolClass$level3","_schoolClass$level3$s","push","section_id","level","section","id","section_name","name","class_id","class_name","full_name","console","log","length","generateCacheKey","reportType","JSON","stringify","getCachedReport","cacheKey","cached","get","isExpired","Date","now","timestamp","prev","newCache","delete","cacheReport","set","sortData","sort","a","b","aVal","split","reduce","obj","k","bVal","isNaN","parseFloat","handleSort","getSortIcon","columnKey","className","size","SortableHeader","_ref","children","sortKey","onClick","style","cursor","userSelect","sortedReportData","newData","students","periods","paginateData","page","perPage","startIndex","endIndex","slice","paginatedReportData","totalStudents","totalClasses","totalPeriods","getTotalPages","dataArray","Math","ceil","PaginationControls","_ref2","dataType","totalPages","totalItems","startItem","endItem","min","Select","value","onChange","e","Number","target","width","First","disabled","Prev","max","map","_","index","pageNumber","Item","active","Next","Last","exportToExcel","fire","workbook","utils","book_new","fileName","toISOString","cleanValue","undefined","studentsData","student","_student$student","_student$student2","_student$incomplete_t","Étudiant","class_series","total_required","total_paid","total_remaining","incomplete_tranches","t","tranche_name","paid_amount","required_amount","join","worksheet","json_to_sheet","book_append_sheet","paymentsData","_student$student3","_student$student4","Statut","status","rameData","_student$student5","_student$student6","_student$rame_details","rame_status","rame_details","payment_date","scholarshipsData","_student$student7","_student$student8","discount_type","Montant","discount_amount","Pourcentage","discount_percentage","collections","collectionsData","collection","_collection$student","_collection$student2","_collection$student3","_collection$student4","Matricule","matricule","Nom","last_name","Prénom","first_name","Classe","validated_at","amount","validator_name","receipt_number","Rabais","has_reduction","reduction_amount","statistics","statsData","by_payment_method","method","label","count","total","by_payment_tranche","tranche","statsWorksheet","aoa_to_sheet","Error","writeFile","title","text","icon","timer","generateReport","cachedData","response","reports","getInsolvableReport","getPaymentsReport","getRameReport","getScholarshipsDiscountsReport","getCollectionDetailsReport","message","exportReport","format","arguments","allowOutsideClick","showConfirmButton","willOpen","showLoading","exportParams","report_type","exportPdf","printWindow","window","open","document","write","close","setTimeout","focus","print","renderFilterSection","Header","Body","md","Group","Label","filter","_schoolClass$level4","_schoolClass$level4$s","Control","type","variant","animation","renderInsolvableReport","_paginatedReportData$","bg","total_insolvable_students","responsive","striped","studentData","studentIndex","_studentData$student","_studentData$student2","_studentData$incomple","trancheIndex","remaining_amount","renderPaymentsReport","_reportData$students","total_students","_studentData$student3","_studentData$student4","_studentData$tranches","tranches_details","renderRameReport","_paginatedReportData$2","_paginatedReportData$3","_paginatedReportData$4","_paginatedReportData$5","_paginatedReportData$6","summary","paid_count","physical_count","unpaid_count","_studentData$student5","_studentData$student6","_studentData$rame_det","_studentData$rame_det2","_studentData$rame_det3","_studentData$rame_det4","_studentData$rame_det5","_studentData$rame_det6","_studentData$rame_det7","_studentData$rame_det8","_studentData$rame_det9","_studentData$rame_det0","_studentData$rame_det1","_studentData$rame_det10","has_brought_rame","has_paid_rame","payment_status","payment_type","toLocaleDateString","notes","getScholarshipsFilteredData","hasScholarship","scholarship_reason","hasDiscount","discount_reason","scholarshipsFilteredStudents","scholarshipsSortedStudents","scholarshipsPaginatedStudents","renderScholarshipsDiscountsReport","_reportData$summary","_reportData$students2","_reportData$summary2","_reportData$students3","_reportData$summary3","_reportData$summary4","_reportData$summary5","_reportData$summary6","_reportData$class_sum","_reportData$summary9","_reportData$summary0","_reportData$summary1","_reportData$summary10","_reportData$summary11","total_scholarships","s","total_discounts","beneficiary_count","toFixed","parseInt","hover","savingsPercentage","tuition_amount","total_benefit_amount","student_name","observation","from","i","abs","class_summary","classSummary","_reportData$summary7","_reportData$summary8","totalSchool","classPercentage","total_benefits","series_name","renderCollectionDetailsReport","_paginatedReportData$7","_paginatedReportData$8","_paginatedReportData$9","_paginatedReportData$0","_paginatedReportData$1","_paginatedReportData$10","_paginatedReportData$11","_paginatedReportData$12","_paginatedReportData$13","_paginatedReportData$14","_paginatedReportData$15","school_settings","logo_url","src","alt","height","marginRight","objectFit","onError","display","school_name","school_year","deposit_location","period_start","period_end","total_collections","total_amount","_collection$student5","_collection$student6","_collection$student7","_collection$student8","payment_time","payment_id","idx","fluid","dismissible","onClose","activeKey","onSelect","Link","eventKey","Content","Pane"],"sources":["/var/www/College-IUP/front/src/pages/Reports.jsx"],"sourcesContent":["import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport {\n  Alert,\n  Badge,\n  Button,\n  Card,\n  Col,\n  Container,\n  Form,\n  Nav,\n  Pagination,\n  Row,\n  Spinner,\n  Tab,\n  Table,\n} from \"react-bootstrap\";\nimport {\n  ArrowDown,\n  ArrowDownUp,\n  ArrowUp,\n  BarChart,\n  Building,\n  Calendar,\n  CashCoin,\n  Download,\n  FileEarmarkText,\n  FileText,\n  Search,\n} from \"react-bootstrap-icons\";\nimport Swal from \"sweetalert2\";\nimport * as XLSX from \"xlsx\";\nimport { useSchool } from \"../contexts/SchoolContext\";\nimport { secureApiEndpoints } from \"../utils/apiMigration\";\n\nconst Reports = () => {\n  const { schoolSettings, formatCurrency } = useSchool();\n  const [activeTab, setActiveTab] = useState(\"insolvable\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [reportData, setReportData] = useState(null);\n  const [reportCache, setReportCache] = useState(new Map());\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: null });\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(10);\n\n  // États pour les filtres\n  const [filters, setFilters] = useState({\n    // Filtres spécifiques (peuvent être utilisés simultanément)\n    sectionId: \"\",\n    classId: \"\",\n    seriesId: \"\",\n\n    // Filtres par dates\n    startDate: \"\",\n    endDate: \"\",\n  });\n\n  const [availableOptions, setAvailableOptions] = useState({\n    sections: [],\n    classes: [],\n    series: [],\n  });\n\n  useEffect(() => {\n    loadAvailableOptions();\n  }, []);\n\n  const loadAvailableOptions = async () => {\n    try {\n      // Charger les sections, classes et toutes les séries\n      const [sectionsRes, classesRes] = await Promise.all([\n        secureApiEndpoints.sections.getAll(),\n        secureApiEndpoints.accountant.getClasses(), // Utilise getClasses qui donne plus d'infos\n      ]);\n\n      // S'assurer que les données sont des tableaux\n      const sections =\n        sectionsRes.success && Array.isArray(sectionsRes.data)\n          ? sectionsRes.data\n          : [];\n      \n      // Classes avec leurs relations complètes\n      const classesData = classesRes.success && classesRes.data ? classesRes.data : {};\n      const classes = Array.isArray(classesData.classes) ? classesData.classes : [];\n\n      // Extraire toutes les séries des classes\n      let allSeries = [];\n      classes.forEach(schoolClass => {\n        if (schoolClass.series && Array.isArray(schoolClass.series)) {\n          schoolClass.series.forEach(series => {\n            allSeries.push({\n              ...series,\n              section_id: schoolClass?.level?.section?.id,\n              section_name: schoolClass?.level?.section?.name,\n              class_id: schoolClass?.id,\n              class_name: schoolClass?.name,\n              full_name: `${schoolClass?.level?.section?.name || ''} - ${schoolClass?.name || ''} - ${series.name || ''}`\n            });\n          });\n        }\n      });\n\n      console.log('Loaded options:', { sections: sections.length, classes: classes.length, series: allSeries.length });\n      console.log('Series data:', allSeries);\n\n      setAvailableOptions({\n        sections,\n        classes,\n        series: allSeries,\n      });\n    } catch (error) {\n      console.error(\"Error loading options:\", error);\n    }\n  };\n\n  // Fonction pour générer une clé de cache unique\n  const generateCacheKey = useCallback((reportType, filters) => {\n    return `${reportType}_${JSON.stringify(filters)}`;\n  }, []);\n\n  // Fonction pour vérifier si les données sont en cache\n  const getCachedReport = useCallback(\n    (cacheKey) => {\n      const cached = reportCache.get(cacheKey);\n      if (cached) {\n        // Vérifier si le cache a moins de 5 minutes\n        const isExpired = Date.now() - cached.timestamp > 5 * 60 * 1000;\n        if (!isExpired) {\n          return cached.data;\n        } else {\n          // Supprimer le cache expiré\n          setReportCache((prev) => {\n            const newCache = new Map(prev);\n            newCache.delete(cacheKey);\n            return newCache;\n          });\n        }\n      }\n      return null;\n    },\n    [reportCache]\n  );\n\n  // Fonction pour mettre en cache un rapport\n  const cacheReport = useCallback((cacheKey, data) => {\n    setReportCache((prev) => {\n      const newCache = new Map(prev);\n      newCache.set(cacheKey, {\n        data,\n        timestamp: Date.now(),\n      });\n      return newCache;\n    });\n  }, []);\n\n  // Fonction pour trier les données\n  const sortData = useCallback((data, key, direction) => {\n    if (!data || !Array.isArray(data)) return data;\n\n    return [...data].sort((a, b) => {\n      let aVal = key.split(\".\").reduce((obj, k) => obj?.[k], a);\n      let bVal = key.split(\".\").reduce((obj, k) => obj?.[k], b);\n\n      // Gérer les valeurs nulles/undefined\n      if (aVal == null) aVal = \"\";\n      if (bVal == null) bVal = \"\";\n\n      // Conversion automatique pour les nombres\n      if (typeof aVal === \"string\" && !isNaN(parseFloat(aVal))) {\n        aVal = parseFloat(aVal);\n        bVal = parseFloat(bVal);\n      }\n\n      if (direction === \"asc\") {\n        return aVal > bVal ? 1 : aVal < bVal ? -1 : 0;\n      } else {\n        return aVal < bVal ? 1 : aVal > bVal ? -1 : 0;\n      }\n    });\n  }, []);\n\n  // Fonction pour gérer le clic sur un en-tête de colonne\n  const handleSort = useCallback(\n    (key) => {\n      let direction = \"asc\";\n      if (sortConfig.key === key && sortConfig.direction === \"asc\") {\n        direction = \"desc\";\n      } else if (sortConfig.key === key && sortConfig.direction === \"desc\") {\n        direction = null;\n      }\n\n      setSortConfig({ key, direction });\n    },\n    [sortConfig]\n  );\n\n  // Fonction pour obtenir l'icône de tri\n  const getSortIcon = useCallback(\n    (columnKey) => {\n      if (sortConfig.key !== columnKey) {\n        return <ArrowDownUp className=\"ms-1 text-muted\" size={12} />;\n      }\n      if (sortConfig.direction === \"asc\") {\n        return <ArrowUp className=\"ms-1 text-primary\" size={12} />;\n      }\n      if (sortConfig.direction === \"desc\") {\n        return <ArrowDown className=\"ms-1 text-primary\" size={12} />;\n      }\n      return <ArrowDownUp className=\"ms-1 text-muted\" size={12} />;\n    },\n    [sortConfig]\n  );\n\n  // Composant d'en-tête triable\n  const SortableHeader = useCallback(\n    ({ children, sortKey, className = \"\" }) => (\n      <th\n        className={`sortable-header ${className}`}\n        onClick={() => handleSort(sortKey)}\n        style={{ cursor: \"pointer\", userSelect: \"none\" }}\n      >\n        {children}\n        {getSortIcon(sortKey)}\n      </th>\n    ),\n    [handleSort, getSortIcon]\n  );\n\n  // Hook pour obtenir les données triées\n  const sortedReportData = useMemo(() => {\n    if (!reportData || !sortConfig.key || !sortConfig.direction) {\n      return reportData;\n    }\n\n    const newData = { ...reportData };\n\n    // Trier différents types de données selon le rapport\n    if (newData.students && Array.isArray(newData.students)) {\n      newData.students = sortData(\n        newData.students,\n        sortConfig.key,\n        sortConfig.direction\n      );\n    }\n    if (newData.classes && Array.isArray(newData.classes)) {\n      newData.classes = sortData(\n        newData.classes,\n        sortConfig.key,\n        sortConfig.direction\n      );\n    }\n    if (newData.periods && Array.isArray(newData.periods)) {\n      newData.periods = sortData(\n        newData.periods,\n        sortConfig.key,\n        sortConfig.direction\n      );\n    }\n\n    return newData;\n  }, [reportData, sortConfig, sortData]);\n\n  // Fonctions de pagination\n  const paginateData = useCallback((data, page, perPage) => {\n    if (!data || !Array.isArray(data)) return data;\n    const startIndex = (page - 1) * perPage;\n    const endIndex = startIndex + perPage;\n    return data.slice(startIndex, endIndex);\n  }, []);\n\n  // Hook pour obtenir les données paginées\n  const paginatedReportData = useMemo(() => {\n    if (!sortedReportData) return sortedReportData;\n\n    const newData = { ...sortedReportData };\n\n    // Paginer différents types de données selon le rapport\n    if (newData.students && Array.isArray(newData.students)) {\n      newData.students = paginateData(\n        newData.students,\n        currentPage,\n        itemsPerPage\n      );\n      newData.totalStudents = sortedReportData.students.length;\n    }\n    if (newData.classes && Array.isArray(newData.classes)) {\n      newData.classes = paginateData(\n        newData.classes,\n        currentPage,\n        itemsPerPage\n      );\n      newData.totalClasses = sortedReportData.classes.length;\n    }\n    if (newData.periods && Array.isArray(newData.periods)) {\n      newData.periods = paginateData(\n        newData.periods,\n        currentPage,\n        itemsPerPage\n      );\n      newData.totalPeriods = sortedReportData.periods.length;\n    }\n\n    return newData;\n  }, [sortedReportData, currentPage, itemsPerPage, paginateData]);\n\n  // Fonction pour calculer le nombre total de pages\n  const getTotalPages = useCallback(\n    (dataArray) => {\n      if (!dataArray || !Array.isArray(dataArray)) return 1;\n      return Math.ceil(dataArray.length / itemsPerPage);\n    },\n    [itemsPerPage]\n  );\n\n  // Composant de pagination\n  const PaginationControls = useCallback(\n    ({ dataArray, dataType = \"éléments\" }) => {\n      const totalPages = getTotalPages(dataArray);\n      const totalItems = dataArray?.length || 0;\n\n      if (totalPages <= 1) return null;\n\n      const startItem = (currentPage - 1) * itemsPerPage + 1;\n      const endItem = Math.min(currentPage * itemsPerPage, totalItems);\n\n      return (\n        <div className=\"d-flex justify-content-between align-items-center mt-3\">\n          <div className=\"d-flex align-items-center gap-3\">\n            <small className=\"text-muted\">\n              Affichage de {startItem} à {endItem} sur {totalItems} {dataType}\n            </small>\n            <Form.Select\n              size=\"sm\"\n              value={itemsPerPage}\n              onChange={(e) => {\n                setItemsPerPage(Number(e.target.value));\n                setCurrentPage(1);\n              }}\n              style={{ width: \"auto\" }}\n            >\n              <option value={5}>5 par page</option>\n              <option value={10}>10 par page</option>\n              <option value={25}>25 par page</option>\n              <option value={50}>50 par page</option>\n              <option value={100}>100 par page</option>\n            </Form.Select>\n          </div>\n\n          <Pagination size=\"sm\" className=\"mb-0\">\n            <Pagination.First\n              onClick={() => setCurrentPage(1)}\n              disabled={currentPage === 1}\n            />\n            <Pagination.Prev\n              onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n              disabled={currentPage === 1}\n            />\n\n            {/* Pages numériques */}\n            {[...Array(Math.min(5, totalPages))].map((_, index) => {\n              let pageNumber;\n              if (totalPages <= 5) {\n                pageNumber = index + 1;\n              } else if (currentPage <= 3) {\n                pageNumber = index + 1;\n              } else if (currentPage >= totalPages - 2) {\n                pageNumber = totalPages - 4 + index;\n              } else {\n                pageNumber = currentPage - 2 + index;\n              }\n\n              return (\n                <Pagination.Item\n                  key={pageNumber}\n                  active={pageNumber === currentPage}\n                  onClick={() => setCurrentPage(pageNumber)}\n                >\n                  {pageNumber}\n                </Pagination.Item>\n              );\n            })}\n\n            <Pagination.Next\n              onClick={() =>\n                setCurrentPage(Math.min(totalPages, currentPage + 1))\n              }\n              disabled={currentPage === totalPages}\n            />\n            <Pagination.Last\n              onClick={() => setCurrentPage(totalPages)}\n              disabled={currentPage === totalPages}\n            />\n          </Pagination>\n        </div>\n      );\n    },\n    [currentPage, itemsPerPage, getTotalPages]\n  );\n\n  // Reset pagination when changing tabs or filters\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [activeTab, filters]);\n\n  // Fonctions d'export Excel\n  const exportToExcel = useCallback((data, reportType) => {\n    if (!data) {\n      Swal.fire(\"Erreur\", \"Aucune donnée à exporter\", \"error\");\n      return;\n    }\n\n    const workbook = XLSX.utils.book_new();\n    const fileName = `rapport_${reportType}_${\n      new Date().toISOString().split(\"T\")[0]\n    }.xlsx`;\n\n    // Fonction pour nettoyer et convertir les données\n    const cleanValue = (value) => {\n      if (value === null || value === undefined) return \"\";\n      if (typeof value === \"object\") return JSON.stringify(value);\n      return value;\n    };\n\n    try {\n      switch (reportType) {\n        case \"insolvable\":\n          if (data.students && Array.isArray(data.students)) {\n            const studentsData = data.students.map((student) => ({\n              Étudiant: cleanValue(student?.student?.full_name),\n              \"Classe/Série\": cleanValue(student?.student?.class_series),\n              \"Total Requis\": cleanValue(student?.total_required),\n              \"Total Payé\": cleanValue(student?.total_paid),\n              \"Reste à Payer\": cleanValue(student?.total_remaining),\n              \"Tranches Incomplètes\":\n                student?.incomplete_tranches\n                  ?.map(\n                    (t) =>\n                      `${t?.tranche_name}: ${t?.paid_amount}/${t?.required_amount}`\n                  )\n                  .join(\", \") || \"\",\n            }));\n\n            const worksheet = XLSX.utils.json_to_sheet(studentsData);\n            XLSX.utils.book_append_sheet(\n              workbook,\n              worksheet,\n              \"Élèves Insolvables\"\n            );\n          }\n          break;\n\n        case \"payments\":\n          if (data.students && Array.isArray(data.students)) {\n            const paymentsData = data.students.map((student) => ({\n              Étudiant: cleanValue(student?.student?.full_name),\n              \"Classe/Série\": cleanValue(student?.student?.class_series),\n              \"Total Requis\": cleanValue(student?.total_required),\n              \"Total Payé\": cleanValue(student?.total_paid),\n              Statut: cleanValue(student?.status),\n            }));\n\n            const worksheet = XLSX.utils.json_to_sheet(paymentsData);\n            XLSX.utils.book_append_sheet(workbook, worksheet, \"Paiements\");\n          }\n          break;\n\n        case \"rame\":\n          if (data.students && Array.isArray(data.students)) {\n            const rameData = data.students.map((student) => ({\n              Étudiant: cleanValue(student?.student?.full_name),\n              \"Classe/Série\": cleanValue(student?.student?.class_series),\n              \"Statut RAME\": cleanValue(student?.rame_status),\n              \"Date de Paiement\": cleanValue(\n                student?.rame_details?.payment_date\n              ),\n            }));\n\n            const worksheet = XLSX.utils.json_to_sheet(rameData);\n            XLSX.utils.book_append_sheet(workbook, worksheet, \"État RAME\");\n          }\n          break;\n\n        case \"scholarships_discounts\":\n          if (data.students && Array.isArray(data.students)) {\n            const scholarshipsData = data.students.map((student) => ({\n              Étudiant: cleanValue(student?.student?.full_name),\n              \"Classe/Série\": cleanValue(student?.student?.class_series),\n              \"Type de Réduction\": cleanValue(student?.discount_type),\n              Montant: cleanValue(student?.discount_amount),\n              Pourcentage: cleanValue(\n                student?.discount_percentage\n                  ? `${student.discount_percentage}%`\n                  : \"\"\n              ),\n            }));\n\n            const worksheet = XLSX.utils.json_to_sheet(scholarshipsData);\n            XLSX.utils.book_append_sheet(\n              workbook,\n              worksheet,\n              \"Bourses et Rabais\"\n            );\n          }\n          break;\n\n        case \"collection_details\":\n          if (data.collections && Array.isArray(data.collections)) {\n            const collectionsData = data.collections.map((collection) => ({\n              Matricule: cleanValue(collection?.student?.matricule),\n              Nom: cleanValue(collection?.student?.last_name),\n              Prénom: cleanValue(collection?.student?.first_name),\n              Classe: cleanValue(collection?.student?.class_name),\n              \"Date de Versement\": cleanValue(collection?.payment_date),\n              \"Date de Validation\": collection?.validated_at\n                ? cleanValue(collection.validated_at)\n                : \"En attente\",\n              Montant: cleanValue(collection?.amount),\n              \"Nom du Comptable\": cleanValue(collection?.validator_name),\n              \"N° Reçu\": cleanValue(collection?.receipt_number),\n              Rabais: collection?.has_reduction\n                ? cleanValue(collection?.reduction_amount)\n                : 0,\n            }));\n\n            const worksheet = XLSX.utils.json_to_sheet(collectionsData);\n            XLSX.utils.book_append_sheet(\n              workbook,\n              worksheet,\n              \"Détail Encaissements\"\n            );\n\n            // Ajouter une feuille de statistiques\n            if (data.statistics) {\n              const statsData = [];\n\n              // Statistiques par méthode\n              if (data.statistics.by_payment_method) {\n                statsData.push([\"STATISTIQUES PAR MÉTHODE DE PAIEMENT\"]);\n                statsData.push([\"Méthode\", \"Nombre\", \"Montant\"]);\n                data.statistics.by_payment_method.forEach((method) => {\n                  statsData.push([method.label, method.count, method.total]);\n                });\n                statsData.push([]);\n              }\n\n              // Statistiques par tranche\n              if (data.statistics.by_payment_tranche) {\n                statsData.push([\"STATISTIQUES PAR TRANCHE\"]);\n                statsData.push([\"Tranche\", \"Nombre\", \"Montant\"]);\n                data.statistics.by_payment_tranche.forEach((tranche) => {\n                  statsData.push([\n                    tranche.tranche_name,\n                    tranche.count,\n                    tranche.total,\n                  ]);\n                });\n              }\n\n              const statsWorksheet = XLSX.utils.aoa_to_sheet(statsData);\n              XLSX.utils.book_append_sheet(\n                workbook,\n                statsWorksheet,\n                \"Statistiques\"\n              );\n            }\n          }\n          break;\n\n        default:\n          throw new Error(\"Type de rapport non reconnu pour l'export Excel\");\n      }\n\n      // Télécharger le fichier\n      XLSX.writeFile(workbook, fileName);\n\n      Swal.fire({\n        title: \"Export réussi !\",\n        text: `Le fichier ${fileName} a été téléchargé`,\n        icon: \"success\",\n        timer: 3000,\n      });\n    } catch (error) {\n      console.error(\"Erreur lors de l'export Excel:\", error);\n      Swal.fire(\"Erreur\", \"Erreur lors de l'export Excel\", \"error\");\n    }\n  }, []);\n\n  const generateReport = async (reportType) => {\n    const cacheKey = generateCacheKey(reportType, filters);\n\n    // Vérifier le cache d'abord\n    const cachedData = getCachedReport(cacheKey);\n    if (cachedData) {\n      setReportData(cachedData);\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      let response;\n\n      switch (reportType) {\n        case \"insolvable\":\n          response = await secureApiEndpoints.reports.getInsolvableReport(\n            filters\n          );\n          break;\n        case \"payments\":\n          response = await secureApiEndpoints.reports.getPaymentsReport(\n            filters\n          );\n          break;\n        case \"rame\":\n          response = await secureApiEndpoints.reports.getRameReport(filters);\n          break;\n        case \"scholarships_discounts\":\n          response =\n            await secureApiEndpoints.reports.getScholarshipsDiscountsReport(\n              filters\n            );\n          break;\n        case \"collection_details\":\n          response =\n            await secureApiEndpoints.reports.getCollectionDetailsReport(\n              filters\n            );\n          break;\n        default:\n          throw new Error(\"Type de rapport non reconnu\");\n      }\n\n      if (response.success) {\n        setReportData(response.data);\n        // Mettre en cache les données\n        cacheReport(cacheKey, response.data);\n      } else {\n        setError(response.message || \"Erreur lors de la génération du rapport\");\n      }\n    } catch (error) {\n      setError(\"Erreur lors de la génération du rapport\");\n      console.error(\"Error generating report:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const exportReport = async (format = \"pdf\") => {\n    if (!reportData) {\n      Swal.fire(\"Erreur\", \"Aucun rapport à exporter\", \"error\");\n      return;\n    }\n\n    try {\n      Swal.fire({\n        title: \"Export en cours...\",\n        text: \"Génération du fichier PDF\",\n        allowOutsideClick: false,\n        showConfirmButton: false,\n        willOpen: () => {\n          Swal.showLoading();\n        },\n      });\n\n      // Préparer les paramètres pour l'export\n      const exportParams = {\n        ...filters,\n        report_type: activeTab,\n      };\n\n      // Appeler l'API d'export PDF\n      const response = await secureApiEndpoints.reports.exportPdf(exportParams);\n\n      if (response.success) {\n        // Ouvrir le HTML dans une nouvelle fenêtre pour impression/sauvegarde PDF\n        const printWindow = window.open(\"\", \"_blank\");\n        printWindow.document.write(response.data);\n        printWindow.document.close();\n\n        // Attendre un peu que le contenu se charge puis déclencher l'impression\n        setTimeout(() => {\n          printWindow.focus();\n          printWindow.print();\n        }, 500);\n\n        Swal.fire(\n          \"Succès\",\n          \"Rapport ouvert pour impression/sauvegarde PDF\",\n          \"success\"\n        );\n      } else {\n        Swal.fire(\n          \"Erreur\",\n          response.message || \"Erreur lors de l'export PDF\",\n          \"error\"\n        );\n      }\n    } catch (error) {\n      console.error(\"Error exporting PDF:\", error);\n      Swal.fire(\"Erreur\", \"Erreur lors de l'export PDF\", \"error\");\n    }\n  };\n\n  const renderFilterSection = () => (\n    <Card className=\"mb-4\">\n      <Card.Header>\n        <h5 className=\"mb-0\">\n          <Search className=\"me-2\" />\n          Filtres\n        </h5>\n      </Card.Header>\n      <Card.Body>\n        <Row>\n          <Col md={3}>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Section</Form.Label>\n              <Form.Select\n                value={filters.sectionId}\n                onChange={(e) => {\n                  setFilters({\n                    ...filters,\n                    sectionId: e.target.value,\n                    // Réinitialiser classe et série si section change\n                    classId: \"\",\n                    seriesId: \"\",\n                  });\n                }}\n              >\n                <option value=\"\">Toutes les sections</option>\n                {availableOptions.sections.map((section) => (\n                  <option key={section.id} value={section.id}>\n                    {section.name}\n                  </option>\n                ))}\n              </Form.Select>\n            </Form.Group>\n          </Col>\n          <Col md={3}>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Classe</Form.Label>\n              <Form.Select\n                value={filters.classId}\n                onChange={(e) => {\n                  setFilters({\n                    ...filters,\n                    classId: e.target.value,\n                    // Réinitialiser série si classe change\n                    seriesId: \"\",\n                  });\n                }}\n              >\n                <option value=\"\">Toutes les classes</option>\n                {availableOptions.classes\n                  .filter(schoolClass => {\n                    // Si une section est sélectionnée, filtrer les classes de cette section\n                    if (!filters.sectionId) return true;\n                    return schoolClass.level?.section?.id == filters.sectionId;\n                  })\n                  .map((schoolClass) => (\n                    <option key={schoolClass.id} value={schoolClass.id}>\n                      {schoolClass.name}\n                    </option>\n                  ))}\n              </Form.Select>\n            </Form.Group>\n          </Col>\n          <Col md={3}>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Série</Form.Label>\n              <Form.Select\n                value={filters.seriesId}\n                onChange={(e) => {\n                  setFilters({\n                    ...filters,\n                    seriesId: e.target.value,\n                  });\n                }}\n              >\n                <option value=\"\">Toutes les séries</option>\n                {availableOptions.series\n                  .filter(series => {\n                    // Filtrer par section si sélectionnée\n                    if (filters.sectionId && series.section_id != filters.sectionId) return false;\n                    // Filtrer par classe si sélectionnée\n                    if (filters.classId && series.class_id != filters.classId) return false;\n                    return true;\n                  })\n                  .map((series) => (\n                    <option key={series.id} value={series.id}>\n                      {series.name}\n                    </option>\n                  ))}\n              </Form.Select>\n            </Form.Group>\n          </Col>\n          <Col md={3}>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Date de début</Form.Label>\n              <Form.Control\n                type=\"date\"\n                value={filters.startDate}\n                onChange={(e) => {\n                  setFilters({\n                    ...filters,\n                    startDate: e.target.value,\n                  });\n                }}\n              />\n            </Form.Group>\n          </Col>\n        </Row>\n        <Row>\n          <Col md={3}>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Date de fin</Form.Label>\n              <Form.Control\n                type=\"date\"\n                value={filters.endDate}\n                onChange={(e) => {\n                  setFilters({\n                    ...filters,\n                    endDate: e.target.value,\n                  });\n                }}\n              />\n            </Form.Group>\n          </Col>\n        </Row>\n        <Row>\n          <Col className=\"d-flex gap-2\">\n            <Button\n              variant=\"primary\"\n              onClick={() => generateReport(activeTab)}\n              disabled={loading}\n            >\n              {loading ? (\n                <>\n                  <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />\n                  Génération...\n                </>\n              ) : (\n                <>\n                  <FileEarmarkText className=\"me-2\" />\n                  Générer le rapport\n                </>\n              )}\n            </Button>\n            {reportData && (\n              <>\n                <Button\n                  variant=\"outline-success\"\n                  onClick={() => exportReport(\"pdf\")}\n                >\n                  <Download className=\"me-2\" />\n                  Exporter PDF\n                </Button>\n                <Button\n                  variant=\"outline-primary\"\n                  onClick={() => exportToExcel(sortedReportData, activeTab)}\n                >\n                  <FileText className=\"me-2\" />\n                  Exporter Excel\n                </Button>\n              </>\n            )}\n            {(filters.sectionId || filters.classId || filters.seriesId) && (\n              <Button\n                variant=\"outline-secondary\"\n                onClick={() => setFilters({ sectionId: \"\", classId: \"\", seriesId: \"\", startDate: \"\", endDate: \"\" })}\n              >\n                Réinitialiser filtres\n              </Button>\n            )}\n          </Col>\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n\n  const renderInsolvableReport = () => (\n    <Card>\n      <Card.Header>\n        <h5 className=\"mb-0\">\n          État Insolvable - Élèves n'ayant pas fini de payer\n        </h5>\n      </Card.Header>\n      <Card.Body>\n        {paginatedReportData ? (\n          <>\n            <div className=\"mb-3\">\n              <Badge bg=\"info\">\n                Total des élèves insolvables:{\" \"}\n                {paginatedReportData?.total_insolvable_students || 0}\n              </Badge>\n            </div>\n            <Table responsive striped size=\"sm\">\n              <thead>\n                <tr>\n                  <SortableHeader sortKey=\"student.full_name\">\n                    Étudiant\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"student.class_series\">\n                    Classe/Série\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"total_required\">\n                    Total Requis\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"total_paid\">\n                    Total Payé\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"total_remaining\">\n                    Reste à Payer\n                  </SortableHeader>\n                  <th>Tranches Incomplètes</th>\n                </tr>\n              </thead>\n              <tbody>\n                {paginatedReportData.students?.map(\n                  (studentData, studentIndex) => (\n                    <tr key={studentIndex}>\n                      <td>{studentData?.student?.full_name}</td>\n                      <td>{studentData?.student?.class_series}</td>\n                      <td>\n                        {formatCurrency(studentData?.total_required || 0)}\n                      </td>\n                      <td>{formatCurrency(studentData?.total_paid || 0)}</td>\n                      <td className=\"text-danger\">\n                        {formatCurrency(studentData?.total_remaining || 0)}\n                      </td>\n                      <td>\n                        {studentData.incomplete_tranches?.map(\n                          (tranche, trancheIndex) => (\n                            <div key={trancheIndex}>\n                              <small className=\"text-muted\">\n                                <strong>{tranche?.tranche_name}:</strong>{\" \"}\n                                {formatCurrency(tranche?.paid_amount || 0)}/\n                                {formatCurrency(tranche?.required_amount || 0)}\n                                <span className=\"text-danger\">\n                                  {\" \"}\n                                  (reste:{\" \"}\n                                  {formatCurrency(\n                                    tranche?.remaining_amount || 0\n                                  )}\n                                  )\n                                </span>\n                              </small>\n                            </div>\n                          )\n                        )}\n                      </td>\n                    </tr>\n                  )\n                )}\n              </tbody>\n            </Table>\n            <PaginationControls\n              dataArray={sortedReportData?.students}\n              dataType=\"élèves insolvables\"\n            />\n          </>\n        ) : (\n          <p className=\"text-muted text-center\">\n            Générez un rapport pour voir les données\n          </p>\n        )}\n      </Card.Body>\n    </Card>\n  );\n\n  const renderPaymentsReport = () => (\n    <Card>\n      <Card.Header>\n        <h5 className=\"mb-0\">\n          État des Paiements - Tous les élèves avec infos toutes tranches\n        </h5>\n      </Card.Header>\n      <Card.Body>\n        {reportData ? (\n          <>\n            <div className=\"mb-3\">\n              <Badge bg=\"info\">\n                Total des élèves: {reportData?.total_students || 0}\n              </Badge>\n            </div>\n            {reportData.students?.map((studentData, studentIndex) => (\n              <div key={studentIndex} className=\"mb-3 p-3 border rounded\">\n                <h6 className=\"mb-2\">\n                  {studentData?.student?.full_name} -{\" \"}\n                  {studentData?.student?.class_series}\n                </h6>\n                <Table responsive striped size=\"sm\">\n                  <thead>\n                    <tr>\n                      <th>Tranche</th>\n                      <th>Montant Requis</th>\n                      <th>Montant Payé</th>\n                      <th>Reste à Payer</th>\n                      <th>Statut</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {studentData?.tranches_details?.map(\n                      (tranche, trancheIndex) => (\n                        <tr key={trancheIndex}>\n                          <td>{tranche?.tranche_name}</td>\n                          <td>\n                            {formatCurrency(tranche?.required_amount || 0)}\n                          </td>\n                          <td>{formatCurrency(tranche?.paid_amount || 0)}</td>\n                          <td\n                            className={\n                              (tranche?.remaining_amount || 0) > 0\n                                ? \"text-danger\"\n                                : \"text-success\"\n                            }\n                          >\n                            {formatCurrency(tranche?.remaining_amount || 0)}\n                          </td>\n                          <td>\n                            <Badge\n                              bg={\n                                tranche?.status === \"complete\"\n                                  ? \"success\"\n                                  : \"warning\"\n                              }\n                            >\n                              {tranche?.status === \"complete\"\n                                ? \"Complet\"\n                                : \"Incomplet\"}\n                            </Badge>\n                          </td>\n                        </tr>\n                      )\n                    )}\n                  </tbody>\n                </Table>\n              </div>\n            ))}\n          </>\n        ) : (\n          <p className=\"text-muted text-center\">\n            Générez un rapport pour voir les données\n          </p>\n        )}\n      </Card.Body>\n    </Card>\n  );\n\n  const renderRameReport = () => (\n    <Card>\n      <Card.Header>\n        <h5 className=\"mb-0\">\n          État RAME - Liste des élèves avec statut RAME\n        </h5>\n      </Card.Header>\n      <Card.Body>\n        {paginatedReportData ? (\n          <>\n            <div className=\"mb-3\">\n              <Row>\n                <Col md={3}>\n                  <Card className=\"text-center border-primary\">\n                    <Card.Body>\n                      <h4 className=\"text-primary mb-0\">\n                        {paginatedReportData?.summary?.total_students || 0}\n                      </h4>\n                      <p className=\"text-muted mb-0\">Total Étudiants</p>\n                    </Card.Body>\n                  </Card>\n                </Col>\n                <Col md={3}>\n                  <Card className=\"text-center border-success\">\n                    <Card.Body>\n                      <h4 className=\"text-success mb-0\">\n                        {paginatedReportData?.summary?.paid_count || 0}\n                      </h4>\n                      <p className=\"text-muted mb-0\">RAME Payée</p>\n                    </Card.Body>\n                  </Card>\n                </Col>\n                <Col md={3}>\n                  <Card className=\"text-center border-info\">\n                    <Card.Body>\n                      <h4 className=\"text-info mb-0\">\n                        {paginatedReportData?.summary?.physical_count || 0}\n                      </h4>\n                      <p className=\"text-muted mb-0\">RAME Physique</p>\n                    </Card.Body>\n                  </Card>\n                </Col>\n                <Col md={3}>\n                  <Card className=\"text-center border-danger\">\n                    <Card.Body>\n                      <h4 className=\"text-danger mb-0\">\n                        {paginatedReportData?.summary?.unpaid_count || 0}\n                      </h4>\n                      <p className=\"text-muted mb-0\">Non Payée</p>\n                    </Card.Body>\n                  </Card>\n                </Col>\n              </Row>\n            </div>\n            \n            <Table responsive striped size=\"sm\">\n              <thead>\n                <tr>\n                  <SortableHeader sortKey=\"student.full_name\">\n                    Étudiant\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"student.class_series\">\n                    Classe/Série\n                  </SortableHeader>\n                  <th>Statut RAME</th>\n                  <SortableHeader sortKey=\"rame_details.payment_status\">\n                    Statut\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"rame_details.payment_type\">\n                    Type\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"rame_details.payment_date\">\n                    Date\n                  </SortableHeader>\n                  <th>Notes</th>\n                </tr>\n              </thead>\n              <tbody>\n                {paginatedReportData.students?.map((studentData, studentIndex) => (\n                  <tr key={studentIndex}>\n                    <td>{studentData?.student?.full_name}</td>\n                    <td>{studentData?.student?.class_series}</td>\n                    <td className=\"text-center\">\n                      {studentData?.rame_details?.has_brought_rame && (\n                        <Badge bg=\"info\" className=\"me-1\">\n                          Physique\n                        </Badge>\n                      )}\n                      {studentData?.rame_details?.has_paid_rame && (\n                        <Badge bg=\"warning\">\n                          Payée\n                        </Badge>\n                      )}\n                      {!studentData?.rame_details?.has_brought_rame && !studentData?.rame_details?.has_paid_rame && (\n                        <Badge bg=\"secondary\">\n                          Aucun\n                        </Badge>\n                      )}\n                    </td>\n                    <td>\n                      <Badge\n                        bg={\n                          studentData?.rame_details?.payment_status === 'paid'\n                            ? \"success\"\n                            : \"danger\"\n                        }\n                      >\n                        {studentData?.rame_details?.payment_status === 'paid' ? 'Payé' : 'Non payé'}\n                      </Badge>\n                    </td>\n                    <td>\n                      <Badge\n                        bg={\n                          studentData?.rame_details?.payment_type === 'physical'\n                            ? \"info\"\n                            : studentData?.rame_details?.payment_type === 'cash'\n                            ? \"warning\"\n                            : \"secondary\"\n                        }\n                      >\n                        {studentData?.rame_details?.payment_type === 'physical' \n                          ? 'Physique' \n                          : studentData?.rame_details?.payment_type === 'cash'\n                          ? 'Espèces'\n                          : 'Non payé'}\n                      </Badge>\n                    </td>\n                    <td>\n                      {studentData?.rame_details?.payment_date\n                        ? new Date(studentData.rame_details.payment_date).toLocaleDateString('fr-FR')\n                        : '-'}\n                    </td>\n                    <td>\n                      <small className=\"text-muted\">\n                        {studentData?.rame_details?.notes || '-'}\n                      </small>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </Table>\n            <PaginationControls\n              dataArray={sortedReportData?.students}\n              dataType=\"élèves\"\n            />\n          </>\n        ) : (\n          <p className=\"text-muted text-center\">\n            Générez un rapport pour voir les données\n          </p>\n        )}\n      </Card.Body>\n    </Card>\n  );\n\n\n  // Fonction pour filtrer les données des bourses et rabais\n  const getScholarshipsFilteredData = useCallback(() => {\n    if (!reportData?.students) return [];\n\n    return reportData.students.filter((student) => {\n      const hasScholarship = student.scholarship_reason;\n      const hasDiscount = student.discount_reason;\n\n      return hasScholarship || hasDiscount; // Afficher tous les bénéficiaires\n    });\n  }, [reportData?.students]);\n\n  // Données filtrées et triées pour les bourses et rabais\n  const scholarshipsFilteredStudents = getScholarshipsFilteredData();\n\n  const scholarshipsSortedStudents = useMemo(() => {\n    if (\n      activeTab === \"scholarships_discounts\" &&\n      sortConfig.key &&\n      sortConfig.direction\n    ) {\n      return sortData(\n        scholarshipsFilteredStudents,\n        sortConfig.key,\n        sortConfig.direction\n      );\n    }\n    return scholarshipsFilteredStudents;\n  }, [scholarshipsFilteredStudents, sortConfig, sortData, activeTab]);\n\n  const scholarshipsPaginatedStudents = useMemo(() => {\n    if (activeTab !== \"scholarships_discounts\") return [];\n    const startIndex = (currentPage - 1) * itemsPerPage;\n    return scholarshipsSortedStudents.slice(\n      startIndex,\n      startIndex + itemsPerPage\n    );\n  }, [scholarshipsSortedStudents, currentPage, itemsPerPage, activeTab]);\n\n  const renderScholarshipsDiscountsReport = () => {\n    return (\n      <Card>\n        <Card.Header>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <div>\n              <h5 className=\"mb-0\">États Bourses et Rabais</h5>\n              <small className=\"text-muted\">\n                Tous les avantages accordés aux élèves\n              </small>\n            </div>\n            {reportData && (\n              <Badge bg=\"primary\">\n                {scholarshipsSortedStudents.length} bénéficiaire(s)\n              </Badge>\n            )}\n          </div>\n        </Card.Header>\n        <Card.Body>\n          {reportData ? (\n            <>\n              {/* Statistiques améliorées */}\n              <Row className=\"mb-4\">\n                <Col md={3}>\n                  <Card className=\"text-center border-info h-100\">\n                    <Card.Body>\n                      <div className=\"d-flex align-items-center justify-content-center mb-2\">\n                        <CashCoin className=\"text-info me-2\" size={24} />\n                        <h4 className=\"text-info mb-0\">\n                          {formatCurrency(\n                            reportData.summary?.total_scholarships || 0\n                          )}\n                        </h4>\n                      </div>\n                      <p className=\"text-muted mb-0\">Total Bourses</p>\n                      <small className=\"text-info\">\n                        {reportData.students?.filter(\n                          (s) => s.scholarship_reason\n                        ).length || 0}{\" \"}\n                        bénéficiaires\n                      </small>\n                    </Card.Body>\n                  </Card>\n                </Col>\n                <Col md={3}>\n                  <Card className=\"text-center border-warning h-100\">\n                    <Card.Body>\n                      <div className=\"d-flex align-items-center justify-content-center mb-2\">\n                        <BarChart className=\"text-warning me-2\" size={24} />\n                        <h4 className=\"text-warning mb-0\">\n                          {formatCurrency(\n                            reportData.summary?.total_discounts || 0\n                          )}\n                        </h4>\n                      </div>\n                      <p className=\"text-muted mb-0\">Total Rabais</p>\n                      <small className=\"text-warning\">\n                        {reportData.students?.filter((s) => s.discount_reason)\n                          .length || 0}{\" \"}\n                        bénéficiaires\n                      </small>\n                    </Card.Body>\n                  </Card>\n                </Col>\n                <Col md={3}>\n                  <Card className=\"text-center border-success h-100\">\n                    <Card.Body>\n                      <div className=\"d-flex align-items-center justify-content-center mb-2\">\n                        <Building className=\"text-success me-2\" size={24} />\n                        <h4 className=\"text-success mb-0\">\n                          {formatCurrency(\n                            (reportData.summary?.total_scholarships || 0) +\n                              (reportData.summary?.total_discounts || 0)\n                          )}\n                        </h4>\n                      </div>\n                      <p className=\"text-muted mb-0\">Total Avantages</p>\n                      <small className=\"text-success\">\n                        {reportData.summary?.beneficiary_count || 0}{\" \"}\n                        bénéficiaires\n                      </small>\n                    </Card.Body>\n                  </Card>\n                </Col>\n                <Col md={3}>\n                  <Card className=\"text-center border-primary h-100\">\n                    <Card.Body>\n                      <div className=\"d-flex align-items-center justify-content-center mb-2\">\n                        <Calendar className=\"text-primary me-2\" size={24} />\n                        <h4 className=\"text-primary mb-0\">\n                          {(\n                            ((reportData.summary?.beneficiary_count || 0) /\n                              Math.max(scholarshipsSortedStudents.length, 1)) *\n                            100\n                          ).toFixed(1)}\n                          %\n                        </h4>\n                      </div>\n                      <p className=\"text-muted mb-0\">Taux Bénéficiaires</p>\n                      <small className=\"text-primary\">\n                        Sur {scholarshipsSortedStudents.length} élèves\n                      </small>\n                    </Card.Body>\n                  </Card>\n                </Col>\n              </Row>\n\n              {/* Contrôles de pagination et affichage */}\n              <Row className=\"mb-3\">\n                <Col md={6}>\n                  <Form.Group>\n                    <Form.Label>Éléments par page</Form.Label>\n                    <Form.Select\n                      value={itemsPerPage}\n                      onChange={(e) => {\n                        setItemsPerPage(parseInt(e.target.value));\n                        setCurrentPage(1);\n                      }}\n                      style={{ width: \"auto\" }}\n                    >\n                      <option value={10}>10</option>\n                      <option value={25}>25</option>\n                      <option value={50}>50</option>\n                      <option value={100}>100</option>\n                    </Form.Select>\n                  </Form.Group>\n                </Col>\n                <Col md={6} className=\"text-end\">\n                  <small className=\"text-muted\">\n                    Affichage de {(currentPage - 1) * itemsPerPage + 1} à{\" \"}\n                    {Math.min(\n                      currentPage * itemsPerPage,\n                      scholarshipsSortedStudents.length\n                    )}{\" \"}\n                    sur {scholarshipsSortedStudents.length} bénéficiaires\n                  </small>\n                </Col>\n              </Row>\n\n              <Table responsive striped hover size=\"sm\">\n                <thead className=\"table-dark\">\n                  <tr>\n                    <th\n                      style={{ cursor: \"pointer\" }}\n                      onClick={() => handleSort(\"class_name\")}\n                    >\n                      Classe {getSortIcon(\"class_name\")}\n                    </th>\n                    <th\n                      style={{ cursor: \"pointer\" }}\n                      onClick={() => handleSort(\"student_name\")}\n                    >\n                      Nom & Prénoms {getSortIcon(\"student_name\")}\n                    </th>\n                    <th\n                      style={{ cursor: \"pointer\" }}\n                      onClick={() => handleSort(\"tuition_amount\")}\n                    >\n                      Scolarité {getSortIcon(\"tuition_amount\")}\n                    </th>\n                    <th>Type d'Avantage</th>\n                    <th\n                      style={{ cursor: \"pointer\" }}\n                      onClick={() => handleSort(\"total_benefit_amount\")}\n                    >\n                      Montant Avantage {getSortIcon(\"total_benefit_amount\")}\n                    </th>\n                    <th>Économie (%)</th>\n                    <th>Obs</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {scholarshipsPaginatedStudents.map((student, index) => {\n                    const savingsPercentage =\n                      student.tuition_amount > 0\n                        ? (\n                            ((student.total_benefit_amount || 0) /\n                              student.tuition_amount) *\n                            100\n                          ).toFixed(1)\n                        : 0;\n\n                    return (\n                      <tr key={index}>\n                        <td>\n                          <Badge bg=\"secondary\" className=\"me-1\">\n                            {student.class_name}\n                          </Badge>\n                        </td>\n                        <td>\n                          <strong>{student.student_name}</strong>\n                        </td>\n                        <td className=\"text-end\">\n                          {formatCurrency(student.tuition_amount)}\n                        </td>\n                        <td>\n                          <div className=\"d-flex flex-wrap gap-1\">\n                            {student.scholarship_reason && (\n                              <Badge bg=\"info\" size=\"sm\">\n                                <CashCoin size={12} className=\"me-1\" />\n                                Bourse: {student.scholarship_reason}\n                              </Badge>\n                            )}\n                            {student.discount_reason && (\n                              <Badge bg=\"warning\" size=\"sm\">\n                                <BarChart size={12} className=\"me-1\" />\n                                Rabais: {student.discount_reason}\n                              </Badge>\n                            )}\n                          </div>\n                        </td>\n                        <td className=\"text-end\">\n                          <strong className=\"text-success\">\n                            {formatCurrency(student.total_benefit_amount)}\n                          </strong>\n                        </td>\n                        <td className=\"text-center\">\n                          <Badge\n                            bg={\n                              savingsPercentage >= 50\n                                ? \"success\"\n                                : savingsPercentage >= 25\n                                ? \"warning\"\n                                : \"info\"\n                            }\n                            className=\"px-2\"\n                          >\n                            {savingsPercentage}%\n                          </Badge>\n                        </td>\n                        <td>\n                          {student.observation && (\n                            <small className=\"text-muted\">\n                              {student.observation}\n                            </small>\n                          )}\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </Table>\n\n              {/* Pagination */}\n              {scholarshipsSortedStudents.length > itemsPerPage && (\n                <Row className=\"mt-3\">\n                  <Col className=\"d-flex justify-content-center\">\n                    <Pagination>\n                      <Pagination.First\n                        onClick={() => setCurrentPage(1)}\n                        disabled={currentPage === 1}\n                      />\n                      <Pagination.Prev\n                        onClick={() => setCurrentPage(currentPage - 1)}\n                        disabled={currentPage === 1}\n                      />\n\n                      {Array.from(\n                        {\n                          length: Math.ceil(\n                            scholarshipsSortedStudents.length / itemsPerPage\n                          ),\n                        },\n                        (_, i) => i + 1\n                      )\n                        .filter((page) => Math.abs(page - currentPage) <= 2)\n                        .map((page) => (\n                          <Pagination.Item\n                            key={page}\n                            active={page === currentPage}\n                            onClick={() => setCurrentPage(page)}\n                          >\n                            {page}\n                          </Pagination.Item>\n                        ))}\n\n                      <Pagination.Next\n                        onClick={() => setCurrentPage(currentPage + 1)}\n                        disabled={\n                          currentPage ===\n                          Math.ceil(\n                            scholarshipsSortedStudents.length / itemsPerPage\n                          )\n                        }\n                      />\n                      <Pagination.Last\n                        onClick={() =>\n                          setCurrentPage(\n                            Math.ceil(\n                              scholarshipsSortedStudents.length / itemsPerPage\n                            )\n                          )\n                        }\n                        disabled={\n                          currentPage ===\n                          Math.ceil(\n                            scholarshipsSortedStudents.length / itemsPerPage\n                          )\n                        }\n                      />\n                    </Pagination>\n                  </Col>\n                </Row>\n              )}\n\n              {/* Récapitulatif par classe amélioré */}\n              <Card className=\"mt-4\">\n                <Card.Header>\n                  <h6 className=\"mb-0\">\n                    <Building className=\"me-2\" />\n                    Récapitulatif par Classe et Série\n                  </h6>\n                </Card.Header>\n                <Card.Body>\n                  <Table responsive striped size=\"sm\">\n                    <thead className=\"table-light\">\n                      <tr>\n                        <th>\n                          <Building size={16} className=\"me-1\" />\n                          Classe - Série\n                        </th>\n                        <th className=\"text-center\">\n                          <CashCoin size={16} className=\"me-1\" />\n                          Bénéficiaires\n                        </th>\n                        <th className=\"text-end\">\n                          <BarChart size={16} className=\"me-1\" />\n                          Bourses\n                        </th>\n                        <th className=\"text-end\">\n                          <Calendar size={16} className=\"me-1\" />\n                          Rabais\n                        </th>\n                        <th className=\"text-end\">\n                          <FileText size={16} className=\"me-1\" />\n                          Total Avantages\n                        </th>\n                        <th className=\"text-center\">Répartition</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {reportData.class_summary?.map((classSummary, index) => {\n                        const totalSchool =\n                          (reportData.summary?.total_scholarships || 0) +\n                          (reportData.summary?.total_discounts || 0);\n                        const classPercentage =\n                          totalSchool > 0\n                            ? (\n                                (classSummary.total_benefits / totalSchool) *\n                                100\n                              ).toFixed(1)\n                            : 0;\n\n                        return (\n                          <tr key={index}>\n                            <td>\n                              <strong>{classSummary.class_name}</strong>\n                              <small className=\"text-muted d-block\">\n                                {classSummary.series_name}\n                              </small>\n                            </td>\n                            <td className=\"text-center\">\n                              <Badge bg=\"primary\" className=\"px-3\">\n                                {classSummary.beneficiary_count}\n                              </Badge>\n                            </td>\n                            <td className=\"text-end\">\n                              <span className=\"text-info\">\n                                {formatCurrency(\n                                  classSummary.total_scholarships\n                                )}\n                              </span>\n                            </td>\n                            <td className=\"text-end\">\n                              <span className=\"text-warning\">\n                                {formatCurrency(classSummary.total_discounts)}\n                              </span>\n                            </td>\n                            <td className=\"text-end\">\n                              <strong className=\"text-success\">\n                                {formatCurrency(classSummary.total_benefits)}\n                              </strong>\n                            </td>\n                            <td className=\"text-center\">\n                              <Badge\n                                bg={\n                                  classPercentage >= 30\n                                    ? \"success\"\n                                    : classPercentage >= 15\n                                    ? \"warning\"\n                                    : \"info\"\n                                }\n                                className=\"px-2\"\n                              >\n                                {classPercentage}%\n                              </Badge>\n                            </td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                    <tfoot className=\"table-light\">\n                      <tr>\n                        <td>\n                          <strong>TOTAL GÉNÉRAL</strong>\n                        </td>\n                        <td className=\"text-center\">\n                          <Badge bg=\"dark\" className=\"px-3\">\n                            {reportData.summary?.beneficiary_count || 0}\n                          </Badge>\n                        </td>\n                        <td className=\"text-end\">\n                          <strong className=\"text-info\">\n                            {formatCurrency(\n                              reportData.summary?.total_scholarships || 0\n                            )}\n                          </strong>\n                        </td>\n                        <td className=\"text-end\">\n                          <strong className=\"text-warning\">\n                            {formatCurrency(\n                              reportData.summary?.total_discounts || 0\n                            )}\n                          </strong>\n                        </td>\n                        <td className=\"text-end\">\n                          <strong className=\"text-success fs-6\">\n                            {formatCurrency(\n                              (reportData.summary?.total_scholarships || 0) +\n                                (reportData.summary?.total_discounts || 0)\n                            )}\n                          </strong>\n                        </td>\n                        <td className=\"text-center\">\n                          <Badge bg=\"dark\" className=\"px-2\">\n                            100%\n                          </Badge>\n                        </td>\n                      </tr>\n                    </tfoot>\n                  </Table>\n                </Card.Body>\n              </Card>\n            </>\n          ) : (\n            <p className=\"text-muted text-center\">\n              Générez un rapport pour voir les données\n            </p>\n          )}\n        </Card.Body>\n      </Card>\n    );\n  };\n\n  const renderCollectionDetailsReport = () => (\n    <Card>\n      <Card.Header>\n        <div className=\"text-center\">\n          <div className=\"d-flex align-items-center justify-content-center mb-3\">\n            {paginatedReportData?.school_settings?.logo_url && (\n              <img\n                src={paginatedReportData.school_settings.logo_url}\n                alt=\"Logo de l'école\"\n                style={{\n                  height: \"60px\",\n                  width: \"auto\",\n                  marginRight: \"20px\",\n                  objectFit: \"contain\",\n                }}\n                onError={(e) => {\n                  e.target.style.display = \"none\";\n                }}\n              />\n            )}\n            <div>\n              <h4 className=\"mb-1\">\n                {paginatedReportData?.school_settings?.school_name ||\n                  \"COLLEGE POLYVALENT BILINGUE DE DOUALA\"}\n              </h4>\n              <h5 className=\"mb-0 text-primary\">DÉTAIL DES ENCAISSEMENTS</h5>\n            </div>\n          </div>\n          <div className=\"row mb-3\">\n            <div className=\"col-md-6\">\n              <strong>Année Académique :</strong>{\" \"}\n              {paginatedReportData?.school_year?.name || \"N/A\"}\n            </div>\n            <div className=\"col-md-6\">\n              <strong>Lieu de Dépôt :</strong>{\" \"}\n              {paginatedReportData?.summary?.deposit_location || \"BANQ\"}\n            </div>\n          </div>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <small className=\"text-muted\">\n              <strong>Période:</strong>{\" \"}\n              {paginatedReportData?.summary?.period_start\n                ? new Date(\n                    paginatedReportData.summary.period_start\n                  ).toLocaleDateString(\"fr-FR\")\n                : \"N/A\"}\n              au{\" \"}\n              {paginatedReportData?.summary?.period_end\n                ? new Date(\n                    paginatedReportData.summary.period_end\n                  ).toLocaleDateString(\"fr-FR\")\n                : \"N/A\"}\n            </small>\n            <small className=\"text-muted\">\n              <Badge bg=\"primary\" className=\"me-2\">\n                {paginatedReportData?.summary?.total_collections || 0}{\" \"}\n                encaissement(s)\n              </Badge>\n              <Badge bg=\"success\">\n                {formatCurrency(\n                  paginatedReportData?.summary?.total_amount || 0\n                )}\n              </Badge>\n            </small>\n          </div>\n        </div>\n      </Card.Header>\n      <Card.Body>\n        {paginatedReportData ? (\n          <>\n            <Table responsive striped size=\"sm\" className=\"table-bordered\">\n              <thead className=\"table-dark\">\n                <tr>\n                  <SortableHeader sortKey=\"student.matricule\">\n                    Matricule\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"student.last_name\">\n                    Nom\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"student.first_name\">\n                    Prénom\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"student.class_name\">\n                    Classe\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"payment_date\">\n                    Date de Versement\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"validated_at\">\n                    Date de Validation\n                  </SortableHeader>\n                  <SortableHeader sortKey=\"amount\">Montant</SortableHeader>\n                  <th>Nom du Comptable</th>\n                </tr>\n              </thead>\n              <tbody>\n                {paginatedReportData.collections?.map((collection, index) => (\n                  <tr key={collection.payment_id || index}>\n                    <td>\n                      <code className=\"text-primary\">\n                        {collection.student?.matricule || \"N/A\"}\n                      </code>\n                    </td>\n                    <td>\n                      <strong>{collection.student?.last_name || \"N/A\"}</strong>\n                    </td>\n                    <td>\n                      <strong>{collection.student?.first_name || \"N/A\"}</strong>\n                    </td>\n                    <td>\n                      <Badge bg=\"info\" size=\"sm\">\n                        {collection.student?.class_name || \"N/A\"}\n                      </Badge>\n                    </td>\n                    <td>\n                      <span className=\"fw-bold\">\n                        {collection.payment_date\n                          ? new Date(\n                              collection.payment_date\n                            ).toLocaleDateString(\"fr-FR\")\n                          : \"N/A\"}\n                      </span>\n                      <br />\n                      <small className=\"text-muted\">\n                        {collection.payment_time || \"\"}\n                      </small>\n                    </td>\n                    <td>\n                      {collection.validated_at ? (\n                        <span className=\"text-success fw-bold\">\n                          {new Date(collection.validated_at).toLocaleDateString(\n                            \"fr-FR\"\n                          )}\n                        </span>\n                      ) : (\n                        <Badge bg=\"warning\" size=\"sm\">\n                          En attente\n                        </Badge>\n                      )}\n                    </td>\n                    <td className=\"text-end\">\n                      <strong className=\"text-success fs-6\">\n                        {formatCurrency(collection.amount || 0)}\n                      </strong>\n                      {collection.has_reduction && (\n                        <div>\n                          <small className=\"text-info\">\n                            (Rabais: -\n                            {formatCurrency(collection.reduction_amount || 0)})\n                          </small>\n                        </div>\n                      )}\n                    </td>\n                    <td>\n                      <span className=\"fw-bold text-primary\">\n                        {collection.validator_name || \"Système\"}\n                      </span>\n                      <br />\n                      <small className=\"text-muted\">\n                        Reçu N°: {collection.receipt_number || \"N/A\"}\n                      </small>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </Table>\n            <PaginationControls\n              dataArray={sortedReportData?.collections}\n              dataType=\"encaissements\"\n            />\n\n            {/* Statistiques complémentaires */}\n            {paginatedReportData?.statistics && (\n              <Row className=\"mt-4\">\n                <Col md={6}>\n                  <Card>\n                    <Card.Header>\n                      <h6 className=\"mb-0\">Par Méthode de Paiement</h6>\n                    </Card.Header>\n                    <Card.Body>\n                      <Table size=\"sm\" responsive>\n                        <thead>\n                          <tr>\n                            <th>Méthode</th>\n                            <th className=\"text-center\">Nombre</th>\n                            <th className=\"text-end\">Montant</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {paginatedReportData.statistics.by_payment_method?.map(\n                            (method, idx) => (\n                              <tr key={idx}>\n                                <td>{method.label}</td>\n                                <td className=\"text-center\">\n                                  <Badge bg=\"info\">{method.count}</Badge>\n                                </td>\n                                <td className=\"text-end\">\n                                  {formatCurrency(method.total)}\n                                </td>\n                              </tr>\n                            )\n                          )}\n                        </tbody>\n                      </Table>\n                    </Card.Body>\n                  </Card>\n                </Col>\n                <Col md={6}>\n                  <Card>\n                    <Card.Header>\n                      <h6 className=\"mb-0\">Par Tranche de Paiement</h6>\n                    </Card.Header>\n                    <Card.Body>\n                      <Table size=\"sm\" responsive>\n                        <thead>\n                          <tr>\n                            <th>Tranche</th>\n                            <th className=\"text-center\">Nombre</th>\n                            <th className=\"text-end\">Montant</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {paginatedReportData.statistics.by_payment_tranche?.map(\n                            (tranche, idx) => (\n                              <tr key={idx}>\n                                <td>{tranche.tranche_name}</td>\n                                <td className=\"text-center\">\n                                  <Badge bg=\"warning\">{tranche.count}</Badge>\n                                </td>\n                                <td className=\"text-end\">\n                                  {formatCurrency(tranche.total)}\n                                </td>\n                              </tr>\n                            )\n                          )}\n                        </tbody>\n                      </Table>\n                    </Card.Body>\n                  </Card>\n                </Col>\n              </Row>\n            )}\n          </>\n        ) : (\n          <p className=\"text-muted text-center\">\n            Générez un rapport pour voir les données\n          </p>\n        )}\n      </Card.Body>\n    </Card>\n  );\n\n  return (\n    <Container fluid className=\"py-4\">\n      <Row className=\"mb-4\">\n        <Col>\n          <h2>\n            <FileText className=\"me-3\" />\n            Rapports Financiers\n          </h2>\n          <p className=\"text-muted\">\n            Génération de rapports détaillés avec prise en compte des bourses et\n            réductions\n          </p>\n        </Col>\n      </Row>\n\n      {error && (\n        <Alert variant=\"danger\" dismissible onClose={() => setError(\"\")}>\n          {error}\n        </Alert>\n      )}\n\n      {renderFilterSection()}\n\n      <Tab.Container activeKey={activeTab} onSelect={setActiveTab}>\n        <Row>\n          <Col>\n            <Nav variant=\"tabs\" className=\"mb-4\">\n              <Nav.Item>\n                <Nav.Link eventKey=\"insolvable\">\n                  <Building className=\"me-2\" />\n                  État Insolvable\n                </Nav.Link>\n              </Nav.Item>\n              <Nav.Item>\n                <Nav.Link eventKey=\"payments\">\n                  <CashCoin className=\"me-2\" />\n                  Paiements\n                </Nav.Link>\n              </Nav.Item>\n              <Nav.Item>\n                <Nav.Link eventKey=\"rame\">\n                  <FileEarmarkText className=\"me-2\" />\n                  État RAME\n                </Nav.Link>\n              </Nav.Item>\n              <Nav.Item>\n                <Nav.Link eventKey=\"scholarships_discounts\">\n                  <Building className=\"me-2\" />\n                  Bourses & Rabais\n                </Nav.Link>\n              </Nav.Item>\n              <Nav.Item>\n                <Nav.Link eventKey=\"collection_details\">\n                  <CashCoin className=\"me-2\" />\n                  Détail des Encaissements\n                </Nav.Link>\n              </Nav.Item>\n            </Nav>\n\n            <Tab.Content>\n              <Tab.Pane eventKey=\"insolvable\">\n                {renderInsolvableReport()}\n              </Tab.Pane>\n              <Tab.Pane eventKey=\"payments\">{renderPaymentsReport()}</Tab.Pane>\n              <Tab.Pane eventKey=\"rame\">{renderRameReport()}</Tab.Pane>\n              <Tab.Pane eventKey=\"scholarships_discounts\">\n                {renderScholarshipsDiscountsReport()}\n              </Tab.Pane>\n              <Tab.Pane eventKey=\"collection_details\">\n                {renderCollectionDetailsReport()}\n              </Tab.Pane>\n            </Tab.Content>\n          </Col>\n        </Row>\n      </Tab.Container>\n    </Container>\n  );\n};\n\nexport default Reports;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}