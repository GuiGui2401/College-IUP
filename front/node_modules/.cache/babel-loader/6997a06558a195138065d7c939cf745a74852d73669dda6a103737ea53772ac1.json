{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Plus,Search,Eye,Pencil,Trash,ToggleOff,ToggleOn,Grid,List,Filter,Building,Book}from'react-bootstrap-icons';// Components\nimport{Card,Input,Alert,LoadingSpinner,Modal}from'../../components/UI';import ImportExportButton from'../../components/ImportExportButton';import{secureApiEndpoints}from'../../utils/apiMigration';// Hooks\nimport{useAuth}from'../../hooks/useAuth';import{Button}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Levels=()=>{const{user}=useAuth();const[levels,setLevels]=useState([]);const[sections,setSections]=useState([]);const[dashboardStats,setDashboardStats]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[success,setSuccess]=useState('');// Filters and search\nconst[searchTerm,setSearchTerm]=useState('');const[filterActive,setFilterActive]=useState('all');const[filterSection,setFilterSection]=useState('all');const[viewMode,setViewMode]=useState('grid');// Modal states\nconst[showAddModal,setShowAddModal]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[showDeleteModal,setShowDeleteModal]=useState(false);const[selectedLevel,setSelectedLevel]=useState(null);// Form data\nconst[formData,setFormData]=useState({name:'',section_id:'',description:'',is_active:true,order:0});// Load data on component mount\nuseEffect(()=>{loadLevels();loadSections();loadDashboard();},[]);const loadLevels=async()=>{try{setLoading(true);const response=await secureApiEndpoints.levels.getAll();if(response.success){setLevels(response.data);}else{setError(response.message||'Erreur lors du chargement des niveaux');}}catch(error){setError('Erreur lors du chargement des niveaux');console.error('Error loading levels:',error);}finally{setLoading(false);}};const loadSections=async()=>{try{const response=await secureApiEndpoints.sections.getAll();if(response.success){setSections(response.data);}}catch(error){console.error('Error loading sections:',error);}};const loadDashboard=async()=>{try{const response=await secureApiEndpoints.levels.getDashboard();if(response.success){setDashboardStats(response.data);}}catch(error){console.error('Error loading dashboard:',error);}};const handleSubmit=async e=>{e.preventDefault();try{setError('');setSuccess('');const response=selectedLevel?await secureApiEndpoints.levels.update(selectedLevel.id,formData):await secureApiEndpoints.levels.create(formData);if(response.success){setSuccess(response.message);resetForm();setShowAddModal(false);setShowEditModal(false);loadLevels();loadDashboard();}else{setError(response.message||'Erreur lors de la sauvegarde');}}catch(error){setError('Erreur lors de la sauvegarde');console.error('Error saving level:',error);}};const handleDelete=async()=>{if(!selectedLevel)return;try{setError('');const response=await secureApiEndpoints.levels.delete(selectedLevel.id);if(response.success){setSuccess(response.message);setShowDeleteModal(false);setSelectedLevel(null);loadLevels();loadDashboard();}else{setError(response.message||'Erreur lors de la suppression');}}catch(error){setError('Erreur lors de la suppression');console.error('Error deleting level:',error);}};const handleToggleStatus=async level=>{try{const response=await secureApiEndpoints.levels.toggleStatus(level.id);if(response.success){setSuccess(response.message);loadLevels();loadDashboard();}else{setError(response.message||'Erreur lors de la mise à jour');}}catch(error){setError('Erreur lors de la mise à jour du statut');console.error('Error toggling status:',error);}};const resetForm=()=>{setFormData({name:'',section_id:'',description:'',is_active:true,order:0});setSelectedLevel(null);};const openEditModal=level=>{setSelectedLevel(level);setFormData({name:level.name,section_id:level.section_id.toString(),description:level.description||'',is_active:level.is_active,order:level.order});setShowEditModal(true);};const openDeleteModal=level=>{setSelectedLevel(level);setShowDeleteModal(true);};// Filter levels\nconst filteredLevels=levels.filter(level=>{const matchesSearch=level.name.toLowerCase().includes(searchTerm.toLowerCase())||level.description&&level.description.toLowerCase().includes(searchTerm.toLowerCase())||level.section&&level.section.name.toLowerCase().includes(searchTerm.toLowerCase());const matchesFilter=filterActive==='all'||filterActive==='active'&&level.is_active||filterActive==='inactive'&&!level.is_active;const matchesSection=filterSection==='all'||level.section_id.toString()===filterSection;return matchesSearch&&matchesFilter&&matchesSection;});if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-96\",children:/*#__PURE__*/_jsx(LoadingSpinner,{text:\"Chargement des niveaux...\",size:\"lg\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gray-50 min-h-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"Gestion des Niveaux\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Bienvenue \",user===null||user===void 0?void 0:user.name,\" - G\\xE9rez les niveaux de classe de l'\\xE9tablissement\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(ImportExportButton,{title:\"Niveaux\",apiBasePath:\"/api/levels\",onImportSuccess:loadLevels,filters:{section_id:filterSection!=='all'?filterSection:undefined},templateFileName:\"template_niveaux.csv\"}),/*#__PURE__*/_jsxs(Button,{onClick:()=>{resetForm();setShowAddModal(true);},children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"Nouveau Niveau\"]})]})]}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"error\",className:\"mb-4\",dismissible:true,onDismiss:()=>setError(''),children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",className:\"mb-4\",dismissible:true,onDismiss:()=>setSuccess(''),children:success}),dashboardStats&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Total Niveaux\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:dashboardStats.stats.total_levels})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(Book,{className:\"text-blue-600\",size:24})})]})}),/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Niveaux Actifs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:dashboardStats.stats.active_levels})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(ToggleOn,{className:\"text-green-600\",size:24})})]})}),/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Niveaux Inactifs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-600\",children:dashboardStats.stats.inactive_levels})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(ToggleOff,{className:\"text-red-600\",size:24})})]})}),/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Avec Classes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-600\",children:dashboardStats.stats.levels_with_classes})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(Building,{className:\"text-purple-600\",size:24})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Rechercher\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"position-absolute top-50 start-0 translate-middle-y ms-3 text-muted\",size:16}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control ps-5\",placeholder:\"Rechercher un niveau...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Section\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:filterSection,onChange:e=>setFilterSection(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Toutes les sections\"}),sections.map(section=>/*#__PURE__*/_jsx(\"option\",{value:section.id.toString(),children:section.name},section.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Statut\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:filterActive,onChange:e=>setFilterActive(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Tous les niveaux\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Niveaux actifs\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Niveaux inactifs\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 d-flex align-items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group me-3\",role:\"group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:`btn ${viewMode==='grid'?'btn-primary':'btn-outline-secondary'}`,onClick:()=>setViewMode('grid'),title:\"Vue grille\",children:/*#__PURE__*/_jsx(Grid,{size:16})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:`btn ${viewMode==='list'?'btn-primary':'btn-outline-secondary'}`,onClick:()=>setViewMode('list'),title:\"Vue liste\",children:/*#__PURE__*/_jsx(List,{size:16})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary\",onClick:()=>{setSearchTerm('');setFilterActive('all');setFilterSection('all');},children:\"R\\xE9initialiser\"})]})]})})})})}),filteredLevels.length===0?/*#__PURE__*/_jsxs(Card,{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"Aucun niveau trouv\\xE9\"}),/*#__PURE__*/_jsxs(Button,{onClick:()=>{resetForm();setShowAddModal(true);},className:\"flex items-center gap-2 mx-auto\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"Cr\\xE9er le premier niveau\"]})]}):viewMode==='grid'?/*#__PURE__*/// Vue en grille\n_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:filteredLevels.map(level=>{var _level$section;return/*#__PURE__*/_jsxs(Card,{className:\"p-4 hover:shadow-md transition-shadow duration-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:level.name}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-1\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 text-xs rounded-full ${level.is_active?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:level.is_active?'Actif':'Inactif'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:[\"Section: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-600\",children:(_level$section=level.section)===null||_level$section===void 0?void 0:_level$section.name})]}),level.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:level.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"Ordre: \",level.order]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1\",children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",onClick:()=>handleToggleStatus(level),title:level.is_active?'Désactiver':'Activer',children:level.is_active?/*#__PURE__*/_jsx(ToggleOn,{size:16}):/*#__PURE__*/_jsx(ToggleOff,{size:16})}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",onClick:()=>openEditModal(level),title:\"Modifier\",children:/*#__PURE__*/_jsx(Pencil,{size:16})}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",onClick:()=>openDeleteModal(level),className:\"text-red-600 hover:text-red-700\",title:\"Supprimer\",children:/*#__PURE__*/_jsx(Trash,{size:16})})]})]})]},level.id);})}):/*#__PURE__*/// Vue en liste\n_jsx(\"div\",{className:\"space-y-4\",children:filteredLevels.map(level=>{var _level$section2;return/*#__PURE__*/_jsx(Card,{className:\"p-4 hover:shadow-md transition-shadow duration-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4 flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:level.name}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 text-xs rounded-full ${level.is_active?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:level.is_active?'Actif':'Inactif'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded\",children:(_level$section2=level.section)===null||_level$section2===void 0?void 0:_level$section2.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded\",children:[\"Ordre: \",level.order]})]}),level.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:level.description})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1 ml-4\",children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",onClick:()=>handleToggleStatus(level),title:level.is_active?'Désactiver':'Activer',children:level.is_active?/*#__PURE__*/_jsx(ToggleOn,{size:16}):/*#__PURE__*/_jsx(ToggleOff,{size:16})}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",onClick:()=>openEditModal(level),title:\"Modifier\",children:/*#__PURE__*/_jsx(Pencil,{size:16})}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"sm\",onClick:()=>openDeleteModal(level),className:\"text-red-600 hover:text-red-700\",title:\"Supprimer\",children:/*#__PURE__*/_jsx(Trash,{size:16})})]})]})},level.id);})}),/*#__PURE__*/_jsx(Modal,{isOpen:showAddModal||showEditModal,onClose:()=>{setShowAddModal(false);setShowEditModal(false);resetForm();},title:selectedLevel?'Modifier le Niveau':'Nouveau Niveau',children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Input,{label:\"Nom du niveau\",type:\"text\",value:formData.name,onChange:e=>setFormData({...formData,name:e.target.value}),required:true,placeholder:\"Ex: CP, CE1, 6\\xE8me...\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Section *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.section_id,onChange:e=>setFormData({...formData,section_id:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner une section\"}),sections.filter(s=>s.is_active).map(section=>/*#__PURE__*/_jsx(\"option\",{value:section.id.toString(),children:section.name},section.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>setFormData({...formData,description:e.target.value}),placeholder:\"Description du niveau...\",rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsx(Input,{label:\"Ordre d'affichage\",type:\"number\",value:formData.order,onChange:e=>setFormData({...formData,order:parseInt(e.target.value)}),min:\"0\",placeholder:\"0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"is_active\",checked:formData.is_active,onChange:e=>setFormData({...formData,is_active:e.target.checked}),className:\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"is_active\",className:\"ml-2 text-sm text-gray-700\",children:\"Niveau actif\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2 pt-4\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:()=>{setShowAddModal(false);setShowEditModal(false);resetForm();},children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:selectedLevel?'Modifier':'Créer'})]})]})}),/*#__PURE__*/_jsx(Modal,{isOpen:showDeleteModal,onClose:()=>{setShowDeleteModal(false);setSelectedLevel(null);},title:\"Confirmer la suppression\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700\",children:[\"\\xCAtes-vous s\\xFBr de vouloir supprimer le niveau \",/*#__PURE__*/_jsx(\"strong\",{children:selectedLevel===null||selectedLevel===void 0?void 0:selectedLevel.name}),\" ?\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:\"Cette action est irr\\xE9versible et ne sera possible que si le niveau ne contient aucune classe.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2 pt-4\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>{setShowDeleteModal(false);setSelectedLevel(null);},children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:handleDelete,children:\"Supprimer\"})]})]})})]});};export default Levels;","map":{"version":3,"names":["React","useState","useEffect","Plus","Search","Eye","Pencil","Trash","ToggleOff","ToggleOn","Grid","List","Filter","Building","Book","Card","Input","Alert","LoadingSpinner","Modal","ImportExportButton","secureApiEndpoints","useAuth","Button","jsx","_jsx","jsxs","_jsxs","Levels","user","levels","setLevels","sections","setSections","dashboardStats","setDashboardStats","loading","setLoading","error","setError","success","setSuccess","searchTerm","setSearchTerm","filterActive","setFilterActive","filterSection","setFilterSection","viewMode","setViewMode","showAddModal","setShowAddModal","showEditModal","setShowEditModal","showDeleteModal","setShowDeleteModal","selectedLevel","setSelectedLevel","formData","setFormData","name","section_id","description","is_active","order","loadLevels","loadSections","loadDashboard","response","getAll","data","message","console","getDashboard","handleSubmit","e","preventDefault","update","id","create","resetForm","handleDelete","delete","handleToggleStatus","level","toggleStatus","openEditModal","toString","openDeleteModal","filteredLevels","filter","matchesSearch","toLowerCase","includes","section","matchesFilter","matchesSection","className","children","text","size","title","apiBasePath","onImportSuccess","filters","undefined","templateFileName","onClick","variant","dismissible","onDismiss","stats","total_levels","active_levels","inactive_levels","levels_with_classes","type","placeholder","value","onChange","target","map","role","length","_level$section","_level$section2","isOpen","onClose","onSubmit","label","required","s","rows","parseInt","min","checked","htmlFor"],"sources":["/var/www/College-IUP/front/src/pages/Levels/Levels.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n    Plus, \n    Search, \n    Eye, \n    Pencil, \n    Trash,\n    ToggleOff,\n    ToggleOn,\n    Grid,\n    List,\n    Filter,\n    Building,\n    Book\n} from 'react-bootstrap-icons';\n\n// Components\nimport { Card, Input, Alert, LoadingSpinner, Modal } from '../../components/UI';\nimport ImportExportButton from '../../components/ImportExportButton';\nimport { secureApiEndpoints } from '../../utils/apiMigration';\n\n// Hooks\nimport { useAuth } from '../../hooks/useAuth';\nimport { Button } from 'react-bootstrap';\n\nconst Levels = () => {\n    const { user } = useAuth();\n    const [levels, setLevels] = useState([]);\n    const [sections, setSections] = useState([]);\n    const [dashboardStats, setDashboardStats] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n    \n    // Filters and search\n    const [searchTerm, setSearchTerm] = useState('');\n    const [filterActive, setFilterActive] = useState('all');\n    const [filterSection, setFilterSection] = useState('all');\n    const [viewMode, setViewMode] = useState('grid');\n    \n    // Modal states\n    const [showAddModal, setShowAddModal] = useState(false);\n    const [showEditModal, setShowEditModal] = useState(false);\n    const [showDeleteModal, setShowDeleteModal] = useState(false);\n    const [selectedLevel, setSelectedLevel] = useState(null);\n    \n    // Form data\n    const [formData, setFormData] = useState({\n        name: '',\n        section_id: '',\n        description: '',\n        is_active: true,\n        order: 0\n    });\n\n    // Load data on component mount\n    useEffect(() => {\n        loadLevels();\n        loadSections();\n        loadDashboard();\n    }, []);\n\n    const loadLevels = async () => {\n        try {\n            setLoading(true);\n            const response = await secureApiEndpoints.levels.getAll();\n            if (response.success) {\n                setLevels(response.data);\n            } else {\n                setError(response.message || 'Erreur lors du chargement des niveaux');\n            }\n        } catch (error) {\n            setError('Erreur lors du chargement des niveaux');\n            console.error('Error loading levels:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const loadSections = async () => {\n        try {\n            const response = await secureApiEndpoints.sections.getAll();\n            if (response.success) {\n                setSections(response.data);\n            }\n        } catch (error) {\n            console.error('Error loading sections:', error);\n        }\n    };\n\n    const loadDashboard = async () => {\n        try {\n            const response = await secureApiEndpoints.levels.getDashboard();\n            if (response.success) {\n                setDashboardStats(response.data);\n            }\n        } catch (error) {\n            console.error('Error loading dashboard:', error);\n        }\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            setError('');\n            setSuccess('');\n\n            const response = selectedLevel \n                ? await secureApiEndpoints.levels.update(selectedLevel.id, formData)\n                : await secureApiEndpoints.levels.create(formData);\n\n            if (response.success) {\n                setSuccess(response.message);\n                resetForm();\n                setShowAddModal(false);\n                setShowEditModal(false);\n                loadLevels();\n                loadDashboard();\n            } else {\n                setError(response.message || 'Erreur lors de la sauvegarde');\n            }\n        } catch (error) {\n            setError('Erreur lors de la sauvegarde');\n            console.error('Error saving level:', error);\n        }\n    };\n\n    const handleDelete = async () => {\n        if (!selectedLevel) return;\n\n        try {\n            setError('');\n            const response = await secureApiEndpoints.levels.delete(selectedLevel.id);\n            \n            if (response.success) {\n                setSuccess(response.message);\n                setShowDeleteModal(false);\n                setSelectedLevel(null);\n                loadLevels();\n                loadDashboard();\n            } else {\n                setError(response.message || 'Erreur lors de la suppression');\n            }\n        } catch (error) {\n            setError('Erreur lors de la suppression');\n            console.error('Error deleting level:', error);\n        }\n    };\n\n    const handleToggleStatus = async (level) => {\n        try {\n            const response = await secureApiEndpoints.levels.toggleStatus(level.id);\n            if (response.success) {\n                setSuccess(response.message);\n                loadLevels();\n                loadDashboard();\n            } else {\n                setError(response.message || 'Erreur lors de la mise à jour');\n            }\n        } catch (error) {\n            setError('Erreur lors de la mise à jour du statut');\n            console.error('Error toggling status:', error);\n        }\n    };\n\n    const resetForm = () => {\n        setFormData({\n            name: '',\n            section_id: '',\n            description: '',\n            is_active: true,\n            order: 0\n        });\n        setSelectedLevel(null);\n    };\n\n    const openEditModal = (level) => {\n        setSelectedLevel(level);\n        setFormData({\n            name: level.name,\n            section_id: level.section_id.toString(),\n            description: level.description || '',\n            is_active: level.is_active,\n            order: level.order\n        });\n        setShowEditModal(true);\n    };\n\n    const openDeleteModal = (level) => {\n        setSelectedLevel(level);\n        setShowDeleteModal(true);\n    };\n\n    // Filter levels\n    const filteredLevels = levels.filter(level => {\n        const matchesSearch = level.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                            (level.description && level.description.toLowerCase().includes(searchTerm.toLowerCase())) ||\n                            (level.section && level.section.name.toLowerCase().includes(searchTerm.toLowerCase()));\n        \n        const matchesFilter = filterActive === 'all' || \n                            (filterActive === 'active' && level.is_active) ||\n                            (filterActive === 'inactive' && !level.is_active);\n\n        const matchesSection = filterSection === 'all' || \n                              level.section_id.toString() === filterSection;\n        \n        return matchesSearch && matchesFilter && matchesSection;\n    });\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center min-h-96\">\n                <LoadingSpinner text=\"Chargement des niveaux...\" size=\"lg\" />\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"p-6 bg-gray-50 min-h-screen\">\n            {/* Header */}\n            <div className=\"flex justify-between items-center mb-6\">\n                <div>\n                    <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n                        Gestion des Niveaux\n                    </h1>\n                    <p className=\"text-gray-600\">\n                        Bienvenue {user?.name} - Gérez les niveaux de classe de l'établissement\n                    </p>\n                </div>\n                <div className=\"flex gap-2\">\n                    <ImportExportButton\n                        title=\"Niveaux\"\n                        apiBasePath=\"/api/levels\"\n                        onImportSuccess={loadLevels}\n                        filters={{ section_id: filterSection !== 'all' ? filterSection : undefined }}\n                        templateFileName=\"template_niveaux.csv\"\n                    />\n                    <Button\n                        onClick={() => {\n                            resetForm();\n                            setShowAddModal(true);\n                        }}\n                    >\n                        <Plus size={16} />\n                        Nouveau Niveau\n                    </Button>\n                </div>\n            </div>\n\n            {/* Alerts */}\n            {error && (\n                <Alert variant=\"error\" className=\"mb-4\" dismissible onDismiss={() => setError('')}>\n                    {error}\n                </Alert>\n            )}\n            {success && (\n                <Alert variant=\"success\" className=\"mb-4\" dismissible onDismiss={() => setSuccess('')}>\n                    {success}\n                </Alert>\n            )}\n\n            {/* Dashboard Stats */}\n            {dashboardStats && (\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n                    <Card className=\"p-6\">\n                        <div className=\"flex items-center justify-between\">\n                            <div>\n                                <p className=\"text-sm text-gray-600\">Total Niveaux</p>\n                                <p className=\"text-2xl font-bold text-blue-600\">\n                                    {dashboardStats.stats.total_levels}\n                                </p>\n                            </div>\n                            <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                                <Book className=\"text-blue-600\" size={24} />\n                            </div>\n                        </div>\n                    </Card>\n\n                    <Card className=\"p-6\">\n                        <div className=\"flex items-center justify-between\">\n                            <div>\n                                <p className=\"text-sm text-gray-600\">Niveaux Actifs</p>\n                                <p className=\"text-2xl font-bold text-green-600\">\n                                    {dashboardStats.stats.active_levels}\n                                </p>\n                            </div>\n                            <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n                                <ToggleOn className=\"text-green-600\" size={24} />\n                            </div>\n                        </div>\n                    </Card>\n\n                    <Card className=\"p-6\">\n                        <div className=\"flex items-center justify-between\">\n                            <div>\n                                <p className=\"text-sm text-gray-600\">Niveaux Inactifs</p>\n                                <p className=\"text-2xl font-bold text-red-600\">\n                                    {dashboardStats.stats.inactive_levels}\n                                </p>\n                            </div>\n                            <div className=\"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center\">\n                                <ToggleOff className=\"text-red-600\" size={24} />\n                            </div>\n                        </div>\n                    </Card>\n\n                    <Card className=\"p-6\">\n                        <div className=\"flex items-center justify-between\">\n                            <div>\n                                <p className=\"text-sm text-gray-600\">Avec Classes</p>\n                                <p className=\"text-2xl font-bold text-purple-600\">\n                                    {dashboardStats.stats.levels_with_classes}\n                                </p>\n                            </div>\n                            <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\n                                <Building className=\"text-purple-600\" size={24} />\n                            </div>\n                        </div>\n                    </Card>\n                </div>\n            )}\n\n            {/* Filtres */}\n            <div className=\"row mb-4\">\n                <div className=\"col-12\">\n                    <div className=\"card\">\n                        <div className=\"card-body\">\n                            <div className=\"row g-3\">\n                                <div className=\"col-md-3\">\n                                    <label className=\"form-label\">Rechercher</label>\n                                    <div className=\"position-relative\">\n                                        <Search className=\"position-absolute top-50 start-0 translate-middle-y ms-3 text-muted\" size={16} />\n                                        <input\n                                            type=\"text\"\n                                            className=\"form-control ps-5\"\n                                            placeholder=\"Rechercher un niveau...\"\n                                            value={searchTerm}\n                                            onChange={(e) => setSearchTerm(e.target.value)}\n                                        />\n                                    </div>\n                                </div>\n                                <div className=\"col-md-3\">\n                                    <label className=\"form-label\">Section</label>\n                                    <select\n                                        className=\"form-select\"\n                                        value={filterSection}\n                                        onChange={(e) => setFilterSection(e.target.value)}\n                                    >\n                                        <option value=\"all\">Toutes les sections</option>\n                                        {sections.map(section => (\n                                            <option key={section.id} value={section.id.toString()}>\n                                                {section.name}\n                                            </option>\n                                        ))}\n                                    </select>\n                                </div>\n                                <div className=\"col-md-3\">\n                                    <label className=\"form-label\">Statut</label>\n                                    <select\n                                        className=\"form-select\"\n                                        value={filterActive}\n                                        onChange={(e) => setFilterActive(e.target.value)}\n                                    >\n                                        <option value=\"all\">Tous les niveaux</option>\n                                        <option value=\"active\">Niveaux actifs</option>\n                                        <option value=\"inactive\">Niveaux inactifs</option>\n                                    </select>\n                                </div>\n                                <div className=\"col-md-3 d-flex align-items-end\">\n                                    <div className=\"btn-group me-3\" role=\"group\">\n                                        <button\n                                            type=\"button\"\n                                            className={`btn ${viewMode === 'grid' ? 'btn-primary' : 'btn-outline-secondary'}`}\n                                            onClick={() => setViewMode('grid')}\n                                            title=\"Vue grille\"\n                                        >\n                                            <Grid size={16} />\n                                        </button>\n                                        <button\n                                            type=\"button\"\n                                            className={`btn ${viewMode === 'list' ? 'btn-primary' : 'btn-outline-secondary'}`}\n                                            onClick={() => setViewMode('list')}\n                                            title=\"Vue liste\"\n                                        >\n                                            <List size={16} />\n                                        </button>\n                                    </div>\n                                    <button\n                                        className=\"btn btn-outline-secondary\"\n                                        onClick={() => {\n                                            setSearchTerm('');\n                                            setFilterActive('all');\n                                            setFilterSection('all');\n                                        }}\n                                    >\n                                        Réinitialiser\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Levels List/Grid */}\n            {filteredLevels.length === 0 ? (\n                <Card className=\"p-8 text-center\">\n                    <p className=\"text-gray-500 mb-4\">Aucun niveau trouvé</p>\n                    <Button\n                        onClick={() => {\n                            resetForm();\n                            setShowAddModal(true);\n                        }}\n                        className=\"flex items-center gap-2 mx-auto\"\n                    >\n                        <Plus size={16} />\n                        Créer le premier niveau\n                    </Button>\n                </Card>\n            ) : viewMode === 'grid' ? (\n                // Vue en grille\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n                    {filteredLevels.map((level) => (\n                        <Card key={level.id} className=\"p-4 hover:shadow-md transition-shadow duration-200\">\n                            <div className=\"flex justify-between items-start mb-3\">\n                                <h3 className=\"text-lg font-semibold text-gray-900\">\n                                    {level.name}\n                                </h3>\n                                <div className=\"flex items-center gap-1\">\n                                    <span className={`px-2 py-1 text-xs rounded-full ${\n                                        level.is_active \n                                            ? 'bg-green-100 text-green-800' \n                                            : 'bg-red-100 text-red-800'\n                                    }`}>\n                                        {level.is_active ? 'Actif' : 'Inactif'}\n                                    </span>\n                                </div>\n                            </div>\n                            \n                            <div className=\"mb-3\">\n                                <p className=\"text-sm text-gray-600 mb-1\">\n                                    Section: <span className=\"font-medium text-blue-600\">\n                                        {level.section?.name}\n                                    </span>\n                                </p>\n                                {level.description && (\n                                    <p className=\"text-gray-600 text-sm\">\n                                        {level.description}\n                                    </p>\n                                )}\n                            </div>\n                            \n                            <div className=\"flex justify-between items-center\">\n                                <span className=\"text-xs text-gray-500\">\n                                    Ordre: {level.order}\n                                </span>\n                                \n                                <div className=\"flex gap-1\">\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={() => handleToggleStatus(level)}\n                                        title={level.is_active ? 'Désactiver' : 'Activer'}\n                                    >\n                                        {level.is_active ? <ToggleOn size={16} /> : <ToggleOff size={16} />}\n                                    </Button>\n                                    \n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={() => openEditModal(level)}\n                                        title=\"Modifier\"\n                                    >\n                                        <Pencil size={16} />\n                                    </Button>\n                                    \n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={() => openDeleteModal(level)}\n                                        className=\"text-red-600 hover:text-red-700\"\n                                        title=\"Supprimer\"\n                                    >\n                                        <Trash size={16} />\n                                    </Button>\n                                </div>\n                            </div>\n                        </Card>\n                    ))}\n                </div>\n            ) : (\n                // Vue en liste\n                <div className=\"space-y-4\">\n                    {filteredLevels.map((level) => (\n                        <Card key={level.id} className=\"p-4 hover:shadow-md transition-shadow duration-200\">\n                            <div className=\"flex items-center justify-between\">\n                                <div className=\"flex items-center space-x-4 flex-1\">\n                                    <div className=\"flex-1\">\n                                        <div className=\"flex items-center gap-3 mb-1\">\n                                            <h3 className=\"text-lg font-semibold text-gray-900\">\n                                                {level.name}\n                                            </h3>\n                                            <span className={`px-2 py-1 text-xs rounded-full ${\n                                                level.is_active \n                                                    ? 'bg-green-100 text-green-800' \n                                                    : 'bg-red-100 text-red-800'\n                                            }`}>\n                                                {level.is_active ? 'Actif' : 'Inactif'}\n                                            </span>\n                                            <span className=\"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded\">\n                                                {level.section?.name}\n                                            </span>\n                                            <span className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded\">\n                                                Ordre: {level.order}\n                                            </span>\n                                        </div>\n                                        {level.description && (\n                                            <p className=\"text-gray-600 text-sm\">\n                                                {level.description}\n                                            </p>\n                                        )}\n                                    </div>\n                                </div>\n                                \n                                <div className=\"flex gap-1 ml-4\">\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={() => handleToggleStatus(level)}\n                                        title={level.is_active ? 'Désactiver' : 'Activer'}\n                                    >\n                                        {level.is_active ? <ToggleOn size={16} /> : <ToggleOff size={16} />}\n                                    </Button>\n                                    \n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={() => openEditModal(level)}\n                                        title=\"Modifier\"\n                                    >\n                                        <Pencil size={16} />\n                                    </Button>\n                                    \n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={() => openDeleteModal(level)}\n                                        className=\"text-red-600 hover:text-red-700\"\n                                        title=\"Supprimer\"\n                                    >\n                                        <Trash size={16} />\n                                    </Button>\n                                </div>\n                            </div>\n                        </Card>\n                    ))}\n                </div>\n            )}\n\n            {/* Add/Edit Modal */}\n            <Modal\n                isOpen={showAddModal || showEditModal}\n                onClose={() => {\n                    setShowAddModal(false);\n                    setShowEditModal(false);\n                    resetForm();\n                }}\n                title={selectedLevel ? 'Modifier le Niveau' : 'Nouveau Niveau'}\n            >\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                    <Input\n                        label=\"Nom du niveau\"\n                        type=\"text\"\n                        value={formData.name}\n                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                        required\n                        placeholder=\"Ex: CP, CE1, 6ème...\"\n                    />\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                            Section *\n                        </label>\n                        <select\n                            value={formData.section_id}\n                            onChange={(e) => setFormData({ ...formData, section_id: e.target.value })}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                            required\n                        >\n                            <option value=\"\">Sélectionner une section</option>\n                            {sections.filter(s => s.is_active).map(section => (\n                                <option key={section.id} value={section.id.toString()}>\n                                    {section.name}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                            Description\n                        </label>\n                        <textarea\n                            value={formData.description}\n                            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                            placeholder=\"Description du niveau...\"\n                            rows={3}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        />\n                    </div>\n\n                    <Input\n                        label=\"Ordre d'affichage\"\n                        type=\"number\"\n                        value={formData.order}\n                        onChange={(e) => setFormData({ ...formData, order: parseInt(e.target.value) })}\n                        min=\"0\"\n                        placeholder=\"0\"\n                    />\n\n                    <div className=\"flex items-center\">\n                        <input\n                            type=\"checkbox\"\n                            id=\"is_active\"\n                            checked={formData.is_active}\n                            onChange={(e) => setFormData({ ...formData, is_active: e.target.checked })}\n                            className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                        />\n                        <label htmlFor=\"is_active\" className=\"ml-2 text-sm text-gray-700\">\n                            Niveau actif\n                        </label>\n                    </div>\n\n                    <div className=\"flex justify-end gap-2 pt-4\">\n                        <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            onClick={() => {\n                                setShowAddModal(false);\n                                setShowEditModal(false);\n                                resetForm();\n                            }}\n                        >\n                            Annuler\n                        </Button>\n                        <Button type=\"submit\">\n                            {selectedLevel ? 'Modifier' : 'Créer'}\n                        </Button>\n                    </div>\n                </form>\n            </Modal>\n\n            {/* Delete Modal */}\n            <Modal\n                isOpen={showDeleteModal}\n                onClose={() => {\n                    setShowDeleteModal(false);\n                    setSelectedLevel(null);\n                }}\n                title=\"Confirmer la suppression\"\n            >\n                <div className=\"space-y-4\">\n                    <p className=\"text-gray-700\">\n                        Êtes-vous sûr de vouloir supprimer le niveau <strong>{selectedLevel?.name}</strong> ?\n                    </p>\n                    <p className=\"text-sm text-red-600\">\n                        Cette action est irréversible et ne sera possible que si le niveau ne contient aucune classe.\n                    </p>\n                    \n                    <div className=\"flex justify-end gap-2 pt-4\">\n                        <Button\n                            variant=\"outline\"\n                            onClick={() => {\n                                setShowDeleteModal(false);\n                                setSelectedLevel(null);\n                            }}\n                        >\n                            Annuler\n                        </Button>\n                        <Button\n                            variant=\"danger\"\n                            onClick={handleDelete}\n                        >\n                            Supprimer\n                        </Button>\n                    </div>\n                </div>\n            </Modal>\n        </div>\n    );\n};\n\nexport default Levels;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}