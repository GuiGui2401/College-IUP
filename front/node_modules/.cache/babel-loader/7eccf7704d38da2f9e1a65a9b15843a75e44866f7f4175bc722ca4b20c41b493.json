{"ast":null,"code":"/**\n * Statistiques détaillées du personnel (enseignants, comptables, surveillants, etc.)\n * Affichage complet des heures de travail, mouvements et analyses\n */import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Table,Badge,Form,Button,Modal,Spinner,Alert,ProgressBar,ListGroup,Tabs,Tab}from'react-bootstrap';import{PersonCheck,Clock,Calendar,BarChart,ArrowRightCircle,ArrowLeftCircle,TrendingUp,TrendingDown,Eye,Download,Filter,CheckCircleFill,XCircleFill,ClockHistory,Activity}from'react-bootstrap-icons';import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,LineElement,PointElement,Title,Tooltip,Legend,ArcElement}from'chart.js';import{Bar,Line,Doughnut}from'react-chartjs-2';import{useAuth}from'../../hooks/useAuth';import{secureApiEndpoints}from'../../utils/apiMigration';import DatePicker from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';// Enregistrement des composants Chart.js\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,BarElement,LineElement,PointElement,Title,Tooltip,Legend,ArcElement);const TeacherDetailedStats=()=>{var _detailedStats$stats,_detailedStats$attend2,_detailedStats$stats2,_detailedStats$attend3,_detailedStats$stats3,_detailedStats$attend4,_detailedStats$stats4,_detailedStats$attend5,_detailedStats$attend8,_detailedStats$attend9,_detailedStats$attend0,_detailedStats$attend1;const[staffMembers,setStaffMembers]=useState([]);const[selectedStaff,setSelectedStaff]=useState('');const[startDate,setStartDate]=useState(new Date(new Date().setDate(new Date().getDate()-30)));const[endDate,setEndDate]=useState(new Date());const[detailedStats,setDetailedStats]=useState(null);const[dayMovements,setDayMovements]=useState(null);const[selectedDate,setSelectedDate]=useState(null);const[isLoading,setIsLoading]=useState(false);const[showMovementsModal,setShowMovementsModal]=useState(false);const[activeTab,setActiveTab]=useState('overview');const{user}=useAuth();useEffect(()=>{loadStaffMembers();},[]);useEffect(()=>{if(selectedStaff){loadDetailedStats();}},[selectedStaff,startDate,endDate]);const loadStaffMembers=async()=>{try{const response=await secureApiEndpoints.staff.getStaffWithQR();if(response.success){setStaffMembers(response.data||[]);}}catch(error){console.error('Erreur lors du chargement du personnel:',error);}};const loadDetailedStats=async()=>{if(!selectedStaff)return;try{setIsLoading(true);const response=await secureApiEndpoints.staff.getStaffReport(selectedStaff,{start_date:startDate.toISOString().split('T')[0],end_date:endDate.toISOString().split('T')[0]});if(response.success){setDetailedStats(response.data);}}catch(error){console.error('Erreur lors du chargement des statistiques:',error);}finally{setIsLoading(false);}};const loadDayMovements=async date=>{try{var _detailedStats$attend;// Pour l'instant, on utilise les données des mouvements récents depuis les statistiques détaillées\n// car l'API staff n'a pas encore d'endpoint spécifique pour les mouvements du jour\nconst dayData=detailedStats===null||detailedStats===void 0?void 0:(_detailedStats$attend=detailedStats.attendances)===null||_detailedStats$attend===void 0?void 0:_detailedStats$attend.find(a=>a.attendance_date===date);if(dayData){setDayMovements({movements_count:1,timeline:[{id:dayData.id,time:dayData.scanned_at?new Date(dayData.scanned_at).toLocaleTimeString('fr-FR'):'-',type:dayData.event_type||'entry',type_label:dayData.event_type==='exit'?'Sortie':'Entrée',status:{is_late:dayData.late_minutes>0,is_early_departure:false},late_minutes:dayData.late_minutes||0,supervisor:'Système',time_until_next:null}]});setSelectedDate(date);setShowMovementsModal(true);}}catch(error){console.error('Erreur lors du chargement des mouvements:',error);}};// Configuration des graphiques\nconst getWorkHoursChartData=()=>{if(!(detailedStats!==null&&detailedStats!==void 0&&detailedStats.attendances))return null;const last14Days=detailedStats.attendances.slice(-14);return{labels:last14Days.map(day=>new Date(day.attendance_date).toLocaleDateString('fr-FR',{day:'numeric',month:'short'})),datasets:[{label:'Heures travaillées',data:last14Days.map(day=>day.work_hours||0),backgroundColor:'rgba(34, 197, 94, 0.8)',borderColor:'rgba(34, 197, 94, 1)',borderWidth:2},{label:'Heures attendues',data:last14Days.map(day=>8),// Valeur par défaut de 8h\nbackgroundColor:'rgba(156, 163, 175, 0.3)',borderColor:'rgba(156, 163, 175, 1)',borderWidth:1,borderDash:[5,5]}]};};const getWeekdayAnalysisData=()=>{if(!(detailedStats!==null&&detailedStats!==void 0&&detailedStats.attendances))return null;// Calculer les statistiques par jour de la semaine\nconst weekdayStats={};const weekdays=['Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi','Dimanche'];detailedStats.attendances.forEach(attendance=>{const date=new Date(attendance.attendance_date);const dayName=date.toLocaleDateString('fr-FR',{weekday:'long'});const dayCapitalized=dayName.charAt(0).toUpperCase()+dayName.slice(1);if(!weekdayStats[dayCapitalized]){weekdayStats[dayCapitalized]={present:0,total:0};}weekdayStats[dayCapitalized].total++;if(attendance.is_present){weekdayStats[dayCapitalized].present++;}});const attendanceRates=weekdays.map(day=>{const stats=weekdayStats[day];return stats?stats.present/stats.total*100:0;});return{labels:weekdays,datasets:[{label:'Taux de présence (%)',data:attendanceRates,backgroundColor:['rgba(59, 130, 246, 0.8)','rgba(34, 197, 94, 0.8)','rgba(251, 191, 36, 0.8)','rgba(249, 115, 22, 0.8)','rgba(239, 68, 68, 0.8)','rgba(168, 85, 247, 0.8)','rgba(236, 72, 153, 0.8)'],borderColor:'#fff',borderWidth:2}]};};const chartOptions={responsive:true,plugins:{legend:{position:'top'}},scales:{y:{beginAtZero:true}}};const getPunctualityBadge=status=>{switch(status){case'punctual':return/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"Ponctuel\"});case'late':return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"En retard\"});case'early_departure':return/*#__PURE__*/_jsx(Badge,{bg:\"info\",children:\"D\\xE9part anticip\\xE9\"});case'late_and_early':return/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"Retard + D\\xE9part\"});default:return/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:\"-\"});}};const formatDuration=minutes=>{if(!minutes)return'-';const hours=Math.floor(minutes/60);const mins=minutes%60;return hours>0?`${hours}h ${mins}min`:`${mins}min`;};const selectedStaffData=staffMembers.find(s=>s.id===parseInt(selectedStaff));return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"py-4\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"mb-0 d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Activity,{className:\"me-2\"}),\"Statistiques D\\xE9taill\\xE9es Personnel\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"Analyse compl\\xE8te des heures et mouvements du personnel\"})]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",onClick:()=>window.print(),children:[/*#__PURE__*/_jsx(Download,{className:\"me-1\"}),\"Imprimer\"]})]})})}),/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Filter,{className:\"me-2\"}),\"S\\xE9lection et p\\xE9riode\"]}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Membre du personnel\"}),/*#__PURE__*/_jsxs(Form.Select,{value:selectedStaff,onChange:e=>setSelectedStaff(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner un membre du personnel\"}),staffMembers.map(staff=>/*#__PURE__*/_jsxs(\"option\",{value:staff.id,children:[staff.name,\" (\",staff.role,\")\"]},staff.id))]})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date de d\\xE9but\"}),/*#__PURE__*/_jsx(DatePicker,{selected:startDate,onChange:setStartDate,className:\"form-control\",dateFormat:\"dd/MM/yyyy\"})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date de fin\"}),/*#__PURE__*/_jsx(DatePicker,{selected:endDate,onChange:setEndDate,className:\"form-control\",dateFormat:\"dd/MM/yyyy\"})]})}),/*#__PURE__*/_jsx(Col,{md:2,className:\"d-flex align-items-end\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:loadDetailedStats,disabled:!selectedStaff||isLoading,className:\"mb-3\",children:\"Analyser\"})})]})})]})})}),detailedStats&&selectedStaffData?/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onSelect:setActiveTab,className:\"mb-4\",children:[/*#__PURE__*/_jsxs(Tab,{eventKey:\"overview\",title:\"Vue d'ensemble\",children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(PersonCheck,{className:\"me-2\"}),\"Informations Personnel\"]}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h5\",{children:selectedStaffData.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-2\",children:selectedStaffData.email}),selectedStaffData.contact&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted mb-2\",children:[\"Contact: \",selectedStaffData.contact]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"R\\xF4le:\"}),\" \",selectedStaffData.role]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type:\"}),\" \",selectedStaffData.staff_type]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"P\\xE9riode:\"}),\" \",startDate.toLocaleDateString(),\" - \",endDate.toLocaleDateString()]})]})]})}),/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(BarChart,{className:\"me-2\"}),\"Statistiques de la p\\xE9riode\"]}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-success\",children:((_detailedStats$stats=detailedStats.stats)===null||_detailedStats$stats===void 0?void 0:_detailedStats$stats.present_days)||((_detailedStats$attend2=detailedStats.attendances)===null||_detailedStats$attend2===void 0?void 0:_detailedStats$attend2.filter(a=>a.is_present).length)||0}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Jours pr\\xE9sents\"})]}),/*#__PURE__*/_jsxs(Col,{md:3,className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger\",children:((_detailedStats$stats2=detailedStats.stats)===null||_detailedStats$stats2===void 0?void 0:_detailedStats$stats2.absent_days)||((_detailedStats$attend3=detailedStats.attendances)===null||_detailedStats$attend3===void 0?void 0:_detailedStats$attend3.filter(a=>!a.is_present).length)||0}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Jours absents\"})]}),/*#__PURE__*/_jsxs(Col,{md:3,className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-info\",children:[((_detailedStats$stats3=detailedStats.stats)===null||_detailedStats$stats3===void 0?void 0:_detailedStats$stats3.total_work_hours)||((_detailedStats$attend4=detailedStats.attendances)===null||_detailedStats$attend4===void 0?void 0:_detailedStats$attend4.reduce((sum,a)=>sum+(a.work_hours||0),0))||0,\"h\"]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Heures travaill\\xE9es\"})]}),/*#__PURE__*/_jsxs(Col,{md:3,className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-warning\",children:[((_detailedStats$stats4=detailedStats.stats)===null||_detailedStats$stats4===void 0?void 0:_detailedStats$stats4.average_work_hours)||(((_detailedStats$attend5=detailedStats.attendances)===null||_detailedStats$attend5===void 0?void 0:_detailedStats$attend5.length)>0?Math.round(detailedStats.attendances.reduce((sum,a)=>sum+(a.work_hours||0),0)/detailedStats.attendances.length*10)/10:0),\"h\"]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Moyenne/jour\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:((_detailedStats$attend6,_detailedStats$attend7)=>{const presentDays=((_detailedStats$attend6=detailedStats.attendances)===null||_detailedStats$attend6===void 0?void 0:_detailedStats$attend6.filter(a=>a.is_present).length)||0;const totalDays=((_detailedStats$attend7=detailedStats.attendances)===null||_detailedStats$attend7===void 0?void 0:_detailedStats$attend7.length)||1;const rate=Math.round(presentDays/totalDays*100);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"text-primary\",children:[rate,\"%\"]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Taux de pr\\xE9sence\"}),/*#__PURE__*/_jsx(ProgressBar,{now:rate,variant:rate>=90?'success':rate>=70?'warning':'danger',className:\"mt-2\"})]});})()})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-info\",children:((_detailedStats$attend8=detailedStats.attendances)===null||_detailedStats$attend8===void 0?void 0:_detailedStats$attend8.length)||0}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Total enregistrements\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Retard moyen: \",Math.round(((_detailedStats$attend9=detailedStats.attendances)===null||_detailedStats$attend9===void 0?void 0:_detailedStats$attend9.reduce((sum,a)=>sum+(a.late_minutes||0),0))/(((_detailedStats$attend0=detailedStats.attendances)===null||_detailedStats$attend0===void 0?void 0:_detailedStats$attend0.length)||1))||0,\" min\"]})})]})})]})]})]})})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Heures de travail quotidiennes\"}),/*#__PURE__*/_jsx(Card.Body,{children:getWorkHoursChartData()&&/*#__PURE__*/_jsx(Bar,{data:getWorkHoursChartData(),options:chartOptions})})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Analyse par jour de semaine\"}),/*#__PURE__*/_jsx(Card.Body,{children:getWeekdayAnalysisData()&&/*#__PURE__*/_jsx(Doughnut,{data:getWeekdayAnalysisData()})})]})})]})]}),/*#__PURE__*/_jsx(Tab,{eventKey:\"daily\",title:\"D\\xE9tails quotidiens\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"me-2\"}),\"D\\xE9tails par jour - Toutes les entr\\xE9es et sorties\"]}),/*#__PURE__*/_jsx(Card.Body,{children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})}):detailedStats.daily_details?/*#__PURE__*/_jsxs(\"div\",{children:[detailedStats.daily_details.map((dayDetail,dayIndex)=>/*#__PURE__*/_jsxs(Card,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:new Date(dayDetail.date).toLocaleDateString('fr-FR',{weekday:'long',day:'numeric',month:'long'})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Badge,{bg:\"primary\",className:\"me-2\",children:[dayDetail.work_pairs.length,\" session\",dayDetail.work_pairs.length>1?'s':'']}),/*#__PURE__*/_jsxs(Badge,{bg:\"success\",children:[\"Total: \",dayDetail.total_formatted]})]})]}),/*#__PURE__*/_jsx(Card.Body,{children:dayDetail.work_pairs.length>0?/*#__PURE__*/_jsx(\"div\",{children:dayDetail.work_pairs.map((pair,pairIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center py-2 border-bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(ArrowRightCircle,{className:\"text-success me-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"me-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Entr\\xE9e:\"}),\" \",pair.entry_time]}),pair.exit_time?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ArrowLeftCircle,{className:\"text-warning me-2\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Sortie:\"}),\" \",pair.exit_time]})]}):/*#__PURE__*/_jsx(Badge,{bg:\"info\",children:\"En cours...\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"outline-primary\",children:pair.duration_formatted})})]},pairIndex))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-muted py-3\",children:[/*#__PURE__*/_jsx(XCircleFill,{className:\"mb-2\",size:24}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Absent ce jour\"})]})})]},dayIndex)),detailedStats.daily_details.length===0&&/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"text-center\",children:[/*#__PURE__*/_jsx(Calendar,{size:48,className:\"mb-3\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Aucune donn\\xE9e de pr\\xE9sence\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Aucun enregistrement de pr\\xE9sence trouv\\xE9 pour cette p\\xE9riode.\"})]})]}):/*#__PURE__*/_jsxs(Alert,{variant:\"warning\",className:\"text-center\",children:[/*#__PURE__*/_jsx(Clock,{size:48,className:\"mb-3\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Donn\\xE9es non disponibles\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Les d\\xE9tails quotidiens ne sont pas disponibles pour cette s\\xE9lection.\"})]})})]})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"movements\",title:\"Mouvements r\\xE9cents\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(ClockHistory,{className:\"me-2\"}),\"20 derniers mouvements\"]}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(ListGroup,{children:(_detailedStats$attend1=detailedStats.attendances)===null||_detailedStats$attend1===void 0?void 0:_detailedStats$attend1.slice(-20).reverse().map((attendance,index)=>/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[attendance.event_type==='exit'?/*#__PURE__*/_jsx(ArrowLeftCircle,{className:\"text-warning me-2\"}):/*#__PURE__*/_jsx(ArrowRightCircle,{className:\"text-success me-2\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[new Date(attendance.attendance_date).toLocaleDateString('fr-FR'),attendance.scanned_at&&' à '+new Date(attendance.scanned_at).toLocaleTimeString('fr-FR')]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block\",children:[attendance.event_type==='exit'?'Sortie':'Entrée',\" - Personnel: \",selectedStaffData===null||selectedStaffData===void 0?void 0:selectedStaffData.name]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[(attendance.late_minutes||0)>0&&/*#__PURE__*/_jsxs(Badge,{bg:\"warning\",className:\"me-1\",children:[attendance.late_minutes,\" min retard\"]}),attendance.is_present&&/*#__PURE__*/_jsx(Badge,{bg:\"success\",className:\"me-1\",children:\"Pr\\xE9sent\"})]})]},index))})})]})})]}):!selectedStaff?/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"text-center\",children:[/*#__PURE__*/_jsx(PersonCheck,{size:48,className:\"mb-3\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"S\\xE9lectionnez un membre du personnel\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Choisissez un membre du personnel dans la liste ci-dessus pour voir ses statistiques d\\xE9taill\\xE9es.\"})]}):isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"lg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:\"Chargement des statistiques...\"})]}):null,/*#__PURE__*/_jsxs(Modal,{show:showMovementsModal,onHide:()=>setShowMovementsModal(false),size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[/*#__PURE__*/_jsx(ClockHistory,{className:\"me-2\"}),\"Mouvements du \",selectedDate&&new Date(selectedDate).toLocaleDateString('fr-FR')]})}),/*#__PURE__*/_jsx(Modal.Body,{children:dayMovements&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total mouvements:\"}),\" \",dayMovements.movements_count]}),/*#__PURE__*/_jsxs(Table,{responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Heure\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Superviseur\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Temps jusqu'au suivant\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dayMovements.timeline.map((movement,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:movement.time}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[movement.type==='entry'?/*#__PURE__*/_jsx(ArrowRightCircle,{className:\"text-success me-1\"}):/*#__PURE__*/_jsx(ArrowLeftCircle,{className:\"text-warning me-1\"}),movement.type_label]})}),/*#__PURE__*/_jsxs(\"td\",{children:[movement.status.is_late&&/*#__PURE__*/_jsxs(Badge,{bg:\"warning\",className:\"me-1\",children:[movement.late_minutes,\" min retard\"]}),movement.status.is_early_departure&&/*#__PURE__*/_jsxs(Badge,{bg:\"info\",className:\"me-1\",children:[movement.early_departure_minutes,\" min t\\xF4t\"]}),!movement.status.is_late&&!movement.status.is_early_departure&&/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"Ponctuel\"})]}),/*#__PURE__*/_jsx(\"td\",{children:movement.supervisor}),/*#__PURE__*/_jsx(\"td\",{children:movement.time_until_next?formatDuration(movement.time_until_next):'-'})]},movement.id))})]})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowMovementsModal(false),children:\"Fermer\"})})]})]});};export default TeacherDetailedStats;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Table","Badge","Form","Button","Modal","Spinner","Alert","ProgressBar","ListGroup","Tabs","Tab","PersonCheck","Clock","Calendar","BarChart","ArrowRightCircle","ArrowLeftCircle","TrendingUp","TrendingDown","Eye","Download","Filter","CheckCircleFill","XCircleFill","ClockHistory","Activity","Chart","ChartJS","CategoryScale","LinearScale","BarElement","LineElement","PointElement","Title","Tooltip","Legend","ArcElement","Bar","Line","Doughnut","useAuth","secureApiEndpoints","DatePicker","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","register","TeacherDetailedStats","_detailedStats$stats","_detailedStats$attend2","_detailedStats$stats2","_detailedStats$attend3","_detailedStats$stats3","_detailedStats$attend4","_detailedStats$stats4","_detailedStats$attend5","_detailedStats$attend8","_detailedStats$attend9","_detailedStats$attend0","_detailedStats$attend1","staffMembers","setStaffMembers","selectedStaff","setSelectedStaff","startDate","setStartDate","Date","setDate","getDate","endDate","setEndDate","detailedStats","setDetailedStats","dayMovements","setDayMovements","selectedDate","setSelectedDate","isLoading","setIsLoading","showMovementsModal","setShowMovementsModal","activeTab","setActiveTab","user","loadStaffMembers","loadDetailedStats","response","staff","getStaffWithQR","success","data","error","console","getStaffReport","start_date","toISOString","split","end_date","loadDayMovements","date","_detailedStats$attend","dayData","attendances","find","a","attendance_date","movements_count","timeline","id","time","scanned_at","toLocaleTimeString","type","event_type","type_label","status","is_late","late_minutes","is_early_departure","supervisor","time_until_next","getWorkHoursChartData","last14Days","slice","labels","map","day","toLocaleDateString","month","datasets","label","work_hours","backgroundColor","borderColor","borderWidth","borderDash","getWeekdayAnalysisData","weekdayStats","weekdays","forEach","attendance","dayName","weekday","dayCapitalized","charAt","toUpperCase","present","total","is_present","attendanceRates","stats","chartOptions","responsive","plugins","legend","position","scales","y","beginAtZero","getPunctualityBadge","bg","children","formatDuration","minutes","hours","Math","floor","mins","selectedStaffData","s","parseInt","fluid","className","variant","onClick","window","print","Header","Body","md","Group","Label","Select","value","onChange","e","target","name","role","selected","dateFormat","disabled","activeKey","onSelect","eventKey","title","email","contact","staff_type","present_days","filter","length","absent_days","total_work_hours","reduce","sum","average_work_hours","round","_detailedStats$attend6","_detailedStats$attend7","presentDays","totalDays","rate","now","options","animation","daily_details","dayDetail","dayIndex","work_pairs","total_formatted","pair","pairIndex","entry_time","exit_time","duration_formatted","size","reverse","index","Item","show","onHide","closeButton","movement","early_departure_minutes","Footer"],"sources":["/var/www/College-IUP/front/src/pages/Teachers/TeacherDetailedStats.jsx"],"sourcesContent":["/**\n * Statistiques détaillées du personnel (enseignants, comptables, surveillants, etc.)\n * Affichage complet des heures de travail, mouvements et analyses\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n    Container,\n    Row,\n    Col,\n    Card,\n    Table,\n    Badge,\n    Form,\n    Button,\n    Modal,\n    Spinner,\n    Alert,\n    ProgressBar,\n    ListGroup,\n    Tabs,\n    Tab\n} from 'react-bootstrap';\nimport {\n    PersonCheck,\n    Clock,\n    Calendar,\n    BarChart,\n    ArrowRightCircle,\n    ArrowLeftCircle,\n    TrendingUp,\n    TrendingDown,\n    Eye,\n    Download,\n    Filter,\n    CheckCircleFill,\n    XCircleFill,\n    ClockHistory,\n    Activity\n} from 'react-bootstrap-icons';\nimport {\n    Chart as ChartJS,\n    CategoryScale,\n    LinearScale,\n    BarElement,\n    LineElement,\n    PointElement,\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement\n} from 'chart.js';\nimport { Bar, Line, Doughnut } from 'react-chartjs-2';\nimport { useAuth } from '../../hooks/useAuth';\nimport { secureApiEndpoints } from '../../utils/apiMigration';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\n\n// Enregistrement des composants Chart.js\nChartJS.register(\n    CategoryScale,\n    LinearScale,\n    BarElement,\n    LineElement,\n    PointElement,\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement\n);\n\nconst TeacherDetailedStats = () => {\n    const [staffMembers, setStaffMembers] = useState([]);\n    const [selectedStaff, setSelectedStaff] = useState('');\n    const [startDate, setStartDate] = useState(new Date(new Date().setDate(new Date().getDate() - 30)));\n    const [endDate, setEndDate] = useState(new Date());\n    const [detailedStats, setDetailedStats] = useState(null);\n    const [dayMovements, setDayMovements] = useState(null);\n    const [selectedDate, setSelectedDate] = useState(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [showMovementsModal, setShowMovementsModal] = useState(false);\n    const [activeTab, setActiveTab] = useState('overview');\n\n    const { user } = useAuth();\n\n    useEffect(() => {\n        loadStaffMembers();\n    }, []);\n\n    useEffect(() => {\n        if (selectedStaff) {\n            loadDetailedStats();\n        }\n    }, [selectedStaff, startDate, endDate]);\n\n    const loadStaffMembers = async () => {\n        try {\n            const response = await secureApiEndpoints.staff.getStaffWithQR();\n            if (response.success) {\n                setStaffMembers(response.data || []);\n            }\n        } catch (error) {\n            console.error('Erreur lors du chargement du personnel:', error);\n        }\n    };\n\n    const loadDetailedStats = async () => {\n        if (!selectedStaff) return;\n\n        try {\n            setIsLoading(true);\n            const response = await secureApiEndpoints.staff.getStaffReport(selectedStaff, {\n                start_date: startDate.toISOString().split('T')[0],\n                end_date: endDate.toISOString().split('T')[0]\n            });\n\n            if (response.success) {\n                setDetailedStats(response.data);\n            }\n        } catch (error) {\n            console.error('Erreur lors du chargement des statistiques:', error);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const loadDayMovements = async (date) => {\n        try {\n            // Pour l'instant, on utilise les données des mouvements récents depuis les statistiques détaillées\n            // car l'API staff n'a pas encore d'endpoint spécifique pour les mouvements du jour\n            const dayData = detailedStats?.attendances?.find(a => a.attendance_date === date);\n            if (dayData) {\n                setDayMovements({\n                    movements_count: 1,\n                    timeline: [{\n                        id: dayData.id,\n                        time: dayData.scanned_at ? new Date(dayData.scanned_at).toLocaleTimeString('fr-FR') : '-',\n                        type: dayData.event_type || 'entry',\n                        type_label: dayData.event_type === 'exit' ? 'Sortie' : 'Entrée',\n                        status: {\n                            is_late: dayData.late_minutes > 0,\n                            is_early_departure: false\n                        },\n                        late_minutes: dayData.late_minutes || 0,\n                        supervisor: 'Système',\n                        time_until_next: null\n                    }]\n                });\n                setSelectedDate(date);\n                setShowMovementsModal(true);\n            }\n        } catch (error) {\n            console.error('Erreur lors du chargement des mouvements:', error);\n        }\n    };\n\n    // Configuration des graphiques\n    const getWorkHoursChartData = () => {\n        if (!detailedStats?.attendances) return null;\n\n        const last14Days = detailedStats.attendances.slice(-14);\n        \n        return {\n            labels: last14Days.map(day => new Date(day.attendance_date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' })),\n            datasets: [\n                {\n                    label: 'Heures travaillées',\n                    data: last14Days.map(day => day.work_hours || 0),\n                    backgroundColor: 'rgba(34, 197, 94, 0.8)',\n                    borderColor: 'rgba(34, 197, 94, 1)',\n                    borderWidth: 2\n                },\n                {\n                    label: 'Heures attendues',\n                    data: last14Days.map(day => 8), // Valeur par défaut de 8h\n                    backgroundColor: 'rgba(156, 163, 175, 0.3)',\n                    borderColor: 'rgba(156, 163, 175, 1)',\n                    borderWidth: 1,\n                    borderDash: [5, 5]\n                }\n            ]\n        };\n    };\n\n    const getWeekdayAnalysisData = () => {\n        if (!detailedStats?.attendances) return null;\n\n        // Calculer les statistiques par jour de la semaine\n        const weekdayStats = {};\n        const weekdays = ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'];\n        \n        detailedStats.attendances.forEach(attendance => {\n            const date = new Date(attendance.attendance_date);\n            const dayName = date.toLocaleDateString('fr-FR', { weekday: 'long' });\n            const dayCapitalized = dayName.charAt(0).toUpperCase() + dayName.slice(1);\n            \n            if (!weekdayStats[dayCapitalized]) {\n                weekdayStats[dayCapitalized] = { present: 0, total: 0 };\n            }\n            \n            weekdayStats[dayCapitalized].total++;\n            if (attendance.is_present) {\n                weekdayStats[dayCapitalized].present++;\n            }\n        });\n\n        const attendanceRates = weekdays.map(day => {\n            const stats = weekdayStats[day];\n            return stats ? (stats.present / stats.total) * 100 : 0;\n        });\n\n        return {\n            labels: weekdays,\n            datasets: [\n                {\n                    label: 'Taux de présence (%)',\n                    data: attendanceRates,\n                    backgroundColor: [\n                        'rgba(59, 130, 246, 0.8)',\n                        'rgba(34, 197, 94, 0.8)',\n                        'rgba(251, 191, 36, 0.8)',\n                        'rgba(249, 115, 22, 0.8)',\n                        'rgba(239, 68, 68, 0.8)',\n                        'rgba(168, 85, 247, 0.8)',\n                        'rgba(236, 72, 153, 0.8)'\n                    ],\n                    borderColor: '#fff',\n                    borderWidth: 2\n                }\n            ]\n        };\n    };\n\n    const chartOptions = {\n        responsive: true,\n        plugins: {\n            legend: {\n                position: 'top'\n            }\n        },\n        scales: {\n            y: {\n                beginAtZero: true\n            }\n        }\n    };\n\n    const getPunctualityBadge = (status) => {\n        switch (status) {\n            case 'punctual':\n                return <Badge bg=\"success\">Ponctuel</Badge>;\n            case 'late':\n                return <Badge bg=\"warning\">En retard</Badge>;\n            case 'early_departure':\n                return <Badge bg=\"info\">Départ anticipé</Badge>;\n            case 'late_and_early':\n                return <Badge bg=\"danger\">Retard + Départ</Badge>;\n            default:\n                return <Badge bg=\"secondary\">-</Badge>;\n        }\n    };\n\n    const formatDuration = (minutes) => {\n        if (!minutes) return '-';\n        const hours = Math.floor(minutes / 60);\n        const mins = minutes % 60;\n        return hours > 0 ? `${hours}h ${mins}min` : `${mins}min`;\n    };\n\n    const selectedStaffData = staffMembers.find(s => s.id === parseInt(selectedStaff));\n\n    return (\n        <Container fluid className=\"py-4\">\n            {/* Header */}\n            <Row className=\"mb-4\">\n                <Col>\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                        <div>\n                            <h2 className=\"mb-0 d-flex align-items-center\">\n                                <Activity className=\"me-2\" />\n                                Statistiques Détaillées Personnel\n                            </h2>\n                            <p className=\"text-muted mb-0\">\n                                Analyse complète des heures et mouvements du personnel\n                            </p>\n                        </div>\n                        \n                        <Button variant=\"outline-primary\" onClick={() => window.print()}>\n                            <Download className=\"me-1\" />\n                            Imprimer\n                        </Button>\n                    </div>\n                </Col>\n            </Row>\n\n            {/* Filtres */}\n            <Row className=\"mb-4\">\n                <Col>\n                    <Card>\n                        <Card.Header className=\"d-flex align-items-center\">\n                            <Filter className=\"me-2\" />\n                            Sélection et période\n                        </Card.Header>\n                        <Card.Body>\n                            <Row>\n                                <Col md={4}>\n                                    <Form.Group className=\"mb-3\">\n                                        <Form.Label>Membre du personnel</Form.Label>\n                                        <Form.Select \n                                            value={selectedStaff} \n                                            onChange={(e) => setSelectedStaff(e.target.value)}\n                                        >\n                                            <option value=\"\">Sélectionner un membre du personnel</option>\n                                            {staffMembers.map(staff => (\n                                                <option key={staff.id} value={staff.id}>\n                                                    {staff.name} ({staff.role})\n                                                </option>\n                                            ))}\n                                        </Form.Select>\n                                    </Form.Group>\n                                </Col>\n                                <Col md={3}>\n                                    <Form.Group className=\"mb-3\">\n                                        <Form.Label>Date de début</Form.Label>\n                                        <DatePicker\n                                            selected={startDate}\n                                            onChange={setStartDate}\n                                            className=\"form-control\"\n                                            dateFormat=\"dd/MM/yyyy\"\n                                        />\n                                    </Form.Group>\n                                </Col>\n                                <Col md={3}>\n                                    <Form.Group className=\"mb-3\">\n                                        <Form.Label>Date de fin</Form.Label>\n                                        <DatePicker\n                                            selected={endDate}\n                                            onChange={setEndDate}\n                                            className=\"form-control\"\n                                            dateFormat=\"dd/MM/yyyy\"\n                                        />\n                                    </Form.Group>\n                                </Col>\n                                <Col md={2} className=\"d-flex align-items-end\">\n                                    <Button \n                                        variant=\"primary\"\n                                        onClick={loadDetailedStats}\n                                        disabled={!selectedStaff || isLoading}\n                                        className=\"mb-3\"\n                                    >\n                                        Analyser\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n\n            {/* Contenu principal */}\n            {detailedStats && selectedStaffData ? (\n                <Tabs activeKey={activeTab} onSelect={setActiveTab} className=\"mb-4\">\n                    {/* Onglet Vue d'ensemble */}\n                    <Tab eventKey=\"overview\" title=\"Vue d'ensemble\">\n                        <Row className=\"mb-4\">\n                            {/* Informations personnel */}\n                            <Col md={4}>\n                                <Card>\n                                    <Card.Header className=\"d-flex align-items-center\">\n                                        <PersonCheck className=\"me-2\" />\n                                        Informations Personnel\n                                    </Card.Header>\n                                    <Card.Body>\n                                        <h5>{selectedStaffData.name}</h5>\n                                        <p className=\"text-muted mb-2\">{selectedStaffData.email}</p>\n                                        {selectedStaffData.contact && (\n                                            <p className=\"text-muted mb-2\">Contact: {selectedStaffData.contact}</p>\n                                        )}\n                                        <hr />\n                                        <p className=\"mb-1\">\n                                            <strong>Rôle:</strong> {selectedStaffData.role}\n                                        </p>\n                                        <p className=\"mb-1\">\n                                            <strong>Type:</strong> {selectedStaffData.staff_type}\n                                        </p>\n                                        <p className=\"mb-0\">\n                                            <strong>Période:</strong> {startDate.toLocaleDateString()} - {endDate.toLocaleDateString()}\n                                        </p>\n                                    </Card.Body>\n                                </Card>\n                            </Col>\n\n                            {/* Statistiques résumées */}\n                            <Col md={8}>\n                                <Card>\n                                    <Card.Header className=\"d-flex align-items-center\">\n                                        <BarChart className=\"me-2\" />\n                                        Statistiques de la période\n                                    </Card.Header>\n                                    <Card.Body>\n                                        <Row>\n                                            <Col md={3} className=\"text-center\">\n                                                <h4 className=\"text-success\">{detailedStats.stats?.present_days || detailedStats.attendances?.filter(a => a.is_present).length || 0}</h4>\n                                                <small className=\"text-muted\">Jours présents</small>\n                                            </Col>\n                                            <Col md={3} className=\"text-center\">\n                                                <h4 className=\"text-danger\">{detailedStats.stats?.absent_days || detailedStats.attendances?.filter(a => !a.is_present).length || 0}</h4>\n                                                <small className=\"text-muted\">Jours absents</small>\n                                            </Col>\n                                            <Col md={3} className=\"text-center\">\n                                                <h4 className=\"text-info\">{detailedStats.stats?.total_work_hours || detailedStats.attendances?.reduce((sum, a) => sum + (a.work_hours || 0), 0) || 0}h</h4>\n                                                <small className=\"text-muted\">Heures travaillées</small>\n                                            </Col>\n                                            <Col md={3} className=\"text-center\">\n                                                <h4 className=\"text-warning\">{detailedStats.stats?.average_work_hours || (detailedStats.attendances?.length > 0 ? Math.round(detailedStats.attendances.reduce((sum, a) => sum + (a.work_hours || 0), 0) / detailedStats.attendances.length * 10) / 10 : 0)}h</h4>\n                                                <small className=\"text-muted\">Moyenne/jour</small>\n                                            </Col>\n                                        </Row>\n                                        <hr />\n                                        <Row>\n                                            <Col md={6}>\n                                                <div className=\"text-center\">\n                                                    {(() => {\n                                                        const presentDays = detailedStats.attendances?.filter(a => a.is_present).length || 0;\n                                                        const totalDays = detailedStats.attendances?.length || 1;\n                                                        const rate = Math.round((presentDays / totalDays) * 100);\n                                                        return (\n                                                            <>\n                                                                <h5 className=\"text-primary\">{rate}%</h5>\n                                                                <small className=\"text-muted\">Taux de présence</small>\n                                                                <ProgressBar \n                                                                    now={rate} \n                                                                    variant={rate >= 90 ? 'success' : rate >= 70 ? 'warning' : 'danger'}\n                                                                    className=\"mt-2\"\n                                                                />\n                                                            </>\n                                                        );\n                                                    })()}\n                                                </div>\n                                            </Col>\n                                            <Col md={6}>\n                                                <div className=\"text-center\">\n                                                    <h5 className=\"text-info\">{detailedStats.attendances?.length || 0}</h5>\n                                                    <small className=\"text-muted\">Total enregistrements</small>\n                                                    <div className=\"mt-2\">\n                                                        <small className=\"text-muted\">\n                                                            Retard moyen: {Math.round(detailedStats.attendances?.reduce((sum, a) => sum + (a.late_minutes || 0), 0) / (detailedStats.attendances?.length || 1)) || 0} min\n                                                        </small>\n                                                    </div>\n                                                </div>\n                                            </Col>\n                                        </Row>\n                                    </Card.Body>\n                                </Card>\n                            </Col>\n                        </Row>\n\n                        {/* Graphiques */}\n                        <Row className=\"mb-4\">\n                            <Col md={8}>\n                                <Card>\n                                    <Card.Header>Heures de travail quotidiennes</Card.Header>\n                                    <Card.Body>\n                                        {getWorkHoursChartData() && (\n                                            <Bar data={getWorkHoursChartData()} options={chartOptions} />\n                                        )}\n                                    </Card.Body>\n                                </Card>\n                            </Col>\n                            <Col md={4}>\n                                <Card>\n                                    <Card.Header>Analyse par jour de semaine</Card.Header>\n                                    <Card.Body>\n                                        {getWeekdayAnalysisData() && (\n                                            <Doughnut data={getWeekdayAnalysisData()} />\n                                        )}\n                                    </Card.Body>\n                                </Card>\n                            </Col>\n                        </Row>\n                    </Tab>\n\n                    {/* Onglet Détails quotidiens */}\n                    <Tab eventKey=\"daily\" title=\"Détails quotidiens\">\n                        <Card>\n                            <Card.Header className=\"d-flex align-items-center\">\n                                <Calendar className=\"me-2\" />\n                                Détails par jour - Toutes les entrées et sorties\n                            </Card.Header>\n                            <Card.Body>\n                                {isLoading ? (\n                                    <div className=\"text-center py-4\">\n                                        <Spinner animation=\"border\" />\n                                    </div>\n                                ) : detailedStats.daily_details ? (\n                                    <div>\n                                        {detailedStats.daily_details.map((dayDetail, dayIndex) => (\n                                            <Card key={dayIndex} className=\"mb-3\">\n                                                <Card.Header className=\"d-flex justify-content-between align-items-center\">\n                                                    <h6 className=\"mb-0\">\n                                                        {new Date(dayDetail.date).toLocaleDateString('fr-FR', { \n                                                            weekday: 'long', \n                                                            day: 'numeric', \n                                                            month: 'long' \n                                                        })}\n                                                    </h6>\n                                                    <div>\n                                                        <Badge bg=\"primary\" className=\"me-2\">\n                                                            {dayDetail.work_pairs.length} session{dayDetail.work_pairs.length > 1 ? 's' : ''}\n                                                        </Badge>\n                                                        <Badge bg=\"success\">\n                                                            Total: {dayDetail.total_formatted}\n                                                        </Badge>\n                                                    </div>\n                                                </Card.Header>\n                                                <Card.Body>\n                                                    {dayDetail.work_pairs.length > 0 ? (\n                                                        <div>\n                                                            {dayDetail.work_pairs.map((pair, pairIndex) => (\n                                                                <div key={pairIndex} className=\"d-flex justify-content-between align-items-center py-2 border-bottom\">\n                                                                    <div className=\"d-flex align-items-center\">\n                                                                        <ArrowRightCircle className=\"text-success me-2\" />\n                                                                        <span className=\"me-3\">\n                                                                            <strong>Entrée:</strong> {pair.entry_time}\n                                                                        </span>\n                                                                        {pair.exit_time ? (\n                                                                            <>\n                                                                                <ArrowLeftCircle className=\"text-warning me-2\" />\n                                                                                <span>\n                                                                                    <strong>Sortie:</strong> {pair.exit_time}\n                                                                                </span>\n                                                                            </>\n                                                                        ) : (\n                                                                            <Badge bg=\"info\">En cours...</Badge>\n                                                                        )}\n                                                                    </div>\n                                                                    <div>\n                                                                        <Badge bg=\"outline-primary\">\n                                                                            {pair.duration_formatted}\n                                                                        </Badge>\n                                                                    </div>\n                                                                </div>\n                                                            ))}\n                                                        </div>\n                                                    ) : (\n                                                        <div className=\"text-center text-muted py-3\">\n                                                            <XCircleFill className=\"mb-2\" size={24} />\n                                                            <p className=\"mb-0\">Absent ce jour</p>\n                                                        </div>\n                                                    )}\n                                                </Card.Body>\n                                            </Card>\n                                        ))}\n                                        \n                                        {detailedStats.daily_details.length === 0 && (\n                                            <Alert variant=\"info\" className=\"text-center\">\n                                                <Calendar size={48} className=\"mb-3\" />\n                                                <h5>Aucune donnée de présence</h5>\n                                                <p>Aucun enregistrement de présence trouvé pour cette période.</p>\n                                            </Alert>\n                                        )}\n                                    </div>\n                                ) : (\n                                    <Alert variant=\"warning\" className=\"text-center\">\n                                        <Clock size={48} className=\"mb-3\" />\n                                        <h5>Données non disponibles</h5>\n                                        <p>Les détails quotidiens ne sont pas disponibles pour cette sélection.</p>\n                                    </Alert>\n                                )}\n                            </Card.Body>\n                        </Card>\n                    </Tab>\n\n                    {/* Onglet Mouvements récents */}\n                    <Tab eventKey=\"movements\" title=\"Mouvements récents\">\n                        <Card>\n                            <Card.Header className=\"d-flex align-items-center\">\n                                <ClockHistory className=\"me-2\" />\n                                20 derniers mouvements\n                            </Card.Header>\n                            <Card.Body>\n                                <ListGroup>\n                                    {detailedStats.attendances?.slice(-20).reverse().map((attendance, index) => (\n                                        <ListGroup.Item key={index} className=\"d-flex justify-content-between align-items-center\">\n                                            <div>\n                                                <div className=\"d-flex align-items-center\">\n                                                    {attendance.event_type === 'exit' ? (\n                                                        <ArrowLeftCircle className=\"text-warning me-2\" />\n                                                    ) : (\n                                                        <ArrowRightCircle className=\"text-success me-2\" />\n                                                    )}\n                                                    <div>\n                                                        <strong>\n                                                            {new Date(attendance.attendance_date).toLocaleDateString('fr-FR')} \n                                                            {attendance.scanned_at && ' à ' + new Date(attendance.scanned_at).toLocaleTimeString('fr-FR')}\n                                                        </strong>\n                                                        <small className=\"text-muted d-block\">\n                                                            {attendance.event_type === 'exit' ? 'Sortie' : 'Entrée'} - \n                                                            Personnel: {selectedStaffData?.name}\n                                                        </small>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div>\n                                                {(attendance.late_minutes || 0) > 0 && (\n                                                    <Badge bg=\"warning\" className=\"me-1\">\n                                                        {attendance.late_minutes} min retard\n                                                    </Badge>\n                                                )}\n                                                {attendance.is_present && (\n                                                    <Badge bg=\"success\" className=\"me-1\">\n                                                        Présent\n                                                    </Badge>\n                                                )}\n                                            </div>\n                                        </ListGroup.Item>\n                                    ))}\n                                </ListGroup>\n                            </Card.Body>\n                        </Card>\n                    </Tab>\n                </Tabs>\n            ) : !selectedStaff ? (\n                <Alert variant=\"info\" className=\"text-center\">\n                    <PersonCheck size={48} className=\"mb-3\" />\n                    <h5>Sélectionnez un membre du personnel</h5>\n                    <p>Choisissez un membre du personnel dans la liste ci-dessus pour voir ses statistiques détaillées.</p>\n                </Alert>\n            ) : isLoading ? (\n                <div className=\"text-center py-5\">\n                    <Spinner animation=\"border\" size=\"lg\" />\n                    <p className=\"mt-3\">Chargement des statistiques...</p>\n                </div>\n            ) : null}\n\n            {/* Modal des mouvements du jour */}\n            <Modal show={showMovementsModal} onHide={() => setShowMovementsModal(false)} size=\"lg\">\n                <Modal.Header closeButton>\n                    <Modal.Title>\n                        <ClockHistory className=\"me-2\" />\n                        Mouvements du {selectedDate && new Date(selectedDate).toLocaleDateString('fr-FR')}\n                    </Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    {dayMovements && (\n                        <div>\n                            <p><strong>Total mouvements:</strong> {dayMovements.movements_count}</p>\n                            <Table responsive>\n                                <thead>\n                                    <tr>\n                                        <th>Heure</th>\n                                        <th>Type</th>\n                                        <th>Statut</th>\n                                        <th>Superviseur</th>\n                                        <th>Temps jusqu'au suivant</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {dayMovements.timeline.map((movement, index) => (\n                                        <tr key={movement.id}>\n                                            <td>{movement.time}</td>\n                                            <td>\n                                                <div className=\"d-flex align-items-center\">\n                                                    {movement.type === 'entry' ? (\n                                                        <ArrowRightCircle className=\"text-success me-1\" />\n                                                    ) : (\n                                                        <ArrowLeftCircle className=\"text-warning me-1\" />\n                                                    )}\n                                                    {movement.type_label}\n                                                </div>\n                                            </td>\n                                            <td>\n                                                {movement.status.is_late && (\n                                                    <Badge bg=\"warning\" className=\"me-1\">\n                                                        {movement.late_minutes} min retard\n                                                    </Badge>\n                                                )}\n                                                {movement.status.is_early_departure && (\n                                                    <Badge bg=\"info\" className=\"me-1\">\n                                                        {movement.early_departure_minutes} min tôt\n                                                    </Badge>\n                                                )}\n                                                {!movement.status.is_late && !movement.status.is_early_departure && (\n                                                    <Badge bg=\"success\">Ponctuel</Badge>\n                                                )}\n                                            </td>\n                                            <td>{movement.supervisor}</td>\n                                            <td>\n                                                {movement.time_until_next ? \n                                                    formatDuration(movement.time_until_next) : \n                                                    '-'\n                                                }\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </Table>\n                        </div>\n                    )}\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={() => setShowMovementsModal(false)}>\n                        Fermer\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </Container>\n    );\n};\n\nexport default TeacherDetailedStats;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}