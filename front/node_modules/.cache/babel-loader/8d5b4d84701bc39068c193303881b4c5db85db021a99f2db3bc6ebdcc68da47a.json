{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{Container,Row,Col,Card,Button,Form,Table,Alert,Spinner,Badge,Modal,Tabs,Tab,InputGroup,Dropdown,OverlayTrigger,Tooltip,Pagination}from'react-bootstrap';import{Plus,Search,Filter,Eye,Reply,XCircle,CheckCircle,Clock,AlertTriangle,FileEarmarkText,PersonFill,Calendar,ExclamationTriangle,InfoCircle,Archive}from'react-bootstrap-icons';import{Link,useNavigate,useLocation}from'react-router-dom';import{authService}from'../../services/authService';import{extractErrorMessage}from'../../utils/errorHandler';import{host}from'../../utils/fetch';import{useAuth}from'../../hooks/useAuth';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DemandesExplication=()=>{var _typeOptions$find2,_selectedDemande$emet,_selectedDemande$emet2,_selectedDemande$dest,_selectedDemande$dest2;const navigate=useNavigate();const location=useLocation();const{user}=useAuth();const[demandes,setDemandes]=useState([]);const[filteredDemandes,setFilteredDemandes]=useState([]);const[statistiques,setStatistiques]=useState({});const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[success,setSuccess]=useState('');// Détecter si c'est un personnel (non-comptable) qui accède à ses demandes\nconst isPersonnelView=location.pathname==='/mes-demandes-explication';const isComptable=user&&(user.role==='accountant'||user.role==='comptable_superieur');// États pour les filtres\nconst[activeTab,setActiveTab]=useState(isPersonnelView?'recues':'emises');const[searchTerm,setSearchTerm]=useState('');const[statusFilter,setStatusFilter]=useState('');const[typeFilter,setTypeFilter]=useState('');const[priorityFilter,setPriorityFilter]=useState('');const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);// Modal pour voir les détails\nconst[showDetailModal,setShowDetailModal]=useState(false);const[selectedDemande,setSelectedDemande]=useState(null);const[responseText,setResponseText]=useState('');const[showResponseForm,setShowResponseForm]=useState(false);// Configuration des filtres\nconst statusOptions=[{value:'',label:'Tous les statuts'},{value:'brouillon',label:'Brouillon',color:'secondary'},{value:'envoyee',label:'Envoyée',color:'primary'},{value:'lue',label:'Lue',color:'info'},{value:'repondue',label:'Répondue',color:'success'},{value:'cloturee',label:'Clôturée',color:'dark'}];const typeOptions=[{value:'',label:'Tous les types'},{value:'financier',label:'Financier'},{value:'absence',label:'Absence'},{value:'retard',label:'Retard'},{value:'disciplinaire',label:'Disciplinaire'},{value:'autre',label:'Autre'}];const priorityOptions=[{value:'',label:'Toutes les priorités'},{value:'basse',label:'Basse',color:'success'},{value:'normale',label:'Normale',color:'info'},{value:'haute',label:'Haute',color:'warning'},{value:'urgente',label:'Urgente',color:'danger'}];// Charger les demandes\nconst loadDemandes=useCallback(async()=>{try{setLoading(true);setError('');const params=new URLSearchParams({vue:activeTab,page:currentPage,per_page:10});if(searchTerm)params.append('search',searchTerm);if(statusFilter)params.append('statut',statusFilter);if(typeFilter)params.append('type',typeFilter);if(priorityFilter)params.append('priorite',priorityFilter);const response=await fetch(`${host}/api/demandes-explication?${params.toString()}`,{method:'GET',headers:{'Authorization':`Bearer ${authService.getToken()}`,'Accept':'application/json'}});if(!response.ok){throw new Error(`Erreur ${response.status}: ${response.statusText}`);}const data=await response.json();if(data.success){setDemandes(data.data.data||[]);setFilteredDemandes(data.data.data||[]);setCurrentPage(data.data.current_page||1);setTotalPages(data.data.last_page||1);setStatistiques(data.stats||{});}else{setError(data.message||'Erreur lors du chargement des demandes');}}catch(error){console.error('Erreur lors du chargement:',error);setError(extractErrorMessage(error));}finally{setLoading(false);}},[activeTab,currentPage,searchTerm,statusFilter,typeFilter,priorityFilter]);useEffect(()=>{loadDemandes();},[loadDemandes]);// Voir les détails d'une demande\nconst handleViewDetails=async demandeId=>{try{const response=await fetch(`${host}/api/demandes-explication/${demandeId}`,{method:'GET',headers:{'Authorization':`Bearer ${authService.getToken()}`,'Accept':'application/json'}});if(response.ok){const data=await response.json();setSelectedDemande(data.data);setShowDetailModal(true);}else{setError('Erreur lors du chargement des détails');}}catch(error){setError('Erreur lors du chargement des détails');}};// Répondre à une demande\nconst handleResponse=async()=>{if(!responseText.trim()){setError('Veuillez saisir une réponse');return;}try{setLoading(true);const response=await fetch(`${host}/api/demandes-explication/${selectedDemande.id}/repondre`,{method:'POST',headers:{'Authorization':`Bearer ${authService.getToken()}`,'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify({reponse:responseText})});const data=await response.json();if(data.success){setSuccess('Réponse envoyée avec succès');setResponseText('');setShowResponseForm(false);setShowDetailModal(false);loadDemandes();}else{setError(data.message||'Erreur lors de l\\'envoi de la réponse');}}catch(error){setError(extractErrorMessage(error));}finally{setLoading(false);}};// Clôturer une demande\nconst handleClose=async demandeId=>{if(!window.confirm('Êtes-vous sûr de vouloir clôturer cette demande ?')){return;}try{setLoading(true);const response=await fetch(`${host}/api/demandes-explication/${demandeId}/cloturer`,{method:'POST',headers:{'Authorization':`Bearer ${authService.getToken()}`,'Accept':'application/json'}});const data=await response.json();if(data.success){setSuccess('Demande clôturée avec succès');loadDemandes();setShowDetailModal(false);}else{setError(data.message||'Erreur lors de la clôture');}}catch(error){setError(extractErrorMessage(error));}finally{setLoading(false);}};// Réinitialiser les filtres\nconst resetFilters=()=>{setSearchTerm('');setStatusFilter('');setTypeFilter('');setPriorityFilter('');setCurrentPage(1);};// Obtenir le badge de statut\nconst getStatusBadge=statut=>{const statusConfig=statusOptions.find(s=>s.value===statut);return/*#__PURE__*/_jsx(Badge,{bg:(statusConfig===null||statusConfig===void 0?void 0:statusConfig.color)||'secondary',children:(statusConfig===null||statusConfig===void 0?void 0:statusConfig.label)||statut});};// Obtenir le badge de priorité\nconst getPriorityBadge=priorite=>{const priorityConfig=priorityOptions.find(p=>p.value===priorite);return/*#__PURE__*/_jsx(Badge,{bg:(priorityConfig===null||priorityConfig===void 0?void 0:priorityConfig.color)||'secondary',className:\"me-1\",children:(priorityConfig===null||priorityConfig===void 0?void 0:priorityConfig.label)||priorite});};// Obtenir l'icône de statut\nconst getStatusIcon=statut=>{switch(statut){case'brouillon':return/*#__PURE__*/_jsx(FileEarmarkText,{className:\"text-secondary\"});case'envoyee':return/*#__PURE__*/_jsx(Clock,{className:\"text-primary\"});case'lue':return/*#__PURE__*/_jsx(Eye,{className:\"text-info\"});case'repondue':return/*#__PURE__*/_jsx(CheckCircle,{className:\"text-success\"});case'cloturee':return/*#__PURE__*/_jsx(Archive,{className:\"text-dark\"});default:return/*#__PURE__*/_jsx(InfoCircle,{className:\"text-muted\"});}};return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"py-4\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"d-flex align-items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(ExclamationTriangle,{className:\"text-warning\"}),isPersonnelView?'Mes Demandes d\\'Explication':'Demandes d\\'Explication (D.E)']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:isPersonnelView?'Demandes d\\'explication reçues et à traiter':'Gestion des demandes d\\'explication au personnel'})]}),isComptable&&!isPersonnelView&&/*#__PURE__*/_jsxs(Button,{variant:\"primary\",as:Link,to:\"/demandes-explication/nouvelle\",className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"Nouvelle demande\"]})]})})}),error&&/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",dismissible:true,onClose:()=>setError(''),className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Erreur:\"}),\" \",error]}),success&&/*#__PURE__*/_jsxs(Alert,{variant:\"success\",dismissible:true,onClose:()=>setSuccess(''),className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Succ\\xE8s:\"}),\" \",success]}),statistiques&&Object.keys(statistiques).length>0&&/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"bg-primary text-white h-100\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:statistiques.total||0}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Total\"})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"bg-warning text-dark h-100\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:statistiques.en_attente||0}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"En attente\"})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"bg-success text-white h-100\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:statistiques.repondues||0}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"R\\xE9pondues\"})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"bg-info text-white h-100\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:demandes.length}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Affich\\xE9es\"})]})})})]}),/*#__PURE__*/_jsx(Card,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card.Header,{children:[/*#__PURE__*/_jsx(Tabs,{activeKey:activeTab,onSelect:k=>{setActiveTab(k);setCurrentPage(1);},className:\"mb-3\",children:isPersonnelView?// Pour le personnel : seulement ses demandes reçues\n[/*#__PURE__*/_jsx(Tab,{eventKey:\"recues\",title:\"Demandes re\\xE7ues\"},\"recues\"),/*#__PURE__*/_jsx(Tab,{eventKey:\"toutes\",title:\"Toutes mes demandes\"},\"toutes\")]:// Pour les comptables : toutes les vues\n[/*#__PURE__*/_jsx(Tab,{eventKey:\"emises\",title:\"Demandes \\xE9mises\"},\"emises\"),/*#__PURE__*/_jsx(Tab,{eventKey:\"recues\",title:\"Demandes re\\xE7ues\"},\"recues\"),/*#__PURE__*/_jsx(Tab,{eventKey:\"toutes\",title:\"Toutes les demandes\"},\"toutes\")]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:3,md:6,className:\"mb-2\",children:/*#__PURE__*/_jsxs(InputGroup,{size:\"sm\",children:[/*#__PURE__*/_jsx(InputGroup.Text,{children:/*#__PURE__*/_jsx(Search,{})}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Rechercher...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]})}),/*#__PURE__*/_jsx(Col,{lg:2,md:6,className:\"mb-2\",children:/*#__PURE__*/_jsx(Form.Select,{size:\"sm\",value:statusFilter,onChange:e=>setStatusFilter(e.target.value),children:statusOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))})}),/*#__PURE__*/_jsx(Col,{lg:2,md:6,className:\"mb-2\",children:/*#__PURE__*/_jsx(Form.Select,{size:\"sm\",value:typeFilter,onChange:e=>setTypeFilter(e.target.value),children:typeOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))})}),/*#__PURE__*/_jsx(Col,{lg:2,md:6,className:\"mb-2\",children:/*#__PURE__*/_jsx(Form.Select,{size:\"sm\",value:priorityFilter,onChange:e=>setPriorityFilter(e.target.value),children:priorityOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))})}),/*#__PURE__*/_jsx(Col,{lg:3,md:12,className:\"mb-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-secondary\",size:\"sm\",onClick:resetFilters,className:\"flex-grow-1\",children:[/*#__PURE__*/_jsx(Filter,{className:\"me-1\"}),\"R\\xE9initialiser\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"primary\",size:\"sm\",onClick:()=>setCurrentPage(1),className:\"flex-grow-1\",children:[/*#__PURE__*/_jsx(Search,{className:\"me-1\"}),\"Filtrer\"]})]})})]})]})}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[activeTab==='emises'&&'Demandes émises',activeTab==='recues'&&'Demandes reçues',activeTab==='toutes'&&'Toutes les demandes']}),demandes.length>0&&/*#__PURE__*/_jsxs(Badge,{bg:\"secondary\",children:[demandes.length,\" demande(s)\"]})]})}),/*#__PURE__*/_jsx(Card.Body,{className:\"p-0\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3 text-muted\",children:\"Chargement des demandes...\"})]}):demandes.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(ExclamationTriangle,{size:48,className:\"text-muted mb-3\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-muted\",children:\"Aucune demande trouv\\xE9e\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted\",children:[activeTab==='emises'&&'Vous n\\'avez pas encore émis de demandes d\\'explication.',activeTab==='recues'&&'Vous n\\'avez pas reçu de demandes d\\'explication.',activeTab==='toutes'&&'Aucune demande ne correspond aux critères de recherche.']})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(Table,{striped:true,hover:true,className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"40\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sujet\"}),/*#__PURE__*/_jsx(\"th\",{width:\"150\",children:activeTab==='emises'?'Destinataire':'Émetteur'}),/*#__PURE__*/_jsx(\"th\",{width:\"100\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{width:\"80\",children:\"Priorit\\xE9\"}),/*#__PURE__*/_jsx(\"th\",{width:\"100\",children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{width:\"120\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{width:\"120\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:demandes.map((demande,index)=>{var _demande$destinataire,_demande$emetteur,_demande$destinataire2,_demande$emetteur2,_typeOptions$find;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:(currentPage-1)*10+index+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[getStatusIcon(demande.statut),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:demande.sujet}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:demande.message.length>60?demande.message.substring(0,60)+'...':demande.message})]})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(PersonFill,{className:\"text-muted\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:activeTab==='emises'?(_demande$destinataire=demande.destinataire)===null||_demande$destinataire===void 0?void 0:_demande$destinataire.name:(_demande$emetteur=demande.emetteur)===null||_demande$emetteur===void 0?void 0:_demande$emetteur.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:activeTab==='emises'?(_demande$destinataire2=demande.destinataire)===null||_demande$destinataire2===void 0?void 0:_demande$destinataire2.email:(_demande$emetteur2=demande.emetteur)===null||_demande$emetteur2===void 0?void 0:_demande$emetteur2.email})]})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"light\",text:\"dark\",children:((_typeOptions$find=typeOptions.find(t=>t.value===demande.type))===null||_typeOptions$find===void 0?void 0:_typeOptions$find.label)||demande.type})}),/*#__PURE__*/_jsx(\"td\",{children:getPriorityBadge(demande.priorite)}),/*#__PURE__*/_jsx(\"td\",{children:getStatusBadge(demande.statut)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(Calendar,{size:14,className:\"text-muted\"}),/*#__PURE__*/_jsx(\"small\",{children:new Date(demande.created_at).toLocaleDateString('fr-FR')})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1\",children:[/*#__PURE__*/_jsx(OverlayTrigger,{overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"Voir les d\\xE9tails\"}),children:/*#__PURE__*/_jsx(Button,{variant:\"outline-info\",size:\"sm\",onClick:()=>handleViewDetails(demande.id),children:/*#__PURE__*/_jsx(Eye,{size:14})})}),activeTab==='recues'&&['envoyee','lue'].includes(demande.statut)&&/*#__PURE__*/_jsx(OverlayTrigger,{overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"R\\xE9pondre\"}),children:/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",size:\"sm\",onClick:()=>{setSelectedDemande(demande);setShowResponseForm(true);},children:/*#__PURE__*/_jsx(Reply,{size:14})})}),activeTab==='emises'&&demande.statut!=='cloturee'&&isComptable&&/*#__PURE__*/_jsx(OverlayTrigger,{overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"Cl\\xF4turer\"}),children:/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",size:\"sm\",onClick:()=>handleClose(demande.id),children:/*#__PURE__*/_jsx(XCircle,{size:14})})})]})})]},demande.id);})})]})}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center p-3\",children:/*#__PURE__*/_jsxs(Pagination,{children:[/*#__PURE__*/_jsx(Pagination.First,{onClick:()=>setCurrentPage(1),disabled:currentPage===1}),/*#__PURE__*/_jsx(Pagination.Prev,{onClick:()=>setCurrentPage(currentPage-1),disabled:currentPage===1}),[...Array(Math.min(5,totalPages))].map((_,i)=>{const pageNum=Math.max(1,currentPage-2)+i;if(pageNum<=totalPages){return/*#__PURE__*/_jsx(Pagination.Item,{active:pageNum===currentPage,onClick:()=>setCurrentPage(pageNum),children:pageNum},pageNum);}return null;}),/*#__PURE__*/_jsx(Pagination.Next,{onClick:()=>setCurrentPage(currentPage+1),disabled:currentPage===totalPages}),/*#__PURE__*/_jsx(Pagination.Last,{onClick:()=>setCurrentPage(totalPages),disabled:currentPage===totalPages})]})})]})})]}),/*#__PURE__*/_jsxs(Modal,{show:showDetailModal,onHide:()=>setShowDetailModal(false),size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(ExclamationTriangle,{className:\"text-warning\"}),\"D\\xE9tails de la demande\"]})}),/*#__PURE__*/_jsx(Modal.Body,{children:selectedDemande&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Sujet:\"}),/*#__PURE__*/_jsx(\"br\",{}),selectedDemande.sujet]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Statut:\"}),/*#__PURE__*/_jsx(\"br\",{}),getStatusBadge(selectedDemande.statut)]})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Badge,{bg:\"light\",text:\"dark\",children:(_typeOptions$find2=typeOptions.find(t=>t.value===selectedDemande.type))===null||_typeOptions$find2===void 0?void 0:_typeOptions$find2.label})]}),/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Priorit\\xE9:\"}),/*#__PURE__*/_jsx(\"br\",{}),getPriorityBadge(selectedDemande.priorite)]}),/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date de cr\\xE9ation:\"}),/*#__PURE__*/_jsx(\"br\",{}),new Date(selectedDemande.created_at).toLocaleString('fr-FR')]})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\xC9metteur:\"}),/*#__PURE__*/_jsx(\"br\",{}),(_selectedDemande$emet=selectedDemande.emetteur)===null||_selectedDemande$emet===void 0?void 0:_selectedDemande$emet.name,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:(_selectedDemande$emet2=selectedDemande.emetteur)===null||_selectedDemande$emet2===void 0?void 0:_selectedDemande$emet2.email})]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Destinataire:\"}),/*#__PURE__*/_jsx(\"br\",{}),(_selectedDemande$dest=selectedDemande.destinataire)===null||_selectedDemande$dest===void 0?void 0:_selectedDemande$dest.name,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:(_selectedDemande$dest2=selectedDemande.destinataire)===null||_selectedDemande$dest2===void 0?void 0:_selectedDemande$dest2.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Message:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"border p-3 mt-2 rounded bg-light\",children:selectedDemande.message})]}),selectedDemande.reponse&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"R\\xE9ponse:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"border p-3 mt-2 rounded bg-success bg-opacity-10\",children:selectedDemande.reponse}),selectedDemande.date_reponse&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"R\\xE9pondu le \",new Date(selectedDemande.date_reponse).toLocaleString('fr-FR')]})]})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowDetailModal(false),children:\"Fermer\"})})]}),/*#__PURE__*/_jsxs(Modal,{show:showResponseForm,onHide:()=>setShowResponseForm(false),children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"R\\xE9pondre \\xE0 la demande\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:selectedDemande&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Sujet:\"}),\" \",selectedDemande.sujet]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Votre r\\xE9ponse\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:4,value:responseText,onChange:e=>setResponseText(e.target.value),placeholder:\"Saisissez votre r\\xE9ponse...\"})]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowResponseForm(false),children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleResponse,disabled:!responseText.trim(),children:\"Envoyer la r\\xE9ponse\"})]})]})]});};export default DemandesExplication;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Container","Row","Col","Card","Button","Form","Table","Alert","Spinner","Badge","Modal","Tabs","Tab","InputGroup","Dropdown","OverlayTrigger","Tooltip","Pagination","Plus","Search","Filter","Eye","Reply","XCircle","CheckCircle","Clock","AlertTriangle","FileEarmarkText","PersonFill","Calendar","ExclamationTriangle","InfoCircle","Archive","Link","useNavigate","useLocation","authService","extractErrorMessage","host","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DemandesExplication","_typeOptions$find2","_selectedDemande$emet","_selectedDemande$emet2","_selectedDemande$dest","_selectedDemande$dest2","navigate","location","user","demandes","setDemandes","filteredDemandes","setFilteredDemandes","statistiques","setStatistiques","loading","setLoading","error","setError","success","setSuccess","isPersonnelView","pathname","isComptable","role","activeTab","setActiveTab","searchTerm","setSearchTerm","statusFilter","setStatusFilter","typeFilter","setTypeFilter","priorityFilter","setPriorityFilter","currentPage","setCurrentPage","totalPages","setTotalPages","showDetailModal","setShowDetailModal","selectedDemande","setSelectedDemande","responseText","setResponseText","showResponseForm","setShowResponseForm","statusOptions","value","label","color","typeOptions","priorityOptions","loadDemandes","params","URLSearchParams","vue","page","per_page","append","response","fetch","toString","method","headers","getToken","ok","Error","status","statusText","data","json","current_page","last_page","stats","message","console","handleViewDetails","demandeId","handleResponse","trim","id","body","JSON","stringify","reponse","handleClose","window","confirm","resetFilters","getStatusBadge","statut","statusConfig","find","s","bg","children","getPriorityBadge","priorite","priorityConfig","p","className","getStatusIcon","fluid","variant","as","to","size","dismissible","onClose","Object","keys","length","md","Body","total","en_attente","repondues","Header","activeKey","onSelect","k","eventKey","title","lg","Text","Control","type","placeholder","onChange","e","target","Select","map","option","onClick","animation","striped","hover","width","demande","index","_demande$destinataire","_demande$emetteur","_demande$destinataire2","_demande$emetteur2","_typeOptions$find","sujet","substring","destinataire","name","emetteur","email","text","t","Date","created_at","toLocaleDateString","overlay","includes","First","disabled","Prev","Array","Math","min","_","i","pageNum","max","Item","active","Next","Last","show","onHide","closeButton","Title","toLocaleString","date_reponse","Footer","Group","Label","rows"],"sources":["/var/www/College-IUP/front/src/pages/comptables/DemandesExplication.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport {\n    Container,\n    Row,\n    Col,\n    Card,\n    Button,\n    Form,\n    Table,\n    Alert,\n    Spinner,\n    Badge,\n    Modal,\n    Tabs,\n    Tab,\n    InputGroup,\n    Dropdown,\n    OverlayTrigger,\n    Tooltip,\n    Pagination\n} from 'react-bootstrap';\nimport {\n    Plus,\n    Search,\n    Filter,\n    Eye,\n    Reply,\n    XCircle,\n    CheckCircle,\n    Clock,\n    AlertTriangle,\n    FileEarmarkText,\n    PersonFill,\n    Calendar,\n    ExclamationTriangle,\n    InfoCircle,\n    Archive\n} from 'react-bootstrap-icons';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { authService } from '../../services/authService';\nimport { extractErrorMessage } from '../../utils/errorHandler';\nimport { host } from '../../utils/fetch';\nimport { useAuth } from '../../hooks/useAuth';\n\nconst DemandesExplication = () => {\n    const navigate = useNavigate();\n    const location = useLocation();\n    const { user } = useAuth();\n    const [demandes, setDemandes] = useState([]);\n    const [filteredDemandes, setFilteredDemandes] = useState([]);\n    const [statistiques, setStatistiques] = useState({});\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n    \n    // Détecter si c'est un personnel (non-comptable) qui accède à ses demandes\n    const isPersonnelView = location.pathname === '/mes-demandes-explication';\n    const isComptable = user && (user.role === 'accountant' || user.role === 'comptable_superieur');\n    \n    // États pour les filtres\n    const [activeTab, setActiveTab] = useState(isPersonnelView ? 'recues' : 'emises');\n    const [searchTerm, setSearchTerm] = useState('');\n    const [statusFilter, setStatusFilter] = useState('');\n    const [typeFilter, setTypeFilter] = useState('');\n    const [priorityFilter, setPriorityFilter] = useState('');\n    const [currentPage, setCurrentPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(1);\n    \n    // Modal pour voir les détails\n    const [showDetailModal, setShowDetailModal] = useState(false);\n    const [selectedDemande, setSelectedDemande] = useState(null);\n    const [responseText, setResponseText] = useState('');\n    const [showResponseForm, setShowResponseForm] = useState(false);\n\n    // Configuration des filtres\n    const statusOptions = [\n        { value: '', label: 'Tous les statuts' },\n        { value: 'brouillon', label: 'Brouillon', color: 'secondary' },\n        { value: 'envoyee', label: 'Envoyée', color: 'primary' },\n        { value: 'lue', label: 'Lue', color: 'info' },\n        { value: 'repondue', label: 'Répondue', color: 'success' },\n        { value: 'cloturee', label: 'Clôturée', color: 'dark' }\n    ];\n\n    const typeOptions = [\n        { value: '', label: 'Tous les types' },\n        { value: 'financier', label: 'Financier' },\n        { value: 'absence', label: 'Absence' },\n        { value: 'retard', label: 'Retard' },\n        { value: 'disciplinaire', label: 'Disciplinaire' },\n        { value: 'autre', label: 'Autre' }\n    ];\n\n    const priorityOptions = [\n        { value: '', label: 'Toutes les priorités' },\n        { value: 'basse', label: 'Basse', color: 'success' },\n        { value: 'normale', label: 'Normale', color: 'info' },\n        { value: 'haute', label: 'Haute', color: 'warning' },\n        { value: 'urgente', label: 'Urgente', color: 'danger' }\n    ];\n\n    // Charger les demandes\n    const loadDemandes = useCallback(async () => {\n        try {\n            setLoading(true);\n            setError('');\n\n            const params = new URLSearchParams({\n                vue: activeTab,\n                page: currentPage,\n                per_page: 10\n            });\n\n            if (searchTerm) params.append('search', searchTerm);\n            if (statusFilter) params.append('statut', statusFilter);\n            if (typeFilter) params.append('type', typeFilter);\n            if (priorityFilter) params.append('priorite', priorityFilter);\n\n            const response = await fetch(`${host}/api/demandes-explication?${params.toString()}`, {\n                method: 'GET',\n                headers: {\n                    'Authorization': `Bearer ${authService.getToken()}`,\n                    'Accept': 'application/json',\n                },\n            });\n\n            if (!response.ok) {\n                throw new Error(`Erreur ${response.status}: ${response.statusText}`);\n            }\n\n            const data = await response.json();\n\n            if (data.success) {\n                setDemandes(data.data.data || []);\n                setFilteredDemandes(data.data.data || []);\n                setCurrentPage(data.data.current_page || 1);\n                setTotalPages(data.data.last_page || 1);\n                setStatistiques(data.stats || {});\n            } else {\n                setError(data.message || 'Erreur lors du chargement des demandes');\n            }\n        } catch (error) {\n            console.error('Erreur lors du chargement:', error);\n            setError(extractErrorMessage(error));\n        } finally {\n            setLoading(false);\n        }\n    }, [activeTab, currentPage, searchTerm, statusFilter, typeFilter, priorityFilter]);\n\n    useEffect(() => {\n        loadDemandes();\n    }, [loadDemandes]);\n\n    // Voir les détails d'une demande\n    const handleViewDetails = async (demandeId) => {\n        try {\n            const response = await fetch(`${host}/api/demandes-explication/${demandeId}`, {\n                method: 'GET',\n                headers: {\n                    'Authorization': `Bearer ${authService.getToken()}`,\n                    'Accept': 'application/json',\n                },\n            });\n\n            if (response.ok) {\n                const data = await response.json();\n                setSelectedDemande(data.data);\n                setShowDetailModal(true);\n            } else {\n                setError('Erreur lors du chargement des détails');\n            }\n        } catch (error) {\n            setError('Erreur lors du chargement des détails');\n        }\n    };\n\n    // Répondre à une demande\n    const handleResponse = async () => {\n        if (!responseText.trim()) {\n            setError('Veuillez saisir une réponse');\n            return;\n        }\n\n        try {\n            setLoading(true);\n            const response = await fetch(`${host}/api/demandes-explication/${selectedDemande.id}/repondre`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${authService.getToken()}`,\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json',\n                },\n                body: JSON.stringify({\n                    reponse: responseText\n                })\n            });\n\n            const data = await response.json();\n\n            if (data.success) {\n                setSuccess('Réponse envoyée avec succès');\n                setResponseText('');\n                setShowResponseForm(false);\n                setShowDetailModal(false);\n                loadDemandes();\n            } else {\n                setError(data.message || 'Erreur lors de l\\'envoi de la réponse');\n            }\n        } catch (error) {\n            setError(extractErrorMessage(error));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Clôturer une demande\n    const handleClose = async (demandeId) => {\n        if (!window.confirm('Êtes-vous sûr de vouloir clôturer cette demande ?')) {\n            return;\n        }\n\n        try {\n            setLoading(true);\n            const response = await fetch(`${host}/api/demandes-explication/${demandeId}/cloturer`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${authService.getToken()}`,\n                    'Accept': 'application/json',\n                },\n            });\n\n            const data = await response.json();\n\n            if (data.success) {\n                setSuccess('Demande clôturée avec succès');\n                loadDemandes();\n                setShowDetailModal(false);\n            } else {\n                setError(data.message || 'Erreur lors de la clôture');\n            }\n        } catch (error) {\n            setError(extractErrorMessage(error));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Réinitialiser les filtres\n    const resetFilters = () => {\n        setSearchTerm('');\n        setStatusFilter('');\n        setTypeFilter('');\n        setPriorityFilter('');\n        setCurrentPage(1);\n    };\n\n    // Obtenir le badge de statut\n    const getStatusBadge = (statut) => {\n        const statusConfig = statusOptions.find(s => s.value === statut);\n        return (\n            <Badge bg={statusConfig?.color || 'secondary'}>\n                {statusConfig?.label || statut}\n            </Badge>\n        );\n    };\n\n    // Obtenir le badge de priorité\n    const getPriorityBadge = (priorite) => {\n        const priorityConfig = priorityOptions.find(p => p.value === priorite);\n        return (\n            <Badge bg={priorityConfig?.color || 'secondary'} className=\"me-1\">\n                {priorityConfig?.label || priorite}\n            </Badge>\n        );\n    };\n\n    // Obtenir l'icône de statut\n    const getStatusIcon = (statut) => {\n        switch (statut) {\n            case 'brouillon': return <FileEarmarkText className=\"text-secondary\" />;\n            case 'envoyee': return <Clock className=\"text-primary\" />;\n            case 'lue': return <Eye className=\"text-info\" />;\n            case 'repondue': return <CheckCircle className=\"text-success\" />;\n            case 'cloturee': return <Archive className=\"text-dark\" />;\n            default: return <InfoCircle className=\"text-muted\" />;\n        }\n    };\n\n    return (\n        <Container fluid className=\"py-4\">\n            {/* Header */}\n            <Row className=\"mb-4\">\n                <Col>\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                        <div>\n                            <h2 className=\"d-flex align-items-center gap-2 mb-1\">\n                                <ExclamationTriangle className=\"text-warning\" />\n                                {isPersonnelView ? 'Mes Demandes d\\'Explication' : 'Demandes d\\'Explication (D.E)'}\n                            </h2>\n                            <p className=\"text-muted mb-0\">\n                                {isPersonnelView \n                                    ? 'Demandes d\\'explication reçues et à traiter' \n                                    : 'Gestion des demandes d\\'explication au personnel'}\n                            </p>\n                        </div>\n                        {isComptable && !isPersonnelView && (\n                            <Button\n                                variant=\"primary\"\n                                as={Link}\n                                to=\"/demandes-explication/nouvelle\"\n                                className=\"d-flex align-items-center gap-2\"\n                            >\n                                <Plus size={16} />\n                                Nouvelle demande\n                            </Button>\n                        )}\n                    </div>\n                </Col>\n            </Row>\n\n            {/* Alerts */}\n            {error && (\n                <Alert variant=\"danger\" dismissible onClose={() => setError('')} className=\"mb-4\">\n                    <strong>Erreur:</strong> {error}\n                </Alert>\n            )}\n            {success && (\n                <Alert variant=\"success\" dismissible onClose={() => setSuccess('')} className=\"mb-4\">\n                    <strong>Succès:</strong> {success}\n                </Alert>\n            )}\n\n            {/* Statistiques */}\n            {statistiques && Object.keys(statistiques).length > 0 && (\n                <Row className=\"mb-4\">\n                    <Col md={3}>\n                        <Card className=\"bg-primary text-white h-100\">\n                            <Card.Body className=\"text-center\">\n                                <h3>{statistiques.total || 0}</h3>\n                                <p className=\"mb-0\">Total</p>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                    <Col md={3}>\n                        <Card className=\"bg-warning text-dark h-100\">\n                            <Card.Body className=\"text-center\">\n                                <h3>{statistiques.en_attente || 0}</h3>\n                                <p className=\"mb-0\">En attente</p>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                    <Col md={3}>\n                        <Card className=\"bg-success text-white h-100\">\n                            <Card.Body className=\"text-center\">\n                                <h3>{statistiques.repondues || 0}</h3>\n                                <p className=\"mb-0\">Répondues</p>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                    <Col md={3}>\n                        <Card className=\"bg-info text-white h-100\">\n                            <Card.Body className=\"text-center\">\n                                <h3>{demandes.length}</h3>\n                                <p className=\"mb-0\">Affichées</p>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                </Row>\n            )}\n\n            {/* Onglets et Filtres */}\n            <Card className=\"mb-4\">\n                <Card.Header>\n                    <Tabs \n                        activeKey={activeTab} \n                        onSelect={(k) => {\n                            setActiveTab(k);\n                            setCurrentPage(1);\n                        }}\n                        className=\"mb-3\"\n                    >\n                        {isPersonnelView ? (\n                            // Pour le personnel : seulement ses demandes reçues\n                            [\n                                <Tab key=\"recues\" eventKey=\"recues\" title=\"Demandes reçues\" />,\n                                <Tab key=\"toutes\" eventKey=\"toutes\" title=\"Toutes mes demandes\" />\n                            ]\n                        ) : (\n                            // Pour les comptables : toutes les vues\n                            [\n                                <Tab key=\"emises\" eventKey=\"emises\" title=\"Demandes émises\" />,\n                                <Tab key=\"recues\" eventKey=\"recues\" title=\"Demandes reçues\" />,\n                                <Tab key=\"toutes\" eventKey=\"toutes\" title=\"Toutes les demandes\" />\n                            ]\n                        )}\n                    </Tabs>\n\n                    <Row>\n                        <Col lg={3} md={6} className=\"mb-2\">\n                            <InputGroup size=\"sm\">\n                                <InputGroup.Text><Search /></InputGroup.Text>\n                                <Form.Control\n                                    type=\"text\"\n                                    placeholder=\"Rechercher...\"\n                                    value={searchTerm}\n                                    onChange={(e) => setSearchTerm(e.target.value)}\n                                />\n                            </InputGroup>\n                        </Col>\n                        <Col lg={2} md={6} className=\"mb-2\">\n                            <Form.Select\n                                size=\"sm\"\n                                value={statusFilter}\n                                onChange={(e) => setStatusFilter(e.target.value)}\n                            >\n                                {statusOptions.map(option => (\n                                    <option key={option.value} value={option.value}>\n                                        {option.label}\n                                    </option>\n                                ))}\n                            </Form.Select>\n                        </Col>\n                        <Col lg={2} md={6} className=\"mb-2\">\n                            <Form.Select\n                                size=\"sm\"\n                                value={typeFilter}\n                                onChange={(e) => setTypeFilter(e.target.value)}\n                            >\n                                {typeOptions.map(option => (\n                                    <option key={option.value} value={option.value}>\n                                        {option.label}\n                                    </option>\n                                ))}\n                            </Form.Select>\n                        </Col>\n                        <Col lg={2} md={6} className=\"mb-2\">\n                            <Form.Select\n                                size=\"sm\"\n                                value={priorityFilter}\n                                onChange={(e) => setPriorityFilter(e.target.value)}\n                            >\n                                {priorityOptions.map(option => (\n                                    <option key={option.value} value={option.value}>\n                                        {option.label}\n                                    </option>\n                                ))}\n                            </Form.Select>\n                        </Col>\n                        <Col lg={3} md={12} className=\"mb-2\">\n                            <div className=\"d-flex gap-2\">\n                                <Button\n                                    variant=\"outline-secondary\"\n                                    size=\"sm\"\n                                    onClick={resetFilters}\n                                    className=\"flex-grow-1\"\n                                >\n                                    <Filter className=\"me-1\" />\n                                    Réinitialiser\n                                </Button>\n                                <Button\n                                    variant=\"primary\"\n                                    size=\"sm\"\n                                    onClick={() => setCurrentPage(1)}\n                                    className=\"flex-grow-1\"\n                                >\n                                    <Search className=\"me-1\" />\n                                    Filtrer\n                                </Button>\n                            </div>\n                        </Col>\n                    </Row>\n                </Card.Header>\n            </Card>\n\n            {/* Liste des demandes */}\n            <Card>\n                <Card.Header>\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                        <h5 className=\"mb-0\">\n                            {activeTab === 'emises' && 'Demandes émises'}\n                            {activeTab === 'recues' && 'Demandes reçues'}\n                            {activeTab === 'toutes' && 'Toutes les demandes'}\n                        </h5>\n                        {demandes.length > 0 && (\n                            <Badge bg=\"secondary\">{demandes.length} demande(s)</Badge>\n                        )}\n                    </div>\n                </Card.Header>\n                <Card.Body className=\"p-0\">\n                    {loading ? (\n                        <div className=\"text-center py-5\">\n                            <Spinner animation=\"border\" variant=\"primary\" />\n                            <p className=\"mt-3 text-muted\">Chargement des demandes...</p>\n                        </div>\n                    ) : demandes.length === 0 ? (\n                        <div className=\"text-center py-5\">\n                            <ExclamationTriangle size={48} className=\"text-muted mb-3\" />\n                            <h5 className=\"text-muted\">Aucune demande trouvée</h5>\n                            <p className=\"text-muted\">\n                                {activeTab === 'emises' && 'Vous n\\'avez pas encore émis de demandes d\\'explication.'}\n                                {activeTab === 'recues' && 'Vous n\\'avez pas reçu de demandes d\\'explication.'}\n                                {activeTab === 'toutes' && 'Aucune demande ne correspond aux critères de recherche.'}\n                            </p>\n                        </div>\n                    ) : (\n                        <>\n                            <div className=\"table-responsive\">\n                                <Table striped hover className=\"mb-0\">\n                                    <thead className=\"table-dark\">\n                                        <tr>\n                                            <th width=\"40\">#</th>\n                                            <th>Sujet</th>\n                                            <th width=\"150\">{activeTab === 'emises' ? 'Destinataire' : 'Émetteur'}</th>\n                                            <th width=\"100\">Type</th>\n                                            <th width=\"80\">Priorité</th>\n                                            <th width=\"100\">Statut</th>\n                                            <th width=\"120\">Date</th>\n                                            <th width=\"120\">Actions</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {demandes.map((demande, index) => (\n                                            <tr key={demande.id}>\n                                                <td className=\"text-center\">{((currentPage - 1) * 10) + index + 1}</td>\n                                                <td>\n                                                    <div className=\"d-flex align-items-center gap-2\">\n                                                        {getStatusIcon(demande.statut)}\n                                                        <div>\n                                                            <strong>{demande.sujet}</strong>\n                                                            <br />\n                                                            <small className=\"text-muted\">\n                                                                {demande.message.length > 60 \n                                                                    ? demande.message.substring(0, 60) + '...'\n                                                                    : demande.message\n                                                                }\n                                                            </small>\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                                <td>\n                                                    <div className=\"d-flex align-items-center gap-2\">\n                                                        <PersonFill className=\"text-muted\" />\n                                                        <div>\n                                                            <strong>\n                                                                {activeTab === 'emises' \n                                                                    ? demande.destinataire?.name \n                                                                    : demande.emetteur?.name\n                                                                }\n                                                            </strong>\n                                                            <br />\n                                                            <small className=\"text-muted\">\n                                                                {activeTab === 'emises'\n                                                                    ? demande.destinataire?.email\n                                                                    : demande.emetteur?.email\n                                                                }\n                                                            </small>\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                                <td>\n                                                    <Badge bg=\"light\" text=\"dark\">\n                                                        {typeOptions.find(t => t.value === demande.type)?.label || demande.type}\n                                                    </Badge>\n                                                </td>\n                                                <td>{getPriorityBadge(demande.priorite)}</td>\n                                                <td>{getStatusBadge(demande.statut)}</td>\n                                                <td>\n                                                    <div className=\"d-flex align-items-center gap-1\">\n                                                        <Calendar size={14} className=\"text-muted\" />\n                                                        <small>\n                                                            {new Date(demande.created_at).toLocaleDateString('fr-FR')}\n                                                        </small>\n                                                    </div>\n                                                </td>\n                                                <td>\n                                                    <div className=\"d-flex gap-1\">\n                                                        <OverlayTrigger\n                                                            overlay={<Tooltip>Voir les détails</Tooltip>}\n                                                        >\n                                                            <Button\n                                                                variant=\"outline-info\"\n                                                                size=\"sm\"\n                                                                onClick={() => handleViewDetails(demande.id)}\n                                                            >\n                                                                <Eye size={14} />\n                                                            </Button>\n                                                        </OverlayTrigger>\n                                                        \n                                                        {activeTab === 'recues' && ['envoyee', 'lue'].includes(demande.statut) && (\n                                                            <OverlayTrigger\n                                                                overlay={<Tooltip>Répondre</Tooltip>}\n                                                            >\n                                                                <Button\n                                                                    variant=\"outline-success\"\n                                                                    size=\"sm\"\n                                                                    onClick={() => {\n                                                                        setSelectedDemande(demande);\n                                                                        setShowResponseForm(true);\n                                                                    }}\n                                                                >\n                                                                    <Reply size={14} />\n                                                                </Button>\n                                                            </OverlayTrigger>\n                                                        )}\n                                                        \n                                                        {activeTab === 'emises' && demande.statut !== 'cloturee' && isComptable && (\n                                                            <OverlayTrigger\n                                                                overlay={<Tooltip>Clôturer</Tooltip>}\n                                                            >\n                                                                <Button\n                                                                    variant=\"outline-secondary\"\n                                                                    size=\"sm\"\n                                                                    onClick={() => handleClose(demande.id)}\n                                                                >\n                                                                    <XCircle size={14} />\n                                                                </Button>\n                                                            </OverlayTrigger>\n                                                        )}\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                </Table>\n                            </div>\n\n                            {/* Pagination */}\n                            {totalPages > 1 && (\n                                <div className=\"d-flex justify-content-center p-3\">\n                                    <Pagination>\n                                        <Pagination.First \n                                            onClick={() => setCurrentPage(1)}\n                                            disabled={currentPage === 1}\n                                        />\n                                        <Pagination.Prev \n                                            onClick={() => setCurrentPage(currentPage - 1)}\n                                            disabled={currentPage === 1}\n                                        />\n                                        \n                                        {[...Array(Math.min(5, totalPages))].map((_, i) => {\n                                            const pageNum = Math.max(1, currentPage - 2) + i;\n                                            if (pageNum <= totalPages) {\n                                                return (\n                                                    <Pagination.Item\n                                                        key={pageNum}\n                                                        active={pageNum === currentPage}\n                                                        onClick={() => setCurrentPage(pageNum)}\n                                                    >\n                                                        {pageNum}\n                                                    </Pagination.Item>\n                                                );\n                                            }\n                                            return null;\n                                        })}\n                                        \n                                        <Pagination.Next \n                                            onClick={() => setCurrentPage(currentPage + 1)}\n                                            disabled={currentPage === totalPages}\n                                        />\n                                        <Pagination.Last \n                                            onClick={() => setCurrentPage(totalPages)}\n                                            disabled={currentPage === totalPages}\n                                        />\n                                    </Pagination>\n                                </div>\n                            )}\n                        </>\n                    )}\n                </Card.Body>\n            </Card>\n\n            {/* Modal de détails */}\n            <Modal show={showDetailModal} onHide={() => setShowDetailModal(false)} size=\"lg\">\n                <Modal.Header closeButton>\n                    <Modal.Title className=\"d-flex align-items-center gap-2\">\n                        <ExclamationTriangle className=\"text-warning\" />\n                        Détails de la demande\n                    </Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    {selectedDemande && (\n                        <div>\n                            <Row className=\"mb-3\">\n                                <Col md={6}>\n                                    <strong>Sujet:</strong><br />\n                                    {selectedDemande.sujet}\n                                </Col>\n                                <Col md={6}>\n                                    <strong>Statut:</strong><br />\n                                    {getStatusBadge(selectedDemande.statut)}\n                                </Col>\n                            </Row>\n                            <Row className=\"mb-3\">\n                                <Col md={4}>\n                                    <strong>Type:</strong><br />\n                                    <Badge bg=\"light\" text=\"dark\">\n                                        {typeOptions.find(t => t.value === selectedDemande.type)?.label}\n                                    </Badge>\n                                </Col>\n                                <Col md={4}>\n                                    <strong>Priorité:</strong><br />\n                                    {getPriorityBadge(selectedDemande.priorite)}\n                                </Col>\n                                <Col md={4}>\n                                    <strong>Date de création:</strong><br />\n                                    {new Date(selectedDemande.created_at).toLocaleString('fr-FR')}\n                                </Col>\n                            </Row>\n                            <Row className=\"mb-3\">\n                                <Col md={6}>\n                                    <strong>Émetteur:</strong><br />\n                                    {selectedDemande.emetteur?.name}<br />\n                                    <small className=\"text-muted\">{selectedDemande.emetteur?.email}</small>\n                                </Col>\n                                <Col md={6}>\n                                    <strong>Destinataire:</strong><br />\n                                    {selectedDemande.destinataire?.name}<br />\n                                    <small className=\"text-muted\">{selectedDemande.destinataire?.email}</small>\n                                </Col>\n                            </Row>\n                            <div className=\"mb-3\">\n                                <strong>Message:</strong><br />\n                                <div className=\"border p-3 mt-2 rounded bg-light\">\n                                    {selectedDemande.message}\n                                </div>\n                            </div>\n                            {selectedDemande.reponse && (\n                                <div className=\"mb-3\">\n                                    <strong>Réponse:</strong><br />\n                                    <div className=\"border p-3 mt-2 rounded bg-success bg-opacity-10\">\n                                        {selectedDemande.reponse}\n                                    </div>\n                                    {selectedDemande.date_reponse && (\n                                        <small className=\"text-muted\">\n                                            Répondu le {new Date(selectedDemande.date_reponse).toLocaleString('fr-FR')}\n                                        </small>\n                                    )}\n                                </div>\n                            )}\n                        </div>\n                    )}\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={() => setShowDetailModal(false)}>\n                        Fermer\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n\n            {/* Modal de réponse */}\n            <Modal show={showResponseForm} onHide={() => setShowResponseForm(false)}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Répondre à la demande</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    {selectedDemande && (\n                        <>\n                            <div className=\"mb-3\">\n                                <strong>Sujet:</strong> {selectedDemande.sujet}\n                            </div>\n                            <Form.Group>\n                                <Form.Label>Votre réponse</Form.Label>\n                                <Form.Control\n                                    as=\"textarea\"\n                                    rows={4}\n                                    value={responseText}\n                                    onChange={(e) => setResponseText(e.target.value)}\n                                    placeholder=\"Saisissez votre réponse...\"\n                                />\n                            </Form.Group>\n                        </>\n                    )}\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={() => setShowResponseForm(false)}>\n                        Annuler\n                    </Button>\n                    <Button \n                        variant=\"primary\" \n                        onClick={handleResponse}\n                        disabled={!responseText.trim()}\n                    >\n                        Envoyer la réponse\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </Container>\n    );\n};\n\nexport default DemandesExplication;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}